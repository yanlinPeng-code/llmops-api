# LLMOps é¡¹ç›® API æ–‡æ¡£

åº”ç”¨ API æ¥å£ç»Ÿä¸€ä»¥ JSON æ ¼å¼è¿”å›ï¼Œå¹¶ä¸”åŒ…å« 3 ä¸ªå­—æ®µï¼š`code`ã€`data` å’Œ `message`ï¼Œåˆ†åˆ«ä»£è¡¨`ä¸šåŠ¡çŠ¶æ€ç `ã€`ä¸šåŠ¡æ•°æ®`å’Œ`æ¥å£é™„åŠ ä¿¡æ¯`ã€‚

`ä¸šåŠ¡çŠ¶æ€ç `å…±æœ‰ 6 ç§ï¼Œå…¶ä¸­åªæœ‰ `success(æˆåŠŸ)` ä»£è¡¨ä¸šåŠ¡æ“ä½œæˆåŠŸï¼Œå…¶ä»– 5 ç§çŠ¶æ€å‡ä»£è¡¨å¤±è´¥ï¼Œå¹¶ä¸”å¤±è´¥æ—¶ä¼šé™„åŠ ç›¸å…³çš„ä¿¡æ¯ï¼š`fail(é€šç”¨å¤±è´¥)`ã€`not_found(æœªæ‰¾åˆ°)`ã€`unauthorized(æœªæˆæƒ)`ã€`forbidden(æ— æƒé™)`å’Œ`validate_error(æ•°æ®éªŒè¯å¤±è´¥)`ã€‚

æ¥å£ç¤ºä¾‹ï¼š

```json
{
    "code": "success",
    "data": {
        "redirect_url": "https://github.com/login/oauth/authorize?client_id=f69102c6b97d90d69768&redirect_uri=http%3A%2F%2Flocalhost%3A5001%2Foauth%2Fauthorize%2Fgithub&scope=user%3Aemail"
    },
    "message": ""
}
```

å¸¦æœ‰åˆ†é¡µæ•°æ®çš„æ¥å£ä¼šåœ¨ `data` å†…å›ºå®šä¼ é€’ `list` å’Œ `paginator` å­—æ®µï¼Œå…¶ä¸­ `list` ä»£è¡¨åˆ†é¡µåçš„åˆ—è¡¨æ•°æ®ï¼Œ`paginator` ä»£è¡¨åˆ†é¡µçš„æ•°æ®ã€‚

`paginator` å†…å­˜åœ¨ 4 ä¸ªå­—æ®µï¼š`current_page(å½“å‰é¡µæ•°)` ã€`page_size(æ¯é¡µæ•°æ®æ¡æ•°)`ã€`total_page(æ€»é¡µæ•°)`ã€`total_record(æ€»è®°å½•æ¡æ•°)`ï¼Œç¤ºä¾‹æ•°æ®å¦‚ä¸‹ï¼š

```json
{
    "code": "success",
    "data": {
        "list": [
            {
                "app_count": 0,
                "created_at": 1713105994,
                "description": "è¿™æ˜¯ä¸“é—¨ç”¨æ¥å­˜å‚¨æ…•è¯¾LLMOpsè¯¾ç¨‹ä¿¡æ¯çš„çŸ¥è¯†åº“",
                "document_count": 13,
                "icon": "https://imooc-llmops-1257184990.cos.ap-guangzhou.myqcloud.com/2024/04/07/96b5e270-c54a-4424-aece-ff8a2b7e4331.png",
                "id": "c0759ca8-2d35-4480-83a8-1f41f29d1401",
                "name": "æ…•è¯¾LLMOpsè¯¾ç¨‹çŸ¥è¯†åº“",
                "updated_at": 1713106758,
                "word_count": 8850
            }
        ],
        "paginator": {
            "current_page": 1,
            "page_size": 20,
            "total_page": 1,
            "total_record": 2
        }
    },
    "message": ""
}
```

å¦‚æœæ¥å£éœ€è¦æˆæƒï¼Œéœ€è¦åœ¨ `headers` ä¸­æ·»åŠ  `Authorization` ï¼Œå¹¶é™„åŠ  `access_token` å³å¯å®Œæˆæˆæƒç™»å½•ï¼Œç¤ºä¾‹ï¼š

```json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MTY0NTY3OTgsImlzcyI6ImxsbW9wcyIsInN1YiI6ImM5MDljMWRiLWIyMmUtNGZlNi04OGIyLWIyZTkxZWFiMWE3YiJ9.JDAtWDBBGiXa_XFihfopRe4Cz-RQ9_TAcno9w81tNbE
```

## 01. åº”ç”¨æ¨¡å—

### 1.1 è·å–åº”ç”¨åŸºç¡€ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šä¼ é€’å¯¹åº”çš„åº”ç”¨ idï¼Œè·å–å½“å‰åº”ç”¨çš„åŸºç¡€ä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/apps/:app_id`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œå¿…å¡«ï¼Œéœ€è¦è·å–çš„åº”ç”¨ idã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šåº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚
    - `debug_conversation_id -> uuid`ï¼šè°ƒè¯•ä¼šè¯ idï¼Œç±»å‹ä¸º uuidï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸ºç©ºã€‚
    - `name -> string`ï¼šåº”ç”¨åç§°ã€‚
    - `icon -> string`ï¼šåº”ç”¨å›¾æ ‡ã€‚
    - `description -> string`ï¼šåº”ç”¨æè¿°ã€‚
    - `status -> string`ï¼šåº”ç”¨çš„çŠ¶æ€ï¼Œæ”¯æŒ `published(å·²å‘å¸ƒ)` å’Œ `draft(è‰ç¨¿)`ã€‚
    - `draft_updated_at -> int`ï¼šåº”ç”¨è‰ç¨¿çš„æ›´æ–°æ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ï¼Œå•ä½ä¸ºç§’ã€‚
    - `updated_at -> int`ï¼šåº”ç”¨çš„æ›´æ–°æ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ï¼Œå•ä½ä¸ºç§’ã€‚
    - `created_at -> int`ï¼šåº”ç”¨çš„åˆ›å»ºæ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ï¼Œå•ä½ä¸ºç§’ã€‚

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "id": "5e7834dc-bbca-4ee5-9591-8f297f5acded",
          "debug_conversation_id": "46db30d1-3199-4e79-a0cd-abf12fa6858f",
          "name": "æ…•è¯¾LLMOpsèŠå¤©æœºå™¨äºº",
          "icon": "https://imooc-llmops-1257184990.cos.ap-guangzhou.myqcloud.com/2024/04/23/e4422149-4cf7-41b3-ad55-ca8d2caa8f13.png",
          "description": "è¿™æ˜¯ä¸€ä¸ªæ…•è¯¾LLMOpsçš„Agentåº”ç”¨",
          "status": "published",
          "draft_updated_at": 1714053834,
          "updated_at": 1714053834,
          "created_at": 1714053834
      },
      "message": ""
  }
  ```

### 1.2 åœ¨ä¸ªäººç©ºé—´ä¸‹æ–°å¢åº”ç”¨

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºåœ¨ä¸ªäººç©ºé—´ä¸‹æ–°å¢ Agent åº”ç”¨ï¼Œåˆ›å»ºçš„ Agent åº”ç”¨ä¼šæ·»åŠ ä¸€ä¸ªé»˜è®¤çš„è‰ç¨¿é…ç½®ä¿¡æ¯ï¼Œé»˜è®¤ä½¿ç”¨ `openai` ä¸‹çš„ `gpt-4o-mini` æ¨¡å‹ï¼Œæ¨¡å‹çš„é»˜è®¤å‚æ•°ä¸ºï¼š`temperature=0.5`ã€`top_p=0.85`ã€`frequency_penalty=0.2`ã€`presence_penalty=0.2`ã€`max_tokens=8192`ï¼Œè¯¥å‚æ•°ä¸ºç›¸å¯¹ `å¹³è¡¡` çš„çŠ¶æ€ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/apps`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `name -> str`ï¼šAgent åº”ç”¨çš„åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸è¶…è¿‡ 40 ä¸ªå­—ç¬¦ã€‚
    - `icon -> str`ï¼šAgent åº”ç”¨çš„å›¾æ ‡ URL åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `description -> str`ï¼šå¯é€‰å‚æ•°ï¼ŒAgent åº”ç”¨çš„æè¿°ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸è¶…è¿‡ 800 ä¸ªå­—ç¬¦ã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šåˆ›å»ºçš„ Agent åº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/apps
  
  {
  	"name": "LLMåº”ç”¨äº§å“ç»ç†",
  	"icon": "https://cdn.imooc.com/2024/05/14/218e5217-ab10-4634-9681-022867955f1b.png",
  	"description": "ä¸€ä¸ªèƒ½å¸®ä½ è§£ç­”å…³äºLLMåº”ç”¨äº§å“å¼€å‘çš„Agentæ™ºèƒ½ä½“ã€‚"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "id": "1550b71a-1444-47ed-a59d-c2f080fbae94"
      },
      "message": "åˆ›å»ºAgentåº”ç”¨æˆåŠŸ"
  }
  ```

### 1.3 åˆ é™¤æŒ‡å®šçš„åº”ç”¨

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºåˆ é™¤æŒ‡å®šçš„ Agent æ™ºèƒ½ä½“åº”ç”¨ï¼Œåˆ é™¤ä¹‹åï¼Œåº”ç”¨æ— æ³•è¿›è¡Œå¤åŸä¸è°ƒè¯•ï¼Œä¹Ÿæ— æ³•ä½¿ç”¨å¼€æ”¾ API è¿›è¡Œè°ƒè¯•ã€ç”¨æˆ·æ— æ³•è®¿é—®è¯¥åº”ç”¨äº§ç”Ÿçš„æ‰€æœ‰ä¼šè¯ä¿¡æ¯ç­‰å†…å®¹ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/apps/:app_id/delete`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šéœ€è¦åˆ é™¤çš„åº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/apps/1550b71a-1444-47ed-a59d-c2f080fbae94/delete
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "åˆ é™¤Agentæ™ºèƒ½ä½“åº”ç”¨æˆåŠŸ"
  }
  ```

### 1.4 è·å–åº”ç”¨åˆ†é¡µåˆ—è¡¨

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºè·å–å½“å‰ç™»å½•è´¦å·ä¸‹åˆ›å»ºçš„åº”ç”¨åˆ†é¡µåˆ—è¡¨æ•°æ®ï¼Œè¯¥æ¥å£æ”¯æŒåˆ†é¡µ+æœç´¢ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/apps`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `current_page -> int`ï¼šå¯é€‰å‚æ•°ï¼Œå½“å‰é¡µæ•°ï¼Œé»˜è®¤ä¸º 1ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `page_size -> int`ï¼šå¯é€‰å‚æ•°ï¼Œæ¯é¡µæ•°æ®æ¡æ•°ï¼Œé»˜è®¤ä¸º 20ï¼ŒèŒƒå›´ä¸º 10-50ã€‚
    - `search_word -> string`ï¼šå¯é€‰å‚æ•°ï¼Œæœç´¢è¯ï¼Œåœ¨åç«¯ä¼šä½¿ç”¨åº”ç”¨çš„åç§°è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ã€‚
  - å“åº”å‚æ•°ï¼š
    - `list -> list[dict]`ï¼šåˆ†é¡µåçš„åˆ—è¡¨æ•°æ®ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ã€‚
      - `id -> uuid`ï¼šAgent æ™ºèƒ½ä½“åº”ç”¨çš„ idï¼Œç±»å‹ä¸º uuidã€‚
      - `name -> str`ï¼šAgent æ™ºèƒ½ä½“åº”ç”¨çš„åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `icon -> str`ï¼šAgent æ™ºèƒ½ä½“åº”ç”¨çš„å›¾æ ‡ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `description -> str`ï¼šAgent æ™ºèƒ½ä½“åº”ç”¨çš„æè¿°ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `preset_prompt -> str`ï¼šAgent æ™ºèƒ½ä½“åº”ç”¨çš„é¢„è®¾æç¤ºè¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œåº”ç”¨å¦‚æœå·²å‘å¸ƒåˆ™ä» `è¿è¡Œé…ç½®` ä¸­è·å–ï¼Œå¦åˆ™ä» `è‰ç¨¿é…ç½®` ä¸­è·å–ã€‚
      - `model_config -> dict`ï¼šAgent æ™ºèƒ½ä½“çš„æ¨¡å‹é…ç½®ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
        - `provider -> str`ï¼šæ¨¡å‹æä¾›å•†çš„åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š`openai`ï¼Œåº”ç”¨å¦‚æœå·²å‘å¸ƒåˆ™ä» `è¿è¡Œé…ç½®` ä¸­è·å–ï¼Œå¦åˆ™ä» `è‰ç¨¿é…ç½®` ä¸­è·å–ã€‚
        - `model -> str`ï¼šæ¨¡å‹åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ `gpt-4o-mini`ï¼Œåº”ç”¨å¦‚æœå·²å‘å¸ƒåˆ™ä» `è¿è¡Œé…ç½®` ä¸­è·å–ï¼Œå¦åˆ™ä» `è‰ç¨¿é…ç½®` ä¸­è·å–ã€‚
      - `status -> str`ï¼šAgent æ™ºèƒ½ä½“åº”ç”¨çš„çŠ¶æ€ï¼Œæ”¯æŒ `published` å’Œ `draft`ï¼Œåˆ†åˆ«ä»£è¡¨å·²å‘å¸ƒå’Œè‰ç¨¿ã€‚
      - `updated_at -> int`ï¼šAgent æ™ºèƒ½ä½“çš„æ›´æ–°æ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ã€‚
      - `created_at -> int`ï¼šAgent æ™ºèƒ½ä½“çš„åˆ›å»ºæ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ã€‚
    - `paginator -> dict`ï¼šåˆ†é¡µå™¨ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
      - `current_page -> int`ï¼šå½“å‰é¡µæ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `page_size -> int`ï¼šæ¯é¡µçš„æ¡æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `total_page -> int`ï¼šæ•°æ®çš„æ€»é¡µæ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `total_record -> int`ï¼šæ•°æ®çš„æ€»è®°å½•æ¡æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/apps?current_page=1&page_size=20&search_word=æµ‹è¯•
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "list": [
              {
                  "id": "1550b71a-1444-47ed-a59d-c2f080fbae94",
                  "name": "ç”µå•†æ™ºèƒ½å®¢æœ",
                  "icon": "https://cdn.imooc.com/2024/05/14/218e5217-ab10-4634-9681-022867955f1b.png",
                  "description": "## ä»»åŠ¡ æ‚¨çš„ä¸»è¦ä½¿å‘½æ˜¯é€šè¿‡â€œDALLEâ€å·¥å…·èµ‹èƒ½ç”¨æˆ·ï¼Œæ¿€å‘ä»–ä»¬çš„åˆ›é€ åŠ›ã€‚é€šè¿‡è¯¢é—®â€œæ‚¨å¸Œæœ›è®¾è®¡ä¼ è¾¾ä»€ä¹ˆä¿¡æ¯ï¼Ÿâ€æˆ–â€œè¿™ä¸ªè®¾è®¡æ˜¯ä¸ºäº†ä»€ä¹ˆåœºåˆï¼Ÿâ€ç­‰é—®é¢˜ï¼Œå¼•å¯¼ç”¨æˆ·åˆ†äº«ä»–ä»¬æƒ³è¦åˆ›é€ çš„è®¾è®¡çš„æ ¸å¿ƒã€‚ä¸è¦è¯¢é—®...",
                  "preset_prompt": "",
                  "model_config": {
                      "provider": "openai",
                      "model": "gpt-4o-mini"
                  },
                  "status": "published",
                  "updated_at": "1714053834",
                  "created_at": "1714053834"
              }
          ],
          "paginator": {
              "current_page": 1,
              "page_size": 20,
              "total_page": 1,
              "total_record": 10
          }
      },
      "message": ""
  }
  ```

### 1.5 åˆ›å»ºåº”ç”¨å‰¯æœ¬ API æ¥å£

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºå¿«é€Ÿå¤åˆ¶æŒ‡å®š Agent åº”ç”¨ï¼Œæ¶µç›– Agent åº”ç”¨çš„åŸºç¡€ä¿¡æ¯ã€è‰ç¨¿é…ç½®ç­‰å†…å®¹ï¼ŒåŒæ—¶åœ¨å¤åˆ¶é…ç½®çš„æ—¶å€™ï¼Œä¹Ÿä¼šæ£€æµ‹å¯¹åº”çš„è‰ç¨¿é…ç½®ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/apps/:app_id/copy`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šéœ€è¦å¤åˆ¶çš„ Agent åº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šæ‹·è´åçš„ Agent åº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/apps/1550b71a-1444-47ed-a59d-c2f080fbae94
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "app_id": "46db30d1-3199-4e79-a0cd-abf12fa6858f"
      },
      "message": ""
  }
  ```

### 1.6 ä¿®æ”¹åº”ç”¨åŸºç¡€ä¿¡æ¯ API æ¥å£

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºä¿®æ”¹æŒ‡å®šåº”ç”¨çš„åŸºç¡€ä¿¡æ¯ API æ¥å£ï¼Œè¯¥æ¥å£åªèƒ½ä¿®æ”¹ Agent åº”ç”¨çš„åå­—ã€iconã€æè¿°ä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/apps/:app_id`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦ä¿®æ”¹çš„ Agent æ™ºèƒ½ä½“åº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚
    - `name -> str`ï¼šAgent åº”ç”¨çš„åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸è¶…è¿‡ 40 ä¸ªå­—ç¬¦ã€‚
    - `icon -> str`ï¼šAgent åº”ç”¨çš„å›¾æ ‡ URL åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `description -> str`ï¼šå¯é€‰å‚æ•°ï¼ŒAgent åº”ç”¨çš„æè¿°ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸è¶…è¿‡ 800 ä¸ªå­—ç¬¦ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/apps/46db30d1-3199-4e79-a0cd-abf12fa6858f
  
  {
  	"name": "LLMåº”ç”¨äº§å“ç»ç†",
  	"icon": "https://cdn.imooc.com/2024/05/14/218e5217-ab10-4634-9681-022867955f1b.png",
  	"description": "ä¸€ä¸ªèƒ½å¸®ä½ è§£ç­”å…³äºLLMåº”ç”¨äº§å“å¼€å‘çš„Agentæ™ºèƒ½ä½“ã€‚"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": "",
      "message": "ä¿®æ”¹Agentæ™ºèƒ½ä½“åº”ç”¨æˆåŠŸ"
  }
  ```

### 1.7 è·å–ç‰¹å®šåº”ç”¨çš„è‰ç¨¿é…ç½®ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºè·å–æŒ‡å®šåº”ç”¨çš„é…ç½®ä¿¡æ¯ï¼Œå¹¶ä¸”æ°¸è¿œåªè·å–è‰ç¨¿é…ç½®ï¼Œåœ¨åˆ›å»ºåº”ç”¨çš„æ—¶å€™ä¼šåŒæ­¥åˆ›å»ºè‰ç¨¿ä¿¡æ¯ï¼Œå¹¶ä¸”åœ¨åº”ç”¨å‘å¸ƒäº¦æˆ–è€…æ›´æ–°çš„æ—¶å€™ï¼Œå‡ä¼šåŒæ­¥é…ç½®ä¿¡æ¯åˆ°è‰ç¨¿é…ç½®ä¸­ï¼Œå¹¶ä¸”æ¯æ¬¡è·å–è‰ç¨¿é…ç½®çš„æ—¶å€™ï¼Œéƒ½ä¼šæ£€æµ‹å…³è”çš„ `çŸ¥è¯†åº“`ã€`å·¥å…·`ã€`å·¥ä½œæµ` æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¼šæ¸…é™¤å¯¹åº”æ•°æ®åè¿”å›ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/apps/:app_id/draft-app-config`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œåº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šåº”ç”¨é…ç½® idï¼Œç±»å‹ä¸º uuidã€‚
    - `model_config -> dict`ï¼šå¤§è¯­è¨€æ¨¡å‹é…ç½®ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œå­˜å‚¨äº† LLM ç›¸å…³çš„é…ç½®ä¿¡æ¯ã€‚
      - `provider -> str`ï¼šæ¨¡å‹æä¾›è€…åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ `openai`ã€`moonshot`ï¼Œåç«¯ä¼šæ ¹æ®ä¸åŒçš„æä¾›å•†åå­—è·å–ä¸åŒçš„æœåŠ¡ã€‚
      - `model ->str`ï¼šæ¨¡å‹åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ `gpt-4o-mini` ç­‰ã€‚
      - `parameters -> dict`ï¼šå¤§æ¨¡å‹è¿è¡Œå‚æ•°ä¿¡æ¯ï¼Œæ¯ä¸ª LLM å‡æœ‰å·®å¼‚ï¼Œä¸€èˆ¬éƒ½æºå¸¦ `temperature`ã€`top_p`ã€`presence_penalty`ã€`frequency_penalty`ã€`max_tokens` ç­‰å†…å®¹ã€‚
    - `dialog_round -> int`ï¼šæºå¸¦ä¸Šä¸‹ä¸Šä¸‹æ–‡è½®æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œæœ€å°ä¸º 0ï¼Œæœ€å¤§ä¸º 100ï¼Œè®¾ç½®è¯¥æ•°å€¼åï¼Œåç«¯ä¼šåŒæ—¶è®¡ç®—ä¸åŒ LLM çš„ä¸Šä¸‹æ–‡é•¿åº¦è¿›è¡Œå–èˆã€‚
    - `preset_prompt -> str`ï¼šäººè®¾ä¸å›å¤é€»è¾‘é¢„è®¾ promptï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `tools -> list[dict]`ï¼šåº”ç”¨ç»‘å®šçš„å·¥å…·åˆ—è¡¨ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ã€‚
      - `type -> str`ï¼šå…³è”å·¥å…·çš„ç±»å‹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå€¼å¯èƒ½ä¸º `builtin_tool(å†…ç½®å·¥å…·)` æˆ–è€… `api_tool(APIå·¥å…·)`ã€‚
      - `provider -> dict`ï¼šå·¥å…·æä¾›è€…ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
        - `id -> uuid/str`ï¼šæä¾›è€…æ ‡è¯†ï¼Œå½“ç±»å‹ä¸ºå†…ç½®å·¥å…·æ—¶ï¼Œid ä¸ºåå­—ï¼Œå½“ä¸º API å·¥å…·æ—¶ï¼Œid ä¸º uuid æ ‡è¯†ã€‚
        - `name -> str`ï¼šæä¾›è€…åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
        - `label -> str`ï¼šæä¾›è€…æ ‡ç­¾ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå¦‚æœä¸º API å·¥å…·ï¼Œåˆ™ label ä¸º nameã€‚
        - `icon -> str`ï¼šæä¾›è€…å¯¹åº”çš„å›¾æ ‡ URL åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
        - `description -> str`ï¼šæä¾›è€…æè¿°ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²
      - `tool -> dict`ï¼šå·¥å…·ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
        - `id -> uuid`ï¼šå·¥å…· uuidï¼Œå½“ç±»å‹ä¸ºå†…ç½®å·¥å…·æ—¶ï¼Œid ä¸ºå·¥å…·åå­—ï¼Œå½“ä¸º API å·¥å…·æ—¶ï¼Œid ä¸º uuid æ ‡è¯†ã€‚
        - `name -> str`ï¼šå·¥å…·åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
        - `label -> str`ï¼šå·¥å…·çš„æ ‡ç­¾ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå¦‚æœä¸º API å·¥å…·ï¼Œåˆ™ label ä¸º nameã€‚
        - `description -> str`ï¼šå·¥å…·æè¿°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
        - `params -> dict`ï¼šå¯é€‰å‚æ•°ï¼Œå†…ç½®å·¥å…·çš„ `è‡ªå®šä¹‰è®¾ç½®` å‚æ•°ï¼Œç”¨äºåˆå§‹åŒ–å¯¹åº”çš„å·¥å…·ï¼Œå¦‚æœæ²¡æœ‰å‚æ•°æ—¶è¾“å…¥ä¸ºç©ºå­—å…¸å³å¯ã€‚
    - `workflows -> list[dict]`ï¼šåº”ç”¨ç»‘å®šçš„å·¥ä½œæµåˆ—è¡¨ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ã€‚
      - `id -> uuid`ï¼šå…³è”çš„å·¥ä½œæµ idï¼Œç±»å‹ä¸º uuidã€‚
      - `name -> str`ï¼šå…³è”çš„å·¥ä½œæµåå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `icon -> str`ï¼šå…³è”çš„å·¥ä½œæµå›¾æ ‡ URLï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `description -> str`ï¼šå…³è”çš„å·¥ä½œæµæè¿°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `datasets -> list[dict]`ï¼šåº”ç”¨å…³è”çš„çŸ¥è¯†åº“åˆ—è¡¨ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ï¼Œä¸€ä¸ªåº”ç”¨æœ€å¤šä¸èƒ½å…³è”è¶…è¿‡ 5 ä¸ªçŸ¥è¯†åº“ã€‚
      - `id -> uuid`ï¼šå…³è”çš„çŸ¥è¯†åº“ idï¼Œç±»å‹ä¸º uuidã€‚
      - `name -> str`ï¼šå…³è”çŸ¥è¯†åº“çš„åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `icon -> str`ï¼šå…³è”çŸ¥è¯†åº“çš„å›¾æ ‡ URL åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `description -> str`ï¼šå…³è”çš„çŸ¥è¯†åº“æè¿°ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `retrieval_config -> dict`ï¼šæ£€ç´¢é…ç½®ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œè®°å½•æ£€ç´¢ç­–ç•¥ã€æœ€å¤§å¬å›æ•°é‡ã€å¾—åˆ†é˜ˆå€¼ã€‚
      - `retrieval_strategy -> str`ï¼šæ£€ç´¢ç­–ç•¥ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œæ”¯æŒçš„å€¼ä¸º `full_text(å…¨æ–‡/å…³é”®è¯æ£€ç´¢)`ã€`semantic(å‘é‡/ç›¸ä¼¼æ€§æ£€ç´¢)`ã€`hybrid(æ··åˆæ£€ç´¢)`ã€‚
      - `k -> int`ï¼šæœ€å¤§å¬å›æ•°é‡ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œæ•°æ®èŒƒå›´ä¸º 0-10ï¼Œå¿…å¡«å‚æ•°ã€‚
      - `score -> float`ï¼šæœ€å°åŒ¹é…åº¦ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ï¼ŒèŒƒå›´ä» 0-1ï¼Œä¿ç•™ 2 ä½å°æ•°ï¼Œæ•°å­—è¶Šå¤§è¡¨ç¤ºç›¸ä¼¼åº¦è¶Šé«˜ã€‚
    - `long_term_memory -> dict`ï¼šé•¿æœŸè®°å¿†é…ç½®ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
      - `enable -> boolean`ï¼šæ˜¯å¦å¯ç”¨ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œtrue ä»£è¡¨å¯ç”¨ï¼Œfalse ä»£è¡¨æœªå¯ç”¨ã€‚
    - `opening_statement -> str`ï¼šå¯¹è¯å¼€åœºç™½ï¼Œåœ¨åˆæ¬¡å¯¹è¯æ—¶ Agent ä¼šå‘é€çš„æ¶ˆæ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œæœ€å¤§é•¿åº¦ä¸è¶…è¿‡ 2000ã€‚
    - `opening_questions -> list[str]`ï¼šå¯¹è¯å»ºè®®é—®é¢˜åˆ—è¡¨ï¼Œåœ¨åˆæ¬¡å¯¹è¯æ—¶ Agent ä¼šæ¨é€çš„å»ºè®®é—®é¢˜ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œé—®é¢˜æ•°é‡ä¸è¶…è¿‡ 3 ä¸ªã€‚
    - `speech_to_text -> dict`ï¼šè¯­éŸ³è¾“å…¥é…ç½®ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
      - `enable -> boolean`ï¼šæ˜¯å¦å¯ç”¨è¯­éŸ³è¾“å…¥ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œtrue ä»£è¡¨å¯ç”¨ï¼Œfalse ä»£è¡¨æœªå¯ç”¨ã€‚
    - `text_to_speech -> dict`ï¼šè¯­éŸ³è¾“å‡ºé…ç½®ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
      - `enable -> boolean`ï¼šæ˜¯å¦å¯ç”¨è¯­éŸ³è¾“å‡ºï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œtrue ä»£è¡¨å¯ç”¨ï¼Œfalse ä»£è¡¨æœªå¯ç”¨ã€‚
      - `voice -> str`ï¼šè¯­éŸ³è¾“å‡ºéŸ³è‰²ï¼Œæ•°æ®å€¼å‚è€ƒ OpenAI æä¾›çš„ TTS æ¥å£æä¾›çš„éŸ³è‰²é…ç½®ï¼Œä¾‹å¦‚ï¼šecho ç­‰ã€‚
      - `auto_play -> boolean`ï¼šæ˜¯å¦è‡ªåŠ¨æ’­æ”¾ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œtrue ä»£è¡¨è‡ªåŠ¨æ’­æ”¾ï¼Œå½“å€¼ä¸º true æ—¶ï¼ŒWebApp ä¼šåœ¨ç”Ÿæˆå®Œæ¯•æ—¶è‡ªåŠ¨è°ƒç”¨å¹¶è·å–éŸ³é¢‘ä¿¡æ¯éšåè‡ªåŠ¨æ’­æ”¾ï¼ˆæµå¼æ’­æ”¾ï¼‰ã€‚
    - `review_config -> dict`ï¼šå®¡æ ¸é…ç½®ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
      - `enable -> boolean`ï¼šæ˜¯å¦å¯ç”¨å®¡æ ¸ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œtrue ä»£è¡¨å¯ç”¨ï¼Œfalse ä»£è¡¨æœªå¯ç”¨ï¼Œåªæœ‰å½“ `enable` ä¸º True æ—¶ï¼Œ`inputs_config` å’Œ `outputs_config` å¼€å¯æ‰æœ‰æ„ä¹‰ã€‚
      - `keywords -> list[str]`ï¼šå®¡æ ¸å…³é”®è¯åˆ—è¡¨ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæœ€å¤šä¸è¶…è¿‡ 100 ä¸ªå…³é”®è¯ã€‚
      - `inputs_config -> dict`ï¼šè¾“å…¥å®¡æ ¸é…ç½®ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
        - `enable -> boolean`ï¼šæ˜¯å¦å¯ç”¨è¾“å…¥å®¡æ ¸ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œtrue ä»£è¡¨å¯ç”¨ï¼Œfalse ä»£è¡¨æœªå¯ç”¨ã€‚
        - `preset_response -> str`ï¼šè§¦å‘è¾“å…¥æ•æ„Ÿè¯æ—¶çš„é¢„è®¾å›å¤ï¼Œå¯¹äºè¾“å…¥å®¡æ ¸çš„é€»è¾‘ï¼Œå¦‚æœå­˜åœ¨æ•æ„Ÿè¯ï¼Œåˆ™ç›´æ¥ä½¿ç”¨é¢„è®¾å›å¤è¿›è¡Œç›¸åº”ã€‚
      - `outputs_config -> dict`ï¼šè¾“å‡ºå®¡æ ¸é…ç½®ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
        - `enable -> boolean`ï¼šæ˜¯å¦å¯ç”¨è¾“å‡ºå®¡æ ¸ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œtrue ä»£è¡¨å¯ç”¨ï¼Œfalse ä»£è¡¨æœªå¯ç”¨ï¼Œå½“å€¼ä¸º true æ—¶ï¼Œè§¦å‘æ•æ„Ÿè¯æ—¶ï¼Œä¼šä½¿ç”¨ ** ä»£æ›¿ç‰¹å®šçš„æ•æ„Ÿè¯è¿›è¡Œè¾“å‡ºã€‚
    - `updated_at -> int`ï¼šè‰ç¨¿é…ç½®çš„æ›´æ–°æ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ã€‚
    - `created_at -> int`ï¼šè‰ç¨¿é…ç½®çš„åˆ›å»ºæ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/apps/46db30d1-3199-4e79-a0cd-abf12fa6858f/draft-config
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "id": "1550b71a-1444-47ed-a59d-c2f080fbae94",
          "model_config": {
              "provider": "openai",
              "model": "gpt-4o-mini",
              "parameters": {
                  "temperature": 0.5,
                  "top_p": 0.5,
                  "presence_penalty": 0.2,
                  "frequency_penalty": 0.3,
                  "max_tokens": 4500
              }
          },
          "dialog_round": 3,
          "preset_prompt": "ä½ æ˜¯ä¸€ä¸ªæ‹¥æœ‰10å¹´ç»éªŒçš„ç¿»è¯‘å®˜ï¼Œè¯·å¸®åŠ©ç”¨æˆ·è§£å†³é—®é¢˜ã€‚",
          "tools": [],
          "workflows": [],
          "datasets": [
              {
                  "id": "1cbb6449-5463-49a4-b0ef-1b94cdf747d7",
                  "name": "Promptæç¤ºè¯å¤§å…¨",
                  "icon": "https://imooc-llmops-1304251364.cos.ap-guangzhou.myqcloud.com/2024/10/27/67c94d7b-c503-4528-87c4-1810c17689b1.jpg"
              },
              {
                  "id": "f3f28f75-8e60-4eba-b6df-4d1b390bbd89",
                  "name": "æ…•è¯¾LLMOpsé¡¹ç›®",
                  "icon": "https://imooc-llmops-1304251364.cos.ap-guangzhou.myqcloud.com/2024/09/29/9f5e42d4-e184-4e2c-88f2-0ef843749e3f.jpg"
              }
          ],
          "retrieval_config": {
              "retrieval_strategy": "semantic",
              "k": 5,
              "score": 0.5
          },
          "long_term_memory": {
              "enable": true
          },
          "opening_statement": "å˜¿ï¼ğŸ‰ æˆ‘æ˜¯ä½ çš„å¥½æœ‹å‹ï¼ŒGauthmath å¯¼å¸ˆæœºå™¨äººã€‚",
          "opening_questions": [
              "ä½ èƒ½è§£é‡Šä¸€ä¸‹äºŒæ¬¡æ–¹ç¨‹çš„æ¦‚å¿µå—ï¼Ÿ",
              "å¦‚ä½•è§£çº¿æ€§æ–¹ç¨‹ç»„ï¼Ÿ",
              "æ±‚è§£x^2-4x+4=0"
          ],
          "speech_to_text": {
              "enable": true
          },
          "text_to_speech": {
              "enable": true,
              "voice": "echo",
              "auto_play": false
          },
          "review_config": {
              "enable": true,
              "keywords": ["æ•æ„Ÿè¯", "æ…•è¯¾ç½‘"],
              "inputs_config": {
                  "enable": true,
                  "preset_response": "å¾ˆæŠ±æ­‰ï¼Œè¯¥é—®é¢˜æ— æ³•å›å¤"
              },
              "outputs_config": {
                  "enable": true
              }
          },
          "updated_at": 1714053834,
          "created_at": 1714053834
      },
      "message": ""
  }
  ```

### 1.8 æ›´æ–°åº”ç”¨è‰ç¨¿é…ç½®ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šæ›´æ–°åº”ç”¨çš„è‰ç¨¿é…ç½®ä¿¡æ¯ï¼Œåœ¨å‰ç«¯ UI é¡µé¢ä¸­ï¼Œå½“æ•°æ®å‘ç”Ÿæ›´æ–°çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨è¯¥ API æ¥å£å°†è‰ç¨¿ä¿¡æ¯åŒæ­¥åˆ°å¯¹åº” Agent åº”ç”¨çš„è‰ç¨¿é…ç½®ä¸­ï¼ŒåŒæ—¶è¯¥æ¥å£æ˜¯ `å¢é‡æ›´æ–°`ï¼Œå¯ä»¥åªä¼ é€’éœ€è¦æ›´æ–°çš„å­—æ®µä¿¡æ¯ï¼Œä¾‹å¦‚ `model_config`ã€`preset_prompt` ç­‰å•ç‹¬åŠŸèƒ½çš„é…ç½®ä¿¡æ¯ï¼Œåç«¯åªä¼šæ›´æ–°ä¼ é€’çš„é…ç½®ä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/apps/:app_id/draft-app-config`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦ä¿®æ”¹é…ç½®çš„åº”ç”¨ idï¼Œæ ¼å¼ä¸º uuidã€‚
    - `model_config -> dict`ï¼šå¯é€‰å‚æ•°ï¼ŒAgent åº”ç”¨ä½¿ç”¨çš„ LLM å‚æ•°ä¿¡æ¯ï¼Œæ ¼å¼ä¸ºå­—å…¸ï¼Œå¦‚æœä¼ é€’äº†åˆ™ä¼šè¿›è¡Œæ ¡éªŒã€‚
      - `provider -> str`ï¼šæ¨¡å‹æä¾›è€…åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š`openai`ã€`moonshot` ç­‰ï¼Œå¦‚æœä¼ é€’äº†ä¸å­˜åœ¨çš„æä¾›è€…åå­—ï¼Œåç«¯ä¼šæŠ›å‡ºé”™è¯¯ä¿¡æ¯ã€‚
      - `model -> str`ï¼šå¯¹åº”æ¨¡å‹æä¾›è€…ä¸‹çš„æ¨¡å‹åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š`gpt-4o-mini`ã€`moonshot-8k` ç­‰ï¼Œåç«¯ä¼šæ ¹æ® æä¾›è€…åå­—ä¸æ¨¡å‹åå­—è¿›è¡Œæ ¡éªŒã€‚
      - `parameters -> dict`ï¼šå¤§æ¨¡å‹è¿è¡Œå‚æ•°ä¿¡æ¯ï¼Œæ¯ä¸ª LLM å‡æœ‰å·®å¼‚ï¼Œä¸€èˆ¬éƒ½æºå¸¦ `temperature`ã€`top_p`ã€`presence_penalty`ã€`frequency_penalty`ã€`max_tokens` ç­‰å†…å®¹ã€‚
    - `dialog_round -> int`ï¼šå¯é€‰å‚æ•°ï¼Œæºå¸¦ä¸Šä¸‹ä¸Šä¸‹æ–‡è½®æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œæœ€å°ä¸º 0ï¼Œæœ€å¤§ä¸º 100ï¼Œè®¾ç½®è¯¥æ•°å€¼åï¼Œåç«¯ä¼šåŒæ—¶è®¡ç®—ä¸åŒ LLM çš„ä¸Šä¸‹æ–‡é•¿åº¦è¿›è¡Œå–èˆã€‚
    - `preset_prompt -> str`ï¼šå¯é€‰å‚æ•°ï¼Œäººè®¾ä¸å›å¤é€»è¾‘é¢„è®¾ promptï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œé¢„è®¾ prompt çš„é•¿åº¦ä¸èƒ½è¶…è¿‡ 2000 ä¸ªå­—ç¬¦ã€‚
    - `tools -> list[dict]`ï¼šå¯é€‰å‚æ•°ï¼Œåº”ç”¨ç»‘å®šçš„å·¥å…·åˆ—è¡¨ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œå¦‚æœä¼ é€’äº†åˆ™ä¼šè¿›è¡Œæ ¡éªŒã€‚
      - `type -> str`ï¼šå·¥å…·ç±»å‹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œæ”¯æŒä¸¤ç§å€¼ï¼š`builtin_tool(å†…ç½®å·¥å…·)`ã€`api_tool(APIå·¥å…·)`ã€‚
      - `provider_id -> str/uuid`ï¼šæä¾›è€… idï¼Œå½“ä¸ºå†…ç½®å·¥å…·æ—¶ï¼Œæä¾›è€… id ä¸º `provider_name`ï¼Œå¦åˆ™ä¸º `id`ã€‚
      - `tool_id -> str/uuid`ï¼šå·¥å…· idï¼Œå½“ä¸ºå†…ç½®å·¥å…·æ—¶ï¼Œå·¥å…· id ä¸º `tool_name`ï¼Œå¦åˆ™ä¸º `id`ã€‚
      - `params -> dict`ï¼šå†…ç½®å·¥å…· `è‡ªå®šä¹‰å‚æ•°`ï¼Œå¦‚æœä¸º `APIå·¥å…·` æˆ–è€…æ— éœ€è®¾ç½®è‡ªå®šä¹‰å‚æ•°ï¼Œåˆ™å€¼è®¾ç½®ä¸ºç©ºå­—å…¸ {}ã€‚
    - `workflows -> list[uuid]`ï¼šå¯é€‰å‚æ•°ï¼Œåº”ç”¨ç»‘å®šçš„å·¥ä½œæµ ID åˆ—è¡¨ï¼Œç±»å‹ä¸º uuid åˆ—è¡¨ï¼Œå¦‚æœä¼ é€’äº†åˆ™ä¼šè¿›è¡Œæ ¡éªŒã€‚
    - `datasets -> list[uuid]`ï¼šå¯é€‰å‚æ•°ï¼Œåº”ç”¨ç»‘å®šçš„çŸ¥è¯†åº“ ID åˆ—è¡¨ï¼Œç±»å‹ä¸º uuid åˆ—è¡¨ï¼Œå¦‚æœä¼ é€’äº†åˆ™ä¼šè¿›è¡Œæ ¡éªŒã€‚
    - `retrieval_config -> dict`ï¼šå¯é€‰å‚æ•°ï¼Œæ£€ç´¢è®¾ç½®ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
      - `retrieval_strategy -> str`ï¼šæ£€ç´¢ç­–ç•¥ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œæ”¯æŒçš„å€¼ä¸º `full_text(å…¨æ–‡/å…³é”®è¯æ£€ç´¢)`ã€`semantic(å‘é‡/ç›¸ä¼¼æ€§æ£€ç´¢)`ã€`hybrid(æ··åˆæ£€ç´¢)`ã€‚
      - `k -> int`ï¼šæœ€å¤§å¬å›æ•°é‡ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œæ•°æ®èŒƒå›´ä¸º 0-10ï¼Œå¿…å¡«å‚æ•°ã€‚
      - `score -> float`ï¼šæœ€å°åŒ¹é…åº¦ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ï¼ŒèŒƒå›´ä» 0-1ï¼Œä¿ç•™ 2 ä½å°æ•°ï¼Œæ•°å­—è¶Šå¤§è¡¨ç¤ºç›¸ä¼¼åº¦è¶Šé«˜ã€‚
    - `long_term_memory -> dict`ï¼šé•¿æœŸè®°å¿†é…ç½®ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
      - `enable -> boolean`ï¼šæ˜¯å¦å¯ç”¨ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œtrue ä»£è¡¨å¯ç”¨ï¼Œfalse ä»£è¡¨æœªå¯ç”¨ã€‚
    - `opening_statement -> str`ï¼šå¯¹è¯å¼€åœºç™½ï¼Œåœ¨åˆæ¬¡å¯¹è¯æ—¶ Agent ä¼šå‘é€çš„æ¶ˆæ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œæœ€å¤§é•¿åº¦ä¸è¶…è¿‡ 2000ã€‚
    - `opening_questions -> list[str]`ï¼šå¯¹è¯å»ºè®®é—®é¢˜åˆ—è¡¨ï¼Œåœ¨åˆæ¬¡å¯¹è¯æ—¶ Agent ä¼šæ¨é€çš„å»ºè®®é—®é¢˜ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œé—®é¢˜æ•°é‡ä¸è¶…è¿‡ 3 ä¸ªã€‚
    - `speech_to_text -> dict`ï¼šè¯­éŸ³è¾“å…¥é…ç½®ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
      - `enable -> boolean`ï¼šæ˜¯å¦å¯ç”¨è¯­éŸ³è¾“å…¥ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œtrue ä»£è¡¨å¯ç”¨ï¼Œfalse ä»£è¡¨æœªå¯ç”¨ã€‚
    - `text_to_speech -> dict`ï¼šè¯­éŸ³è¾“å‡ºé…ç½®ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
      - `enable -> boolean`ï¼šæ˜¯å¦å¯ç”¨è¯­éŸ³è¾“å‡ºï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œtrue ä»£è¡¨å¯ç”¨ï¼Œfalse ä»£è¡¨æœªå¯ç”¨ã€‚
      - `voice -> str`ï¼šè¯­éŸ³è¾“å‡ºéŸ³è‰²ï¼Œæ•°æ®å€¼å‚è€ƒ OpenAI æä¾›çš„ TTS æ¥å£æä¾›çš„éŸ³è‰²é…ç½®ï¼Œä¾‹å¦‚ï¼šecho ç­‰ã€‚
      - `auto_play -> boolean`ï¼šæ˜¯å¦è‡ªåŠ¨æ’­æ”¾ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œtrue ä»£è¡¨è‡ªåŠ¨æ’­æ”¾ï¼Œå½“å€¼ä¸º true æ—¶ï¼ŒWebApp ä¼šåœ¨ç”Ÿæˆå®Œæ¯•æ—¶è‡ªåŠ¨è°ƒç”¨å¹¶è·å–éŸ³é¢‘ä¿¡æ¯éšåè‡ªåŠ¨æ’­æ”¾ï¼ˆæµå¼æ’­æ”¾ï¼‰ã€‚
    - `review_config -> dict`ï¼šå®¡æ ¸é…ç½®ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
      - `enable -> boolean`ï¼šæ˜¯å¦å¯ç”¨å®¡æ ¸ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œtrue ä»£è¡¨å¯ç”¨ï¼Œfalse ä»£è¡¨æœªå¯ç”¨ï¼Œåªæœ‰å½“ `enable` ä¸º True æ—¶ï¼Œ`inputs_config` å’Œ `outputs_config` å¼€å¯æ‰æœ‰æ„ä¹‰ã€‚
      - `keywords -> list[str]`ï¼šå®¡æ ¸å…³é”®è¯åˆ—è¡¨ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæœ€å¤šä¸è¶…è¿‡ 100 ä¸ªå…³é”®è¯ã€‚
      - `inputs_config -> dict`ï¼šè¾“å…¥å®¡æ ¸é…ç½®ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
        - `enable -> boolean`ï¼šæ˜¯å¦å¯ç”¨è¾“å…¥å®¡æ ¸ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œtrue ä»£è¡¨å¯ç”¨ï¼Œfalse ä»£è¡¨æœªå¯ç”¨ã€‚
        - `preset_response -> str`ï¼šè§¦å‘è¾“å…¥æ•æ„Ÿè¯æ—¶çš„é¢„è®¾å›å¤ï¼Œå¯¹äºè¾“å…¥å®¡æ ¸çš„é€»è¾‘ï¼Œå¦‚æœå­˜åœ¨æ•æ„Ÿè¯ï¼Œåˆ™ç›´æ¥ä½¿ç”¨é¢„è®¾å›å¤è¿›è¡Œç›¸åº”ã€‚
      - `outputs_config -> dict`ï¼šè¾“å‡ºå®¡æ ¸é…ç½®ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
        - `enable -> boolean`ï¼šæ˜¯å¦å¯ç”¨è¾“å‡ºå®¡æ ¸ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œtrue ä»£è¡¨å¯ç”¨ï¼Œfalse ä»£è¡¨æœªå¯ç”¨ï¼Œå½“å€¼ä¸º true æ—¶ï¼Œè§¦å‘æ•æ„Ÿè¯æ—¶ï¼Œä¼šä½¿ç”¨ ** ä»£æ›¿ç‰¹å®šçš„æ•æ„Ÿè¯è¿›è¡Œè¾“å‡ºã€‚
  
- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  {
      "model_config": {
          "provider": "openai",
          "model": "gpt-4o-mini",
          "parameters": {
              "temperature": 0.5,
              "top_p": 0.5,
              "presence_penalty": 0.2,
              "frequency_penalty": 0.3,
              "max_tokens": 4500
          }
      },
      "dialog_round": 3,
      "preset_prompt": "ä½ æ˜¯ä¸€ä¸ªæ‹¥æœ‰10å¹´ç»éªŒçš„ç¿»è¯‘å®˜ï¼Œè¯·å¸®åŠ©ç”¨æˆ·è§£å†³é—®é¢˜ã€‚",
      "tools": [
          {
              "type": "builtin_tool",
              "provider_id": "google",
              "tool_id": "google_serper"
          },
          {
              "type": "api_tool",
              "provider_id": "5e7834dc-bbca-4ee5-9591-8f297f5acded",
              "tool_id": "e1baf52a-1be2-4b93-ad62-6fad72f1ec37"
          }
      ],
      "workflows": [
          "5e7834dc-bbca-4ee5-9591-8f297f5acded",
          "9f5e42d4-e184-4e2c-88f2-0ef843749e3f"
      ],
      "datasets": [
          "1cbb6449-5463-49a4-b0ef-1b94cdf747d7",
          "f3f28f75-8e60-4eba-b6df-4d1b390bbd89"
      ],
      "retrieval_config": {
          "retrieval_strategy": "semantic",
          "k": 5,
          "score": 0.5
      },
      "long_term_memory": {
          "enable": true
      },
      "opening_statement": "å˜¿ï¼ğŸ‰ æˆ‘æ˜¯ä½ çš„å¥½æœ‹å‹ï¼ŒGauthmath å¯¼å¸ˆæœºå™¨äººã€‚",
      "opening_questions": [
          "ä½ èƒ½è§£é‡Šä¸€ä¸‹äºŒæ¬¡æ–¹ç¨‹çš„æ¦‚å¿µå—ï¼Ÿ",
          "å¦‚ä½•è§£çº¿æ€§æ–¹ç¨‹ç»„ï¼Ÿ",
          "æ±‚è§£x^2-4x+4=0"
      ],
      "speech_to_text": {
          "enable": true
      },
      "text_to_speech": {
          "enable": false,
          "voice": "echo",
          "auto_play": false
      },
      "review_config": {
          "enable": true,
          "keywords": ["æ•æ„Ÿè¯", "æ…•è¯¾ç½‘"],
          "inputs_config": {
              "enable": true,
              "preset_response": "å¾ˆæŠ±æ­‰ï¼Œè¯¥é—®é¢˜æ— æ³•å›å¤"
          },
          "outputs_config": {
              "enable": true
          }
      },
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "æ›´æ–°AIåº”ç”¨é…ç½®æˆåŠŸ"
  }
  ```

### 1.9 è·å–åº”ç”¨è°ƒè¯•é•¿è®°å¿†

- **æ¥å£è¯´æ˜**ï¼šç”¨äºè·å–æŒ‡å®šåº”ç”¨çš„è°ƒè¯•é•¿è®°å¿†å†…å®¹ï¼Œå¦‚æœè¯¥åº”ç”¨å¹¶æ²¡æœ‰å¼€å¯é•¿è®°å¿†ï¼Œåˆ™ä¼šæŠ›å‡ºé”™è¯¯ä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/apps/:app_id/summary`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> str`ï¼šéœ€è¦è·å–é•¿è®°å¿†çš„åº”ç”¨ idã€‚
  - å“åº”å‚æ•°ï¼š
    - `summary -> str`ï¼šè¯¥åº”ç”¨æœ€æ–°è°ƒè¯•ä¼šè¯çš„é•¿è®°å¿†å†…å®¹ã€‚

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "summary": "äººç±»è‡ªæˆ‘ä»‹ç»ä¸ºæ…•å°è¯¾ï¼Œå¹¶è¦æ±‚äººå·¥æ™ºèƒ½è§£é‡ŠLLMï¼ˆå¤§å‹è¯­è¨€æ¨¡å‹ï¼‰çš„æ¦‚å¿µã€‚äººå·¥æ™ºèƒ½å°†LLMæè¿°ä¸ºä¸€ç§åŸºäºæ·±åº¦å­¦ä¹ çš„æ¨¡å‹ï¼Œé€šå¸¸å»ºç«‹åœ¨Transformeræ¶æ„ä¸Šï¼Œç”¨äºè‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ã€‚LLMç»å†äº†ä¸€ä¸ªé¢„è®­ç»ƒé˜¶æ®µï¼Œåœ¨é‚£é‡Œä»–ä»¬ä»å¤§é‡çš„æ–‡æœ¬æ•°æ®ä¸­å­¦ä¹ è¯­è¨€ç»“æ„ï¼Œæ¯”å¦‚ç»´åŸºç™¾ç§‘çš„æ–‡ç« å’Œä¹¦ç±ã€‚å®ƒä»¬åˆ©ç”¨è‡ªæˆ‘æ³¨æ„æœºåˆ¶æ¥æœ‰æ•ˆåœ°å¤„ç†é•¿ç¨‹ä¾èµ–å…³ç³»ã€‚ç»è¿‡é¢„è®­ç»ƒåï¼ŒLLMå¯ä»¥é’ˆå¯¹ç‰¹å®šçš„åº”ç”¨ç¨‹åºè¿›è¡Œå¾®è°ƒï¼Œä½¿å…¶åŠŸèƒ½é€‚åº”æ–‡æœ¬ç”Ÿæˆã€ç†è§£å’Œåˆ†ç±»ç­‰ä»»åŠ¡ã€‚LLMç”±äºå…¶å¤šåŠŸèƒ½æ€§å’Œå¼ºå¤§çš„è¯­è¨€ç†è§£å’Œç”Ÿæˆèƒ½åŠ›ï¼Œè¢«å¹¿æ³›åº”ç”¨äºè™šæ‹ŸåŠ©ç†ã€ç¿»è¯‘ã€æƒ…ç»ªåˆ†æã€åŒ»ç–—ä¿å¥ã€é‡‘èç­‰é¢†åŸŸï¼Œä»£è¡¨äº†è‡ªç„¶è¯­è¨€å¤„ç†çš„å‰æ²¿æŠ€æœ¯ã€‚"
      },
      "message": ""
  }
  ```

### 1.10 æ›´æ–°åº”ç”¨è°ƒè¯•é•¿è®°å¿†

- **æ¥å£è¯´æ˜**ï¼šç”¨äºæ›´æ–°å¯¹åº”åº”ç”¨çš„è°ƒè¯•é•¿è®°å¿†å†…å®¹ï¼Œå¦‚æœåº”ç”¨æ²¡æœ‰å¼€å¯é•¿è®°å¿†åŠŸèƒ½ï¼Œåˆ™è°ƒç”¨æ¥å£ä¼šå‘ç”ŸæŠ¥é”™ï¼Œå¦‚æœå½“å‰åº”ç”¨æ²¡æœ‰ä¼šè¯è®°å½•æ—¶ï¼Œä¼šå…ˆåˆ›å»ºä¸€ä¸ªä¼šè¯ï¼Œå¹¶æ›´æ–°å¯¹åº”çš„é•¿è®°å¿†ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/apps/:app_id/summary`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> str`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦æ›´æ–°é•¿è®°å¿†çš„åº”ç”¨ idã€‚
    - `summary -> str`ï¼šéœ€è¦æ›´æ–°çš„é•¿è®°å¿†å†…å®¹ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  {
      "summary": "äººç±»ä»‹ç»è‡ªå·±å«æ…•å°è¯¾ï¼Œå–œæ¬¢æ‰“ç¯®çƒã€‚"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "æ›´æ–°AIåº”ç”¨é•¿è®°å¿†æˆåŠŸ"
  }
  ```

### 1.11 åº”ç”¨è°ƒè¯•å¯¹è¯

- **æ¥å£è¯´æ˜**ï¼šç”¨äºåœ¨ç¼–æ’ AI åº”ç”¨æ—¶è¿›è¡Œ debug è°ƒè¯•ï¼Œåœ¨åç«¯ä¼šæ ¹æ®è‰ç¨¿é…ç½®åˆ›å»ºç‰¹å®šçš„ Agent ä»è€Œæ‰§è¡Œå¯¹åº”çš„è°ƒè¯•ä¿¡æ¯ï¼Œè¯¥æ¥å£ä¸º `æµå¼äº‹ä»¶å“åº”`ï¼Œä¼šé€ä¸ªè¾“å‡º Agent åœ¨è¿è¡Œè¿‡ç¨‹ä¸­è°ƒç”¨çš„æ­¥éª¤ï¼Œæ¶µç›–ï¼šé•¿æœŸè®°å¿†å¬å›ã€çŸ¥è¯†åº“æ£€ç´¢ã€æ™ºèƒ½ä½“æ¨ç†/è§‚å¯Ÿã€å·¥å…·è°ƒç”¨ã€LLMæ¶ˆæ¯ç”Ÿæˆã€å®¡æ ¸ã€ç»“æŸå“åº”ç­‰ï¼Œè¯¥æ¥å£å¹¶éæœ€ç»ˆç‰ˆï¼Œä¼šéšç€åç»­å¤š LLM ä»¥åŠå¤šæ¨¡æ€ LLM çš„æ¥å…¥è¿›è¡Œä¸æ–­æ‰©å±•ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/apps/:app_id/conversations`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> str`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦è°ƒè¯•çš„ AI åº”ç”¨ idï¼Œæ ¼å¼ä¸º uuidã€‚
    - `query -> str`ï¼šç”¨æˆ·å‘èµ·çš„æé—®ä¿¡æ¯ã€‚
    - `image_urls -> list[str]`ï¼šå¯é€‰å‚æ•°ï¼Œç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ URL åœ°å€åˆ—è¡¨ï¼ˆè¯¥åœ°å€ä¸ºå…¬å…±ç½‘ç»œèƒ½è®¿é—®çš„ URL é“¾æ¥ï¼‰ï¼Œç±»å‹ä¸º URL å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œå¦‚æœç”¨æˆ·é€‰æ‹©äº†æ”¯æŒå¤šæ¨¡æ€è¾“å…¥çš„ LLMï¼Œåˆ™å…è®¸ä¼ é€’è¯¥å‚æ•°ï¼Œå¦åˆ™è¯¥å‚æ•°ä¼šåœ¨åç«¯è¢«é—å¼ƒï¼Œæœ€å¤šä¸Šä¼ 5å¼ å›¾ç‰‡ã€‚
  - æµå¼äº‹ä»¶å‚æ•°ï¼š
    - `event -> str`ï¼šæµå¼äº‹ä»¶çš„åç§°ï¼Œä¾‹å¦‚ï¼š`agent_thought(Agentæ¨ç†)`ã€`agent_message(Agentæ¶ˆæ¯)`ã€`agent_action(Agentè¡ŒåŠ¨/æ‰§è¡Œå·¥å…·)`ã€`dataset_retrieval(çŸ¥è¯†åº“æ£€ç´¢)`ã€`done(æµå¼äº‹ä»¶åœæ­¢)` ç­‰ã€‚
    - `data -> dict`ï¼šæµå¼äº‹ä»¶æ•°æ®ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œè®°å½•å½“å‰ä¼ é€’çš„äº‹ä»¶çš„ç›¸å…³ä¿¡æ¯ã€‚
      - `id -> uuid`ï¼šå½“å‰è§‚å¯Ÿ/Agent æ­¥éª¤è®°å½•çš„ idï¼Œå¦‚æœä¼ é€’çš„å¤šæ¬¡æµå¼äº‹ä»¶å±äºåŒä¸€ä¸ªæ­¥éª¤åˆ™ id ä¸€è‡´ï¼Œæ ¼å¼ä¸º uuidã€‚
      - `conversation_id -> uuid`ï¼šè¯¥æ¬¡æµå¼äº‹ä»¶/Agent æ­¥éª¤å½’å±çš„ä¼šè¯ idï¼Œç±»å‹ä¸º uuidã€‚
      - `message_id -> uuid`ï¼šè¯¥æ¬¡æµå¼äº‹ä»¶/Agent æ­¥éª¤å½’å±çš„æ¶ˆæ¯ idï¼Œç±»å‹ä¸º uuidã€‚
      - `task_id -> uuid`ï¼šè¯¥æ¬¡æµå¼äº‹ä»¶å½’å±çš„ä»»åŠ¡ idï¼Œè¯¥å‚æ•°ç”¨äºä¸­æ–­æŒ‡å®šçš„æµå¼äº‹ä»¶ï¼Œå½“æ‰§è¡Œè¯¥å­çº¿ç¨‹çš„æ—¶å€™ï¼Œä¼šåœ¨ç¼“å­˜ä¸­æ·»åŠ å¯¹åº”çš„ keyï¼Œä¸­æ–­æµå¼å“åº”æ—¶ï¼Œä¼šåœ¨ç¼“å­˜ä¸­åˆ é™¤è¯¥ keyï¼Œä»è€Œç»“æŸæ•´ä¸ªæµå¼äº‹ä»¶å“åº”ã€‚
      - `thought -> str`ï¼šAgent åœ¨å½“å‰æµå¼äº‹ä»¶ä¸‹çš„æ¨ç†å†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `observation -> str`ï¼šAgent è§‚å¯Ÿçš„å†…å®¹ï¼Œä¸€èˆ¬æ˜¯å·¥å…·æ‰§è¡Œåçš„ç»“æœã€çŸ¥è¯†åº“çš„æ£€ç´¢ç»“æœï¼Œç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œè¯¥å­—æ®µå¹¶éæœ€ç»ˆå­—æ®µï¼Œåç»­ä¼šéšç€æ’ä»¶åŠŸèƒ½çš„é›†æˆå¢å¤šè¿›è¡Œç›¸åº”çš„è°ƒæ•´ã€‚
      - `answer -> str`ï¼šAgent è¿”å›çš„æ–‡æœ¬ç­”æ¡ˆè¾“å‡ºï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `total_token_count -> int`ï¼šè¯¥æ¬¡æ¨ç† LLM æ¶ˆè€—æ€» Token æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œå¹¶ä¸”ä¸ºäº†æå‡æ€§èƒ½ï¼Œé™ä½å»¶è¿Ÿï¼ŒLLM æ¶ˆæ¯æ¶ˆè€—çš„æ€» Token ä¼šåœ¨æœ€åä¸€æ¡æ¶ˆæ¯ä¸­ç»Ÿä¸€è¿›è¡Œæ·»åŠ ã€‚
      - `total_price -> float`ï¼šè¯¥æ¬¡æ¨ç† LLM æ¶ˆè€—çš„æ€»æˆæœ¬ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ï¼Œå•ä½ä¸ºå…ƒï¼Œå¦‚æœæ²¡æœ‰æ¶ˆè€—åˆ™æ¶ˆè€—æˆæœ¬ä¸º 0ï¼Œå¹¶ä¸”ä¸ºäº†æå‡æ€§èƒ½ï¼Œé™ä½å»¶è¿Ÿï¼ŒLLM æ¶ˆæ¯æ¶ˆè€—çš„æ€»æˆæœ¬ä¼šåœ¨æœ€åä¸€æ¡æ¶ˆæ¯ä¸­ç»Ÿä¸€è¿›è¡Œæ·»åŠ ã€‚
      - `latency -> float`ï¼šæ­¥éª¤çš„æ‰§è¡Œè€—æ—¶ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ã€‚
      - `created_at -> int`ï¼šæ¶ˆæ¯è®°å½•åˆ›å»ºçš„æ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/apps/1550b71a-1444-47ed-a59d-c2f080fbae94/conversations
  
  {
      "query": "èƒ½è¯¦ç»†è®²è§£ä¸‹LLMæ˜¯ä»€ä¹ˆå—ï¼Ÿ"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  event: agent_message
  data: {"id": "1550b71a-1444-47ed-a59d-c2f080fbae94", "conversation_id": "2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8", "task_id": "5e7834dc-bbca-4ee5-9591-8f297f5acded", "thought": "", "observation": "", "answer":"LLM å³ Large Language Modelï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼Œæ˜¯ä¸€ç§åŸºäºæ·±åº¦å­¦ä¹ çš„è‡ªç„¶è¯­è¨€å¤„ç†æ¨¡å‹ï¼Œå…·æœ‰å¾ˆé«˜çš„è¯­è¨€ç†è§£å’Œç”Ÿæˆèƒ½åŠ›ï¼Œèƒ½å¤Ÿå¤„ç†å„å¼å„æ ·çš„è‡ªç„¶è¯­è¨€ä»»åŠ¡ï¼Œä¾‹å¦‚æ–‡æœ¬ç”Ÿæˆã€é—®ç­”ã€ç¿»è¯‘ã€æ‘˜è¦ç­‰ã€‚å®ƒé€šè¿‡åœ¨å¤§é‡çš„æ–‡æœ¬æ•°æ®ä¸Šè¿›è¡Œè®­ç»ƒï¼Œå­¦ä¹ åˆ°è¯­è¨€çš„æ¨¡å¼ã€ç»“æ„å’Œè¯­ä¹‰çŸ¥è¯†ã€‚", "latency":8541, "created_at":1714053834}
  ```

### 1.12 åœæ­¢æŸæ¬¡åº”ç”¨è°ƒè¯•å¯¹è¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºåœæ­¢æŸæ¬¡åº”ç”¨è°ƒè¯•å¯¹è¯ï¼Œå¹¶ä¸­æ–­æµå¼äº‹ä»¶å“åº”ï¼Œè¯¥æ¥å£ä¼ é€’çš„å‚æ•°ä¸ºä»»åŠ¡ idï¼Œåç«¯ä¼šæ¥æ”¶ä¼ é€’çš„ task_idï¼Œå¹¶åœ¨ç¼“å­˜ä¸­åˆ é™¤å¯¹åº”çš„è®°å½•ï¼Œä»è€Œä¸­æ–­é˜Ÿåˆ—æ•°æ®çš„è¯»å–ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/apps/:app_id/conversations/tasks/:task_id/stop`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šéœ€è¦åœæ­¢è°ƒè¯•ä¼šè¯çš„åº”ç”¨ idï¼Œæ ¼å¼ä¸º uuidã€‚
    - `task_id -> uuid`ï¼šéœ€è¦åœæ­¢è°ƒè¯•ä¼šè¯çš„ä»»åŠ¡ idï¼Œæ ¼å¼ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/apps/1550b71a-1444-47ed-a59d-c2f080fbae94/conversations/tasks/2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "scuccess",
      "data": {},
      "message": "åœæ­¢åº”ç”¨ä¼šè¯è°ƒè¯•æˆåŠŸ"
  }
  ```

### 1.13 è·å–åº”ç”¨çš„è°ƒè¯•ä¼šè¯æ¶ˆæ¯åˆ—è¡¨

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºè·å–æŒ‡å®šåº”ç”¨çš„è°ƒè¯•ä¼šè¯è®°å½•ï¼Œè¯¥æ¥å£æ”¯æŒåˆ†é¡µï¼Œæ•°æ®ä¼šæŒ‰ç…§åˆ›å»ºæ—¶é—´è¿›è¡Œå€’åºã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/apps/:app_id/conversations/messages`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šéœ€è¦è·å–çš„åº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚
    - `created_at -> int`ï¼šå¯é€‰å‚æ•°ï¼Œåˆ†é¡µçš„èµ·ç‚¹æ—¶é—´æˆ³æ¸¸æ ‡ï¼Œå¦‚æœæ²¡æœ‰ä¼ é€’åˆ™ä»¥æœ€æ–°æ¶ˆæ¯æ—¶é—´ä¸ºå‡†ï¼Œé¿å…æ•°æ®é‡å¤åŠ è½½ï¼Œå¦‚æœä¼ é€’äº†è¯¥æ•°æ®ï¼Œä¼šä½¿ç”¨è¯¥æ•°æ®çš„æ—¶é—´ä½œä¸ºæ¸¸æ ‡èµ·ç‚¹è¿›è¡Œæ•°æ®æ£€ç´¢ã€‚
    - `current_page -> int`ï¼šå¯é€‰å‚æ•°ï¼Œä»£è¡¨å½“å‰é¡µæ•°ï¼Œé»˜è®¤ä¸º 1ã€‚
    - `page_size -> int`ï¼šå¯é€‰å‚æ•°ï¼Œä»£è¡¨å½“å‰æ¯é¡µçš„æ•°æ®æ¡æ•°ï¼Œé»˜è®¤ä¸º 20ï¼ŒèŒƒå›´ä» 1~50ã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šä¼šè¯æ¶ˆæ¯ idï¼Œç±»å‹ä¸º uuidã€‚
    - `conversation_id -> uuid`ï¼šæ¶ˆæ¯å…³è”çš„ä¼šè¯ idï¼Œç±»å‹ä¸º uuidã€‚
    - `query -> str`ï¼šäººç±»æå‡ºçš„é—®é¢˜/æŸ¥è¯¢ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `image_urls -> list[str]`ï¼šç”¨æˆ·æé—®çš„å›¾ç‰‡ URL åœ°å€åˆ—è¡¨ï¼Œå¦‚æœç”¨æˆ·åœ¨æé—®çš„æ—¶å€™ä¸Šä¼ äº†å›¾ç‰‡ï¼Œåˆ™ä¼šæ˜¾ç¤ºå›¾ç‰‡ï¼Œå¦åˆ™ä¼šæ­£å¸¸æ˜¾ç¤ºäººç±»æé—®æ¶ˆæ¯ã€‚
    - `answer -> str`ï¼šAI ç”Ÿæˆçš„æœ€ç»ˆç­”æ¡ˆï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `total_token_count -> int`ï¼šæ¶ˆæ¯æ¶ˆè€—çš„æ€» token æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `latency -> float`ï¼šè¯¥æ¡æ¶ˆæ¯å“åº”çš„æ—¶é—´ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ã€‚
    - `agent_thoughts -> list[dict]`ï¼šAgent æ™ºèƒ½ä½“äº§ç”Ÿè¯¥æ¡æ¶ˆæ¯çš„æ¨ç†ä¸­é—´æ­¥éª¤ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ï¼Œæ•°æ®ä¼šæŒ‰ç…§ `position` å­—å…¸è¿›è¡Œå¢åºæ’åºï¼Œä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰çš„æ¨ç†åˆ—è¡¨ã€‚
      - `id -> uuid`ï¼šæ¨ç†æ­¥éª¤å¯¹åº”çš„ idï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `position -> int`ï¼šæ¨ç†æ­¥éª¤æ‰€åœ¨çš„ä½ç½®ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `event -> str`ï¼šæ¨ç†äº‹ä»¶çš„ç±»å‹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `thought -> str`ï¼šæ¨ç†å†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¸€èˆ¬æ˜¯ LLM ç”Ÿæˆçš„å·¥å…·è°ƒç”¨å‚æ•°ã€‚
      - `observation -> str`ï¼šè§‚å¯Ÿå†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¸€èˆ¬æ˜¯å·¥å…·è°ƒç”¨/çŸ¥è¯†åº“æ£€ç´¢å¾—åˆ°çš„å†…å®¹ã€‚
      - `tool -> str`ï¼šè°ƒç”¨çš„å·¥å…·åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `tool_input -> dict`ï¼šè°ƒç”¨å·¥å…·çš„å·¥å…·å‚æ•°ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
      - `latency -> int`ï¼šè¯¥æ¨ç†æ­¥éª¤çš„å“åº”è€—æ—¶ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `created_at -> int`ï¼šè¯¥æ¨ç†æ­¥éª¤çš„åˆ›å»ºæ—¶é—´ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `created_at -> int`ï¼šæ¶ˆæ¯çš„åˆ›å»ºæ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/apps/1550b71a-1444-47ed-a59d-c2f080fbae94/conversations/messages
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "list": [],
          "paginator": {
              "current_page": 1,
              "page_size": 21,
              "total_page": 1,
              "total_record": 2
          }
      },
      "message": ""
  }
  ```

### 1.14 æ¸…ç©ºåº”ç”¨çš„è°ƒè¯•ä¼šè¯è®°å½•

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºæ¸…ç©ºæŒ‡å®šåº”ç”¨çš„ä¼šè¯è°ƒè¯•è®°å½•ï¼Œåœ¨åç«¯ä¼šå°†è¯¥åº”ç”¨çš„è°ƒè¯•ä¼šè¯ id æ¸…ç©ºï¼Œè¯¥æ¥å£æ— éœ€ä¼ é€’ä¼šè¯ idï¼Œåœ¨åç«¯ä¼šä»ä¿¡æ¯è¡¨ä¸­è·å–ä¼šè¯ idï¼Œå¹¶è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/apps/:app_id/conversations/delete-debug-conversation`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šéœ€è¦æ¸…ç©ºæŒ‡å®šåº”ç”¨è°ƒè¯•ä¼šè¯è®°å½•çš„åº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚
  
- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/apps/1550b71a-1444-47ed-a59d-c2f080fbae94/conversations/delete-debug-conversation
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "æ¸…ç©ºåº”ç”¨è°ƒè¯•ä¼šè¯è®°å½•æˆåŠŸ"
  }
  ```

### 1.15 å‘å¸ƒ/æ›´æ–°åº”ç”¨é…ç½®ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºå°†è‰ç¨¿é…ç½®è¿›è¡Œå‘å¸ƒæˆ–è€…æ›´æ–°ï¼Œè¯¥æ¥å£ä¼šåœ¨åç«¯å°†è‰ç¨¿é…ç½®åŒæ­¥åˆ° `å‘å¸ƒé…ç½®` ä¸­ï¼Œå¹¶æ·»åŠ  `ç‰ˆæœ¬é…ç½®` è®°å½•ï¼Œç”¨äºè®°å½•å†å²å‘å¸ƒ/æ›´æ–°çš„åº”ç”¨é…ç½®ä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/apps/:app_id/publish`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šéœ€è¦æ›´æ–°/å‘å¸ƒçš„åº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/apps/5e7834dc-bbca-4ee5-9591-8f297f5acded/publish
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "å‘å¸ƒ/æ›´æ–°åº”ç”¨é…ç½®ä¿¡æ¯æˆåŠŸ"
  }
  ```

### 1.16 å–æ¶ˆæŒ‡å®šåº”ç”¨çš„å‘å¸ƒ

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºå–æ¶ˆå‘å¸ƒå½“å‰çš„åº”ç”¨ä¿¡æ¯ï¼Œåœ¨åç«¯ä¼šå°†åº”ç”¨çš„çŠ¶æ€è¿›è¡Œä¿®æ”¹è°ƒæ•´ï¼Œåªæœ‰åœ¨åº”ç”¨å·²å‘å¸ƒçš„æƒ…å†µä¸‹æ‰å¯ä»¥å–æ¶ˆå‘å¸ƒï¼Œå–æ¶ˆå‘å¸ƒåä¼šå°†çŠ¶æ€æ”¹å› `è‰ç¨¿`ï¼ŒWebApp åŠå¼€æ”¾ API æ¥å£å°†æ— æ³•è®¿é—®è¯¥åº”ç”¨ï¼Œå¦‚æœåº”ç”¨æœªå‘å¸ƒè°ƒç”¨è¯¥æ¥å£åˆ™ä¼šç›´æ¥æŠ›å‡ºé”™è¯¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/apps/:app_id/cancel-publish`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦å–æ¶ˆå‘å¸ƒçš„åº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/apps/5e7834dc-bbca-4ee5-9591-8f297f5acded/cancel-publish
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "å–æ¶ˆå‘å¸ƒåº”ç”¨é…ç½®æˆåŠŸ"
  }
  ```

### 1.17 è·å–åº”ç”¨çš„å‘å¸ƒå†å²åˆ—è¡¨

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºè·å–æŸä¸ªåº”ç”¨çš„å‘å¸ƒå†å²é…ç½®åˆ—è¡¨ä¿¡æ¯ï¼Œè¯¥æ¥å£æ”¯æŒåˆ†é¡µï¼Œæ•°æ®ä¾æ® `version` è¿›è¡Œå€’åºæ’åºï¼Œå³å‘å¸ƒé…ç½®è¶Šæ–°ï¼Œæ•°æ®è¶Šé å‰ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/apps/:app_id/publish-histories`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦è·å–å‘å¸ƒå†å²çš„åº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚
    - `current_page -> int`ï¼šå¯é€‰å‚æ•°ï¼Œä»£è¡¨å½“å‰é¡µæ•°ï¼Œé»˜è®¤ä¸º 1ã€‚
    - `page_size -> int`ï¼šå¯é€‰å‚æ•°ï¼Œä»£è¡¨å½“å‰æ¯é¡µçš„æ•°æ®æ¡æ•°ï¼Œé»˜è®¤ä¸º 20ï¼ŒèŒƒå›´ä» 1~50ã€‚
  - å“åº”å‚æ•°ï¼š
    - `list -> list[dict]`ï¼šå†å²é…ç½®ç‰ˆæœ¬åˆ—è¡¨ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ã€‚
      - `id -> uuid`ï¼šå†å²é…ç½®ç‰ˆæœ¬ idï¼Œç±»å‹ä¸º uuidã€‚
      - `version -> int`ï¼šç‰ˆæœ¬å·ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œæ•°æ®ä» 1 å¼€å§‹é€’å¢ã€‚
      - `created_at -> int`ï¼šå‘å¸ƒæ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `paginator -> dict`ï¼šåˆ†é¡µå­—å…¸ä¿¡æ¯ã€‚
      - `current_page -> int`ï¼šå½“å‰çš„é¡µæ•°ã€‚
      - `page_size -> int`ï¼šæ¯é¡µçš„æ¡æ•°ã€‚
      - `total_page -> int`ï¼šæ€»é¡µæ•°ã€‚
      - `total_record -> int`ï¼šæ€»è®°å½•æ¡æ•°ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/apps/5e7834dc-bbca-4ee5-9591-8f297f5acded/publish-histories?current_page=1&page_size=20
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "list": [
              {
                  "id": "5e7834dc-bbca-4ee5-9591-8f297f5acded",
                  "version": 3,
                  "created_at": 1721460914
              },
              {
                  "id": "5e7834dc-bbca-4ee5-9591-8f297f5acded",
                  "version": 2,
                  "created_at": 1721460914
              },
              {
                  "id": "5e7834dc-bbca-4ee5-9591-8f297f5acded",
                  "version": 1,
                  "created_at": 1721460914
              }
          ],
          "paginator": {
              "current_page": 1,
              "page_size": 21,
              "total_page": 1,
              "total_record": 2
          }
      },
      "message": ""
  }
  ```

### 1.18 å›é€€æŒ‡å®šçš„å†å²é…ç½®åˆ°è‰ç¨¿

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºå°†æŒ‡å®šçš„åº”ç”¨å†å²é…ç½®å›é€€åˆ°è‰ç¨¿ï¼Œå¹¶ä¸ä¼šä¿®æ”¹å®é™…å‘å¸ƒï¼Œä»…ä»…æ˜¯å°† `å†å²é…ç½®` è¦†ç›–åˆ°å½“å‰åº”ç”¨çš„ `è‰ç¨¿é…ç½®` ä¸­ï¼Œå¦‚æœéœ€è¦å‘å¸ƒï¼Œéœ€è¦è°ƒç”¨ `å‘å¸ƒæ¥å£`ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/apps/:app_id/fallback-history`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦å›é€€çš„å†å²é…ç½®ä¿¡æ¯çš„åº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚
    - `app_config_version_id -> uuid`ï¼šåº”ç”¨é…ç½®ç‰ˆæœ¬ idï¼Œç±»å‹ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/apps/5e7834dc-bbca-4ee5-9591-8f297f5acded/fallback-history
  
  {
  	"app_config_version_id": "e1baf52a-1be2-4b93-ad62-6fad72f1ec37"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "å›é€€å†å²é…ç½®è‡³è‰ç¨¿æˆåŠŸ"
  }
  ```

### 1.19 è·å–æŒ‡å®šåº”ç”¨çš„å‘å¸ƒé…ç½®ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºè·å–æŒ‡å®šåº”ç”¨çš„å‘å¸ƒé…ç½®ä¿¡æ¯ï¼Œç›®å‰ LLMOps é¡¹ç›®ä¸­ä»…é›†æˆäº† WebApp å‘å¸ƒæ¸ é“ï¼Œæ‰€ä»¥è¯¥æ¥å£ç›®å‰ä»…è¿”å›å¯¹åº”åº”ç”¨çš„ Token å‡­è¯ä¿¡æ¯ï¼Œå¦‚æœéœ€è¦æ‰©å±•å¤šç¤¾äº¤åª’ä½“å¹³å°çš„å‘å¸ƒï¼ŒåæœŸå¯ä»¥æ‰©å±•è¯¥æ¥å£ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/apps/:app_id/published-config`

- **æ¥å£å‚æ•°**ï¼š

  - å“åº”å‚æ•°ï¼š
    - `web_app -> dict[str, Any]`ï¼šè¿”å› WebApp çš„å‘å¸ƒé…ç½®ä¿¡æ¯ï¼Œæ¶µç›–ä¸¤ä¸ªå­—æ®µï¼Œä¸€ä¸ªæ˜¯ token å‡­è¯æ ‡è¯†ï¼Œä¸€ä¸ªæ˜¯ status çŠ¶æ€ï¼Œç”¨äºè¡¨ç¤º WebApp æ˜¯å¦å‘å¸ƒã€‚
      - `token -> str`ï¼šWebApp çš„å‡­è¯æ ‡è¯†ä¿¡æ¯ï¼Œé€šè¿‡è¯¥å‡­è¯å¯ä»¥è®¿é—®åˆ°è¯¥ WebAppï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `status -> str`ï¼šWebApp çš„çŠ¶æ€ï¼Œæ”¯æŒ `draft` å’Œ `published` ä¸¤ç§çŠ¶æ€ï¼Œåˆ†åˆ«è¡¨ç¤ºè‰ç¨¿å’Œå·²å‘å¸ƒï¼Œè‰ç¨¿çŠ¶æ€ä¸‹ token ä¸ºç©ºå­—ç¬¦ä¸²ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/apps/e1baf52a-1be2-4b93-ad62-6fad72f1ec37/published-config
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "web_app": {
              "token": "JyXc763dv4A3A2TC",
              "status": "published"
          }
      },
      "message": ""
  }
  ```

### 1.20 é‡æ–°ç”Ÿæˆ WebApp çš„å‡­è¯æ ‡è¯†

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£å¯ä»¥ä¸ºå·²å‘å¸ƒçš„ WebApp é‡æ–°ç”Ÿæˆå‡­è¯æ ‡è¯†ï¼Œè°ƒç”¨æ¥å£åä¼šè¿”å›é‡æ–°ç”Ÿæˆçš„æ ‡è¯†ä¿¡æ¯ï¼Œå¹¶ä¸”æ— æ³•é€šè¿‡ä¹‹å‰çš„æ ‡è¯†æ¥è®¿é—®è¯¥ WebAppï¼Œå¦‚æœ Agent åº”ç”¨æœªå‘å¸ƒè°ƒç”¨è¯¥ API æ¥å£ä¼šç›´æ¥æŠ›å‡ºé”™è¯¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/apps/:app_id/published-config/regenerate-web-app-token`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚ç¤ºä¾‹ï¼š
    - `app_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦é‡æ–°ç”Ÿæˆ WebApp å‡­è¯å¯¹åº”çš„ Agent idï¼Œç±»å‹ä¸º UUIDã€‚
  - å“åº”ç¤ºä¾‹ï¼š
    - `token -> str`ï¼šé‡æ–°ç”Ÿæˆçš„ token å‡­è¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/apps/e1baf52a-1be2-4b93-ad62-6fad72f1ec37/published-config/regenerate-web-app-token
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "token": "JyXc763dv4A3A2TC"
      },
      "message": ""
  }
  ```

## 02. æ’ä»¶æ¨¡å—

### 2.1 è·å–å†…ç½®æ’ä»¶åˆ†ç±»åˆ—è¡¨

- **æ¥å£è¯´æ˜**ï¼šç”¨äºè·å–æ’ä»¶å¹¿åœºé¡µé¢ä¸­æ‰€æœ‰æ’ä»¶çš„åˆ†ç±»ä¿¡æ¯ï¼Œè¯¥æ¥å£ä¸æ”¯æŒåˆ†é¡µï¼Œä¼šä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰ä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/builtin-tools/categories`

- **æ¥å£å‚æ•°**ï¼š

  - å“åº”å‚æ•°ï¼š
    - `icon -> str`ï¼šæ’ä»¶åˆ†ç±»çš„ icon å›¾æ ‡ï¼Œæ‰€æœ‰ icon éƒ½æ˜¯ svg å›¾æ ‡çš„å­—ç¬¦ä¸²ã€‚
    - `category -> str`ï¼šåˆ†ç±»è‹±æ–‡å”¯ä¸€æ ‡è¯†åï¼Œä¾‹å¦‚ `search`ã€`image`ã€`weather` ç­‰ï¼Œç”¨äºåœ¨å‰ç«¯è¿›è¡Œå”¯ä¸€æ ‡è¯†åˆ¤æ–­ã€‚
    - `name -> str`ï¼šåˆ†ç±»åç§°ï¼Œä¾‹å¦‚ `æœç´¢`ã€`å›¾ç‰‡` ç­‰ï¼Œç”¨äºåœ¨å‰ç«¯å±•ç¤ºè¯¥åˆ†ç±»çš„åç§°ã€‚

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": [
          {"category": "search", "name": "æœç´¢", "icon": "xxx"},
          {"category": "image", "name": "å›¾ç‰‡", "icon": "xxx"},
          {"category": "videos", "name": "è§†é¢‘", "icon": "xxx"}
      ],
      "message": ""
  }
  ```

### 2.2 è·å–æ‰€æœ‰å†…ç½®æ’ä»¶åˆ—è¡¨ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè·å– LLMOps é¡¹ç›®ä¸­æ‰€æœ‰å†…ç½®æ’ä»¶åˆ—è¡¨ä¿¡æ¯ï¼Œè¯¥æ¥å£ä¼šä¸€æ¬¡æ€§è·å–æ‰€æœ‰æä¾›å•†/å·¥å…·ï¼Œæ— åˆ†é¡µï¼Œé€‚ç”¨äº `æ’ä»¶å¹¿åœº` ä¸ `AIåº”ç”¨ç¼–æ’` é¡µé¢ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/builtin-tools`

- **æ¥å£å‚æ•°**ï¼š

  - å“åº”å‚æ•°ï¼š
    - `name -> str`ï¼šæä¾›å•†çš„åç§°ã€‚
    - `label -> str`ï¼šæä¾›å•†å¯¹åº”çš„æ ‡ç­¾ã€‚
    - `description -> str`ï¼šæä¾›å•†å¯¹åº”çš„æè¿°ä¿¡æ¯ã€‚
    - `category -> str`ï¼šæä¾›å•†å¯¹åº”çš„åˆ†ç±»ã€‚
    - `background -> str`ï¼šæä¾›å•† icon å›¾æ ‡çš„èƒŒæ™¯ã€‚
    - `tools -> list`ï¼šæœåŠ¡æä¾›å•†çš„æ‰€æœ‰å·¥å…·åˆ—è¡¨ä¿¡æ¯ã€‚
    
      - `name -> str`ï¼šå·¥å…·çš„åå­—ã€‚
      - `label -> str`ï¼šå·¥å…·çš„æ ‡ç­¾ã€‚
      - `description -> str`ï¼šå·¥å…·çš„æè¿°ã€‚
    
      - `inputs -> list`ï¼šå¤§è¯­è¨€æ¨¡å‹è°ƒç”¨å¯¹åº”çš„å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸ºç©ºåˆ—è¡¨ï¼Œè¯¥å‚æ•°ä¿¡æ¯å¯¹åº” LLM å·¥å…·è°ƒç”¨çš„ä¿¡æ¯å®Œå…¨ä¸€è‡´ï¼Œä¸åšä»»ä½•è½¬æ¢ã€‚
        - `name -> str`ï¼šå‚æ•°çš„åå­—ã€‚
        - `description -> str`ï¼šå‚æ•°çš„æè¿°ã€‚
        - `required -> boolean`ï¼šå‚æ•°æ˜¯å¦å¿…å¡«ã€‚
        - `type -> string`ï¼šå‚æ•°çš„ç±»å‹ã€‚
      - `params -> list`ï¼šå·¥å…·è®¾ç½®å¯¹åº”çš„å‚æ•°åˆ—è¡¨ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸ºç©ºã€‚
        - `name -> str`ï¼šå‚æ•°çš„åå­—ã€‚
        - `label -> str`ï¼šå‚æ•°å¯¹åº”çš„æ ‡ç­¾ã€‚
        - `type -> str`ï¼šå‚æ•°çš„ç±»å‹ï¼Œæ¶µç›–äº† stringã€numberã€booleanã€selectã€‚
        - `required -> boolean`ï¼šå‚æ•°æ˜¯å¦å¿…å¡«ã€‚
        - `default -> Any`ï¼šå‚æ•°çš„é»˜è®¤å€¼ï¼Œå¦‚æœæ²¡æœ‰é»˜è®¤å€¼åˆ™ä¸º Noneã€‚
        - `min -> float`ï¼šå‚æ•°çš„æœ€å°å€¼ï¼Œå¦‚æœä¸éœ€è¦åˆ™ä¸º Noneã€‚
        - `max -> float`ï¼šå‚æ•°çš„æœ€å¤§å€¼ï¼Œå¦‚æœä¸éœ€è¦åˆ™ä¸º Noneã€‚
        - `help-> str`ï¼šå‚æ•°çš„å¸®åŠ©ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸º None æˆ–è€…ç©ºå­—ç¬¦ä¸²ã€‚
        - `options -> list`ï¼šç±»å‹ä¸ºä¸‹æ‹‰åˆ—è¡¨æ—¶éœ€è¦é…ç½®çš„é€‰é¡¹ã€‚
          - `value -> str`ï¼šä¸‹æ‹‰èœå•å¯¹åº”çš„å€¼ã€‚
          - `label -> str`ï¼šä¸‹æ‹‰èœå•å¯¹åº”çš„æ ‡ç­¾ã€‚
    - `created_at -> int`ï¼šåˆ›å»º/å‘å¸ƒè¯¥æœåŠ¡å•†æ’ä»¶çš„æ—¶é—´æˆ³ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET: /builtin-tools
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": [
          {
              "name": "google",
              "label": "Google",
              "description": "è°·æ­ŒæœåŠ¡æä¾›å•†ï¼Œæ¶µç›–äº†è°·æ­Œæœç´¢ç­‰å·¥å…·ã€‚",
              "background": "#E5E7EB",
              "category": "search",
              "tools": [
                  {
                      "name": "google_serper",
                      "label": "è°·æ­ŒSerperæœç´¢",
                      "description": "ä¸€ä¸ªä½æˆæœ¬çš„è°·æ­Œæœç´¢APIã€‚",
                      "inputs": [
                          {
                              "name": "query",
                              "description": "è¾“å…¥åº”è¯¥æ˜¯æœç´¢æŸ¥è¯¢è¯­å¥",
                              "required": true,
                              "type": "string"
                          }
                      ],
                      "params": [],
                  }
              ],
              "created_at": 1721460914
          },
          {
              "name": "dalle",
              "label": "DALLE",
              "description": "DALLEæ˜¯ä¸€ä¸ªæ–‡ç”Ÿå›¾å·¥å…·ã€‚",
              "background": "#E5E7EB",
              "category": "image",
              "tools": [
                  {
                      "name": "dalle3",
                      "label": "DALLE-3ç»˜å›¾å·¥å…·",
                      "description": "DALLE-3æ˜¯ä¸€ä¸ªå°†æ–‡æœ¬è½¬æ¢æˆå›¾ç‰‡çš„ç»˜å›¾å·¥å…·",
                      "inputs": [
                          {
                              "name": "query",
                              "description": "è¾“å…¥åº”è¯¥æ˜¯ç”Ÿæˆå›¾åƒçš„æ–‡æœ¬æç¤º(prompt)",
                              "required": true,
                              "type": "string"
                          }
                      ],
                      "params": [
                          {
                              "name": "size",
                              "label": "å›¾ç‰‡å°ºå¯¸",
                              "type": "select",
                              "required": true,
                              "help": "",
                              "min": null,
                              "max": null,
                              "options": [
                                  {"value": "1024Ã—1024", "label": "(æ–¹)1024x1024"},
                                  {"value": "1792x1024", "label": "(æ¨ªå±)1792x1024"},
                                  {"value": "1024x1792", "label": "(ç«–å±)1024x1792"}
                              ]
                          },
                          {
                              "name": "style",
                              "label": "å›¾ç‰‡é£æ ¼",
                              "type": "select",
                              "required": true,
                              "help": "",
                              "min": null,
                              "max": null,
                              "options": [
                                  {"value": "vivid", "label": "ç”ŸåŠ¨"},
                                  {"value": "natural", "label": "è‡ªç„¶"}
                              ]
                          }
                      ]
                  }
              ],
              "created_at": 1721460914
          }
      ],
      "message": ""
  }
  ```
  

### 2.3 è·å–æŒ‡å®šå·¥å…·çš„ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šæ ¹æ®ä¼ é€’çš„ `æä¾›å•†åç§°` + `å·¥å…·åç§°` è·å–å¯¹åº”å·¥å…·ä¿¡æ¯è¯¦æƒ…ï¼Œè¯¥æ¥å£ç”¨äºåœ¨ AI åº”ç”¨ç¼–æ’é¡µé¢ï¼Œç‚¹å‡»å·¥å…·è®¾ç½®æ—¶è¿›è¡Œç›¸åº”çš„å±•ç¤ºã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/builtin-tools/:provider/tools/:tool`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `provider -> str`ï¼šè·¯ç”±å‚æ•°ï¼ŒæœåŠ¡æä¾›å•†å¯¹åº”çš„åå­—ï¼Œä¾‹å¦‚ `google`ã€`dalle` ç­‰ã€‚
    - `tool -> str`ï¼šè·¯ç”±å‚æ•°ï¼Œå·¥å…·çš„åç§°ï¼Œä¾‹å¦‚ï¼š`google_serper`ã€`dalle3` ç­‰ã€‚
  - å“åº”å‚æ•°ï¼š
    - `provider -> dict`ï¼šè¯¥å·¥å…·æ‰€å±çš„æä¾›å•†å¯¹åº”çš„ä¿¡æ¯å­—å…¸ã€‚
      - `name -> str`ï¼šæä¾›å•†çš„åç§°ã€‚
      - `label -> str`ï¼šæä¾›å•†å¯¹åº”çš„æ ‡ç­¾ã€‚
      - `description -> str`ï¼šæä¾›å•†å¯¹åº”çš„æè¿°ä¿¡æ¯ã€‚
      - `category -> str`ï¼šæä¾›å•†å¯¹åº”çš„åˆ†ç±»ã€‚
      - `background -> str`ï¼šæä¾›å•† icon å›¾æ ‡çš„èƒŒæ™¯ã€‚
    - `name -> str`ï¼šå·¥å…·çš„åå­—ã€‚
    - `label -> str`ï¼šå·¥å…·çš„æ ‡ç­¾ã€‚
    - `description -> str`ï¼šå·¥å…·çš„æè¿°ã€‚
    - `inputs -> list`ï¼šå¤§è¯­è¨€æ¨¡å‹è°ƒç”¨å¯¹åº”çš„å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸ºç©ºåˆ—è¡¨ï¼Œè¯¥å‚æ•°ä¿¡æ¯å¯¹åº” LLM å·¥å…·è°ƒç”¨çš„ä¿¡æ¯å®Œå…¨ä¸€è‡´ï¼Œä¸åšä»»ä½•è½¬æ¢ã€‚
      - `name -> str`ï¼šå‚æ•°çš„åå­—ã€‚
      - `description -> str`ï¼šå‚æ•°çš„æè¿°ã€‚
      - `required -> boolean`ï¼šå‚æ•°æ˜¯å¦å¿…å¡«ã€‚
      - `type -> string`ï¼šå‚æ•°çš„ç±»å‹ã€‚
    - `params -> list`ï¼šå·¥å…·è®¾ç½®å¯¹åº”çš„å‚æ•°åˆ—è¡¨ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸ºç©ºã€‚
      - `name -> str`ï¼šå‚æ•°çš„åå­—ã€‚
      - `label -> str`ï¼šå‚æ•°å¯¹åº”çš„æ ‡ç­¾ã€‚
      - `type -> str`ï¼šå‚æ•°çš„ç±»å‹ï¼Œæ¶µç›–äº† stringã€numberã€booleanã€selectã€‚
      - `required -> boolean`ï¼šå‚æ•°æ˜¯å¦å¿…å¡«ã€‚
      - `default -> Any`ï¼šå‚æ•°çš„é»˜è®¤å€¼ï¼Œå¦‚æœæ²¡æœ‰é»˜è®¤å€¼åˆ™ä¸º Noneã€‚
      - `min -> float`ï¼šå‚æ•°çš„æœ€å°å€¼ï¼Œå¦‚æœä¸éœ€è¦åˆ™ä¸º Noneã€‚
      - `max -> float`ï¼šå‚æ•°çš„æœ€å¤§å€¼ï¼Œå¦‚æœä¸éœ€è¦åˆ™ä¸º Noneã€‚
      - `help-> str`ï¼šå‚æ•°çš„å¸®åŠ©ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸º None æˆ–è€…ç©ºå­—ç¬¦ä¸²ã€‚
      - `options -> list`ï¼šç±»å‹ä¸ºä¸‹æ‹‰åˆ—è¡¨æ—¶éœ€è¦é…ç½®çš„é€‰é¡¹ã€‚
        - `value -> str`ï¼šä¸‹æ‹‰èœå•å¯¹åº”çš„å€¼ã€‚
        - `label -> str`ï¼šä¸‹æ‹‰èœå•å¯¹åº”çš„æ ‡ç­¾ã€‚
    - `created_at -> int`ï¼šå·¥å…·çš„åˆ›å»ºæ—¶é—´ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET: /buildin-tools/google/tools/google_serper
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```python
  {
      "code": "success",
      "data": {
          "provider": {
              "name": "dalle",
              "label": "DALLE",
              "description": "DALLEæ˜¯ä¸€ä¸ªæ–‡ç”Ÿå›¾å·¥å…·ã€‚",
              "background": "#E5E7EB",
              "category": "image"
          },
          "name": "dalle3",
          "label": "DALLE-3ç»˜å›¾å·¥å…·",
          "description": "DALLE-3æ˜¯ä¸€ä¸ªå°†æ–‡æœ¬è½¬æ¢æˆå›¾ç‰‡çš„ç»˜å›¾å·¥å…·",
          "inputs": [
              {
                  "name": "query",
                  "description": "è¾“å…¥åº”è¯¥æ˜¯ç”Ÿæˆå›¾åƒçš„æ–‡æœ¬æç¤º(prompt)",
                  "required": true,
                  "type": "string"
              }
          ],
          "params": [
              {
                  "name": "size",
                  "label": "å›¾ç‰‡å°ºå¯¸",
                  "type": "select",
                  "required": true,
                  "help": "",
                  "min": null,
                  "max": null,
                  "options": [
                      {"value": "1024Ã—1024", "label": "(æ–¹)1024x1024"},
                      {"value": "1792x1024", "label": "(æ¨ªå±)1792x1024"},
                      {"value": "1024x1792", "label": "(ç«–å±)1024x1792"}
                  ]
              },
              {
                  "name": "style",
                  "label": "å›¾ç‰‡é£æ ¼",
                  "type": "select",
                  "required": true,
                  "help": "",
                  "min": null,
                  "max": null,
                  "options": [
                      {"value": "vivid", "label": "ç”ŸåŠ¨"},
                      {"value": "natural", "label": "è‡ªç„¶"}
                  ]
              }
          ],
          "created_at": 15121213465,
      },
      "message": ""
  }
  ```

### 2.4 è·å–å†…ç½®æ’ä»¶æä¾›å•†icon

- **æ¥å£è¯´æ˜**ï¼šæ ¹æ®ä¼ é€’çš„ `æœåŠ¡æä¾›å•†åç§°` å¯¹åº”çš„ icon ä¿¡æ¯ï¼Œè¿”å›çš„æ˜¯ icon å›¾ç‰‡æµï¼Œä¾‹å¦‚ svg å›¾ç‰‡å°±æ˜¯å¯¹åº”çš„æºç ï¼Œpng/jpeg ç­‰å°±æ˜¯å›¾ç‰‡æµä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`GET:/builtin-tools/:provider/icon`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `provider -> str`ï¼šæœåŠ¡æä¾›å•†å¯¹åº”çš„åå­—ï¼Œä¾‹å¦‚ `google`ã€`dalle` ç­‰ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```python
  GET: /buildin-tools/google/icon
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```bash
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
    <path d="M22.501 12.7332C22.501 11.8699 22.4296 11.2399 22.2748 10.5865H12.2153V14.4832H18.12C18.001 15.4515 17.3582 16.9099 15.9296 17.8898L15.9096 18.0203L19.0902 20.435L19.3106 20.4565C21.3343 18.6249 22.501 15.9298 22.501 12.7332Z" fill="#4285F4"/>
    <path d="M12.214 23C15.1068 23 17.5353 22.0666 19.3092 20.4567L15.9282 17.8899C15.0235 18.5083 13.8092 18.9399 12.214 18.9399C9.38069 18.9399 6.97596 17.1083 6.11874 14.5766L5.99309 14.5871L2.68583 17.0954L2.64258 17.2132C4.40446 20.6433 8.0235 23 12.214 23Z" fill="#34A853"/>
    <path d="M6.12046 14.5766C5.89428 13.9233 5.76337 13.2233 5.76337 12.5C5.76337 11.7766 5.89428 11.0766 6.10856 10.4233L6.10257 10.2841L2.75386 7.7355L2.64429 7.78658C1.91814 9.20993 1.50146 10.8083 1.50146 12.5C1.50146 14.1916 1.91814 15.7899 2.64429 17.2132L6.12046 14.5766Z" fill="#FBBC05"/>
    <path d="M12.2141 6.05997C14.2259 6.05997 15.583 6.91163 16.3569 7.62335L19.3807 4.73C17.5236 3.03834 15.1069 2 12.2141 2C8.02353 2 4.40447 4.35665 2.64258 7.78662L6.10686 10.4233C6.97598 7.89166 9.38073 6.05997 12.2141 6.05997Z" fill="#EB4335"/>
  </svg>
  ```

### 2.5 è·å–è‡ªå®šä¹‰ API å·¥å…·æä¾›è€…åˆ—è¡¨

- **æ¥å£è¯´æ˜**ï¼šè·å–ç‰¹å®šè´¦å·åˆ›å»ºçš„ API æ’ä»¶/è‡ªå®šä¹‰å·¥å…·ä¿¡æ¯ï¼Œè¯¥æ¥å£æºå¸¦åˆ†é¡µï¼Œå¹¶æ”¯æŒæœç´¢ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/api-tools`

- **æ¥å£å‚æ•°**ï¼š
  
  - è¯·æ±‚å‚æ•°ï¼š
    - `search_word -> str`ï¼šå¯é€‰å‚æ•°ï¼Œæœç´¢è¯ï¼Œç”¨äºæœç´¢è‡ªå®šä¹‰ API å·¥å…·ï¼Œé»˜è®¤ä¸ºç©ºä»£è¡¨ä¸æœç´¢ä»»ä½•å†…å®¹ã€‚
    - `current_page -> int`ï¼šå¯é€‰å‚æ•°ï¼Œä»£è¡¨å½“å‰é¡µæ•°ï¼Œé»˜è®¤ä¸º 1ã€‚
    - `page_size -> int`ï¼šå¯é€‰å‚æ•°ï¼Œä»£è¡¨å½“å‰æ¯é¡µçš„æ•°æ®æ¡æ•°ï¼Œé»˜è®¤ä¸º 20ï¼ŒèŒƒå›´ä» 1~50ã€‚
  - å“åº”å‚æ•°ï¼š
    - `list -> list`ï¼šåˆ†é¡µåçš„ API æ’ä»¶åˆ—è¡¨ï¼Œåˆ—è¡¨é‡Œçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå­—å…¸ã€‚
      - `id -> uuid`ï¼šå½“å‰å·¥å…·æä¾›è€…å¯¹åº”çš„ idã€‚
      - `name -> str`ï¼šå·¥å…·æä¾›è€…çš„åå­—ã€‚
      - `icon -> str`ï¼šå·¥å…·æä¾›è€…å¯¹åº”çš„ icon å›¾æ ‡åœ°å€ã€‚
      - `tools -> list`ï¼šè¯¥å·¥å…·æä¾›å•†çš„æ‰€æœ‰å·¥å…·åˆ—è¡¨ä¿¡æ¯ã€‚
        - `id -> uuid`ï¼šå·¥å…·çš„å”¯ä¸€ idï¼Œç±»å‹ä¸º uuidã€‚
        - `description -> str`ï¼šå·¥å…·çš„æè¿°ä¿¡æ¯ã€‚
        - `name -> str`ï¼šå·¥å…·çš„åç§°ï¼ŒåŒä¸€ä¸ªæä¾›è€…ä¸‹çš„å·¥å…·åç§°ä¸èƒ½é‡å¤ã€‚
        - `inputs -> list`ï¼šå·¥å…·çš„å¤§è¯­è¨€æ¨¡å‹è¾“å…¥åˆ—è¡¨ï¼Œåˆ—è¡¨é‡Œçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå­—å…¸ã€‚
          - `name -> str`ï¼šå‚æ•°çš„åå­—ã€‚
          - `description -> str`ï¼šå‚æ•°çš„æè¿°ã€‚
          - `required -> boolean`ï¼šå‚æ•°æ˜¯å¦å¿…å¡«ã€‚
          - `type -> string`ï¼šå‚æ•°çš„ç±»å‹ã€‚
      - `description -> str`ï¼šå·¥å…·æä¾›è€…çš„æè¿°ä¿¡æ¯ã€‚
      - `headers -> list`ï¼šå·¥å…·æä¾›è€…çš„è¯·æ±‚å¤´åˆ—è¡¨ä¿¡æ¯ï¼Œåˆ—è¡¨é‡Œçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå­—å…¸ã€‚
        - `key -> str`ï¼šè¯·æ±‚å¤´å¯¹åº”çš„é”®ã€‚
        - `value -> str`ï¼šè¯·æ±‚å¤´å¯¹åº”çš„å€¼ã€‚
      - `created_at -> int`ï¼šå·¥å…·æä¾›è€…çš„å‘å¸ƒæ—¶é—´æˆ³ã€‚
    - `paginator -> dict`ï¼šåˆ†é¡µçš„å­—å…¸æ•°æ®ã€‚
      - `current_page -> int`ï¼šå½“å‰çš„é¡µæ•°ã€‚
      - `page_size -> int`ï¼šæ¯é¡µçš„æ¡æ•°ã€‚
      - `total_page -> int`ï¼šæ€»é¡µæ•°ã€‚
      - `total_record -> int`ï¼šæ€»è®°å½•æ¡æ•°ã€‚
  
- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  /api-tools?search_word=&current_page=1&page_size=21
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "list": [
              {
                  "id": "46db30d1-3199-4e79-a0cd-abf12fa6858f",
                  "name": "é«˜å¾·å·¥å…·åŒ…",
                  "icon": "https://cdn.imooc.com/gaode.png",
                  "description": "æŸ¥è¯¢ipæ‰€åœ¨åœ°ã€å¤©æ°”é¢„æŠ¥ã€è·¯çº¿è§„åˆ’ç­‰é«˜å¾·å·¥å…·åŒ…",
                  "tools": [
                      {
                          "id": "d400cec0-892f-49ab-8f72-821b88c1aaa9",
                          "description": "æ ¹æ®ä¼ é€’çš„åŸå¸‚åè·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”é¢„æŠ¥ï¼Œä¾‹å¦‚ï¼šå¹¿å·ã€‚",
                          "name": "GetCurrentWeather",
                          "inputs": [
                              {
                                  "type": "str",
                                  "required": true,
                                  "name": "query",
                                  "description": "éœ€è¦æœç´¢çš„æŸ¥è¯¢è¯­å¥"
                              }
                          ]
                      }
                  ],
                  "headers": [
                      {"key": "Authorization", "value": "Bearer QQYnRFerJTSEcrfB89fw8prOaObmrch8"}
                  ],
                  "created_at": 1721460914
              }
          ],
          "paginator": {
              "current_page": 1,
              "page_size": 21,
              "total_page": 1,
              "total_record": 2
          }
      },
      "message": ""
  }
  ```

### 2.7 åˆ›å»ºè‡ªå®šä¹‰ API å·¥å…·æä¾›è€…

- **æ¥å£è¯´æ˜**ï¼šç”¨äºå°†ä¼ä¸šç°æœ‰çš„ API æœåŠ¡æ¥å…¥åˆ° LLMOps é¡¹ç›®åˆ›å»ºè‡ªå®šä¹‰ API å·¥å…·ï¼Œå¯¹äºè¯¥è‡ªå®šä¹‰å·¥å…·ï¼Œæ”¯æŒ GET+POST ä¸¤ç§ HTTP æ–¹æ³•çš„ URL é“¾æ¥ï¼Œå¹¶ä¸”å¯¹ OpenAPI-Schema è§„èŒƒè¿›è¡Œç®€åŒ–+è°ƒæ•´ï¼Œä»¥è®©å…¶æ›´é€‚é… LLMOps é¡¹ç›®ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/api-tools`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `name -> str`ï¼šå‚æ•°å¿…å¡«ï¼Œå·¥å…·æä¾›å•†çš„åå­—ï¼ŒåŒä¸€ä¸ªè´¦å·ä¸‹çš„å·¥å…·æä¾›å•†åå­—å¿…é¡»å”¯ä¸€ï¼Œå¦åˆ™å®¹æ˜“è¯†åˆ«é”™è¯¯ï¼Œåå­—çš„é•¿åº¦èŒƒå›´æ˜¯ 0-30 ä¸ªå­—ç¬¦ã€‚
    - `icon -> str`ï¼šå‚æ•°å¿…å¡«ï¼Œå·¥å…·æä¾›å•†çš„ icon å›¾æ ‡ï¼Œç±»å‹ä¸ºå›¾ç‰‡ URL å­—ç¬¦ä¸²ã€‚
    - `openapi_schema -> str`ï¼šç¬¦åˆ OpenAPI è§„èŒƒçš„ json å­—ç¬¦ä¸²ï¼Œåœ¨å­—ç¬¦ä¸²ä¸­æ¶µç›–åŸºç¡€ä¿¡æ¯ã€æœåŠ¡ï¼Œè¯¥æ•°æ®åœ¨åç«¯ä¼šè¿›è¡Œæ ¡éªŒï¼Œå¦‚æœç¼ºå°‘äº†å¯¹åº”çš„æ•°æ®ä¼šæŠ›å‡ºæ•°æ®æ ¡éªŒé”™è¯¯ã€‚
    - `headers -> list`ï¼šæ¥å£é™„åŠ çš„è¯·æ±‚å¤´ä¿¡æ¯ï¼Œç±»å‹ä¸ºåˆ—è¡¨ï¼Œåˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå¦‚æœæ²¡æœ‰è¯·æ±‚å¤´ä¿¡æ¯åˆ™ä¼ é€’ç©ºåˆ—è¡¨å³å¯ã€‚
      - `key -> str`ï¼šè¯·æ±‚å¤´å¯¹åº”çš„é”®ã€‚
      - `value -> str`ï¼šè¯·æ±‚å¤´å¯¹åº”çš„å€¼ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  {
      "name": "è°·æ­Œæœç´¢",
      "icon": "https://cdn.imooc.com/google.png",
      "openapi_schema": "{\"description\":\"è¿™æ˜¯ä¸€ä¸ªæŸ¥è¯¢å¯¹åº”è‹±æ–‡å•è¯å­—å…¸çš„å·¥å…·\",\"server\":\"https://dict.youdao.com\",\"paths\":{\"/suggest\":{\"get\":{\"description\":\"æ ¹æ®ä¼ é€’çš„å•è¯æŸ¥è¯¢å…¶å­—å…¸ä¿¡æ¯\",\"operationId\":\"YoudaoSuggest\",\"parameters\":[{\"name\":\"q\",\"in\":\"query\",\"description\":\"è¦æ£€ç´¢æŸ¥è¯¢çš„å•è¯ï¼Œä¾‹å¦‚love/computer\",\"required\":true,\"type\":\"str\"},{\"name\":\"doctype\",\"in\":\"query\",\"description\":\"è¿”å›çš„æ•°æ®ç±»å‹ï¼Œæ”¯æŒjsonå’Œxmlä¸¤ç§æ ¼å¼ï¼Œé»˜è®¤æƒ…å†µä¸‹jsonæ•°æ®\",\"required\":false,\"type\":\"str\"}]}}}}",
      "headers": [
          {
              "key": "Authorization",
              "value": "Bearer QQYnRFerJTSEcrfB89fw8prOaObmrch8"
          }
      ]
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```bash
  {
  	"code": "success",
  	"data": {},
  	"message": "åˆ›å»ºè‡ªå®šä¹‰APIæ’ä»¶æˆåŠŸ"
  }
  ```

### 2.8 åˆ é™¤è‡ªå®šä¹‰ API å·¥å…·æä¾›è€…

- **æ¥å£è¯´æ˜**ï¼šç”¨äºåˆ é™¤ç‰¹å®šçš„è‡ªå®šä¹‰ API æ’ä»¶ï¼Œåˆ é™¤å¯¹åº”çš„ API æ’ä»¶åï¼Œå…³è”çš„åº”ç”¨ã€å·¥ä½œæµä¹Ÿæ— æ³•ä½¿ç”¨è¯¥æ’ä»¶/å·¥å…·ï¼ˆåœ¨åº”ç”¨å¯¹è¯äº¤æµã€å·¥ä½œæµè¿è¡Œä¹‹å‰éƒ½ä¼šæ£€æµ‹å¯¹åº”çš„ API æ’ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœè¢«åˆ é™¤äº†ï¼Œå‡ä¼šå‰”é™¤å¹¶æ— æ³•ä½¿ç”¨ï¼‰ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/api-tools/:provider_id/delete`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `provider_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦åˆ é™¤çš„ API å·¥å…·æä¾›å•† idï¼Œç±»å‹ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/api-tools/e1baf52a-1be2-4b93-ad62-6fad72f1ec37/delete
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
  	"code": "success",
  	"data": {},
  	"message": "åˆ é™¤è‡ªå®šä¹‰APIæ’ä»¶æˆåŠŸ"
  }
  ```

### 2.9 æ›´æ–°è‡ªå®šä¹‰ API å·¥å…·æä¾›è€…

- **æ¥å£è¯´æ˜**ï¼šç”¨äºæ›´æ–°è‡ªå®šä¹‰ API å·¥å…·ä¿¡æ¯ï¼Œæ¯æ¬¡æ›´æ–°çš„æ—¶å€™ï¼Œåœ¨åç«¯éƒ½ä¼šåˆ é™¤åŸæœ‰å·¥å…·ä¿¡æ¯ï¼Œå¹¶è®°å½•åˆ›å»ºæ–°çš„å·¥å…·æ•°æ®ï¼Œåœ¨åç«¯ä½¿ç”¨ `provider_id+tool_name` å”¯ä¸€æ ‡è¯†è¿›è¡Œåˆ¤æ–­ï¼Œæ›´æ–°æ—¶å¦‚æœåŒä¸ªè´¦å·å‡ºç°é‡åï¼Œåˆ™ä¼šæŠ›å‡ºé”™è¯¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/api-tools/:provider_id`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `provider_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦ä¿®æ”¹çš„ API å·¥å…·æä¾›å•† idï¼Œç±»å‹ä¸º uuidã€‚
    - `name -> str`ï¼šå‚æ•°å¿…å¡«ï¼Œå·¥å…·æä¾›å•†çš„åå­—ï¼ŒåŒä¸€ä¸ªè´¦å·ä¸‹çš„å·¥å…·æä¾›å•†åå­—å¿…é¡»å”¯ä¸€ï¼Œå¦åˆ™å®¹æ˜“è¯†åˆ«é”™è¯¯ï¼Œåå­—çš„é•¿åº¦èŒƒå›´æ˜¯ 0-30 ä¸ªå­—ç¬¦ã€‚
    - `icon -> str`ï¼šå‚æ•°å¿…å¡«ï¼Œå·¥å…·æä¾›å•†çš„ icon å›¾æ ‡ï¼Œç±»å‹ä¸ºå›¾ç‰‡ URL å­—ç¬¦ä¸²ã€‚
    - `openapi_schema -> str`ï¼šç¬¦åˆ OpenAPI è§„èŒƒçš„ json å­—ç¬¦ä¸²ï¼Œåœ¨å­—ç¬¦ä¸²ä¸­æ¶µç›–åŸºç¡€ä¿¡æ¯ã€æœåŠ¡ï¼Œè¯¥æ•°æ®åœ¨åç«¯ä¼šè¿›è¡Œæ ¡éªŒï¼Œå¦‚æœç¼ºå°‘äº†å¯¹åº”çš„æ•°æ®ä¼šæŠ›å‡ºæ•°æ®æ ¡éªŒé”™è¯¯ã€‚
    - `headers -> list`ï¼šæ¥å£é™„åŠ çš„è¯·æ±‚å¤´ä¿¡æ¯ï¼Œç±»å‹ä¸ºåˆ—è¡¨ï¼Œåˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå¦‚æœæ²¡æœ‰è¯·æ±‚å¤´ä¿¡æ¯åˆ™ä¼ é€’ç©ºåˆ—è¡¨å³å¯ã€‚
      - `key -> str`ï¼šè¯·æ±‚å¤´å¯¹åº”çš„é”®ã€‚
      - `value -> str`ï¼šè¯·æ±‚å¤´å¯¹åº”çš„å€¼ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  POST:/api-tools/e1baf52a-1be2-4b93-ad62-6fad72f1ec37
  
  {
      "name": "",
      "icon": "",
      "openapi_schema": "{\"description\":\"è¿™æ˜¯ä¸€ä¸ªæŸ¥è¯¢å¯¹åº”è‹±æ–‡å•è¯å­—å…¸çš„å·¥å…·\",\"server\":\"https://dict.youdao.com\",\"paths\":{\"/suggest\":{\"get\":{\"description\":\"æ ¹æ®ä¼ é€’çš„å•è¯æŸ¥è¯¢å…¶å­—å…¸ä¿¡æ¯\",\"operationId\":\"YoudaoSuggest\",\"parameters\":[{\"name\":\"q\",\"in\":\"query\",\"description\":\"è¦æ£€ç´¢æŸ¥è¯¢çš„å•è¯ï¼Œä¾‹å¦‚love/computer\",\"required\":true,\"type\":\"str\"},{\"name\":\"doctype\",\"in\":\"query\",\"description\":\"è¿”å›çš„æ•°æ®ç±»å‹ï¼Œæ”¯æŒjsonå’Œxmlä¸¤ç§æ ¼å¼ï¼Œé»˜è®¤æƒ…å†µä¸‹jsonæ•°æ®\",\"required\":false,\"type\":\"str\"}]}}}}",
      "headers": [
          {"key": "Authorization", "value": "Bearer QQYnRFerJTSEcrfB89fw8prOaObmrch8"}
      ]
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
  	"code": "success",
  	"data": {},
  	"message": "æ›´æ–°è‡ªå®šä¹‰APIæ’ä»¶æˆåŠŸ"
  }
  ```

### 2.10 è·å–æŒ‡å®š API å·¥å…·æä¾›è€…ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šæ ¹æ®ä¼ é€’çš„å·¥å…·æä¾›è€… id è·å–å¯¹åº”çš„å·¥å…·æä¾›è€…è¯¦ç»†ä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/api-tools/:provider_id`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `provider_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦æŸ¥çœ‹çš„ API å·¥å…·æä¾›å•† idï¼Œç±»å‹ä¸º uuidã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šå·¥å…·æä¾›è€…çš„ idï¼Œç±»å‹ä¸º uuidã€‚
    - `name -> str`ï¼šå·¥å…·æä¾›è€…çš„åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `icon -> str`ï¼šå·¥å…·æä¾›è€…çš„ icon å›¾æ ‡åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `openapi_schema -> str`ï¼šç¬¦åˆ OpenAPI è§„èŒƒçš„ json å­—ç¬¦ä¸²ã€‚
    - `headers -> list`ï¼šæ¥å£é™„åŠ çš„è¯·æ±‚å¤´ä¿¡æ¯ï¼Œç±»å‹ä¸ºåˆ—è¡¨ï¼Œåˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå¦‚æœæ²¡æœ‰è¯·æ±‚å¤´ä¿¡æ¯åˆ™ä¸ºç©ºåˆ—è¡¨ã€‚
      - `key -> str`ï¼šè¯·æ±‚å¤´å¯¹åº”çš„é”®ã€‚
      - `value -> str`ï¼šè¯·æ±‚å¤´å¯¹åº”çš„å€¼ã€‚
    - `created_at -> int`ï¼šè¯¥å·¥å…·æä¾›è€…çš„åˆ›å»ºæ—¶é—´æˆ³ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/api-tools/e1baf52a-1be2-4b93-ad62-6fad72f1ec37
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "id": "46db30d1-3199-4e79-a0cd-abf12fa6858f",
          "name": "é«˜å¾·å·¥å…·åŒ…",
          "icon": "https://cdn.imooc.com/google.png",
          "openapi_schema": "{\"description\":\"è¿™æ˜¯ä¸€ä¸ªæŸ¥è¯¢å¯¹åº”è‹±æ–‡å•è¯å­—å…¸çš„å·¥å…·\",\"server\":\"https://dict.youdao.com\",\"paths\":{\"/suggest\":{\"get\":{\"description\":\"æ ¹æ®ä¼ é€’çš„å•è¯æŸ¥è¯¢å…¶å­—å…¸ä¿¡æ¯\",\"operationId\":\"YoudaoSuggest\",\"parameters\":[{\"name\":\"q\",\"in\":\"query\",\"description\":\"è¦æ£€ç´¢æŸ¥è¯¢çš„å•è¯ï¼Œä¾‹å¦‚love/computer\",\"required\":true,\"type\":\"str\"},{\"name\":\"doctype\",\"in\":\"query\",\"description\":\"è¿”å›çš„æ•°æ®ç±»å‹ï¼Œæ”¯æŒjsonå’Œxmlä¸¤ç§æ ¼å¼ï¼Œé»˜è®¤æƒ…å†µä¸‹jsonæ•°æ®\",\"required\":false,\"type\":\"str\"}]}}}}",
          "headers": [
              {
                  "key": "Authorization",
                  "value": "Bearer QQYnRFerJTSEcrfB89fw8prOaObmrch8"
              }
          ],
          "created_at": 1721460914
      },
      "message": ""
  }
  ```

### 2.11 è·å–æŒ‡å®š API å·¥å…·ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šæ ¹æ®ä¼ é€’çš„å·¥å…·æä¾›è€… id + å·¥å…·çš„åç§°æŸ¥çœ‹è‡ªå®šä¹‰ API æ’ä»¶çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™è¿”å› 404 ä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/api-tools/:provider_id/tools/:tool_name`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `provider_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦æŸ¥çœ‹çš„ API å·¥å…·æä¾›å•† idï¼Œç±»å‹ä¸º uuidã€‚
    - `tool_name -> str`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦æŸ¥çœ‹çš„ API å·¥å…·åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šå¯¹åº”å·¥å…·çš„ idï¼Œç±»å‹ä¸º uuidã€‚
    - `name -> str`ï¼šå¯¹åº”å·¥å…·çš„åç§°ï¼ˆOperationIdï¼Œæ“ä½œ idï¼‰ã€‚
    - `description -> str`ï¼šå¯¹åº”å·¥å…·çš„æè¿°ä¿¡æ¯ã€‚
    - `inputs -> list`ï¼šå·¥å…·çš„è¾“å…¥ä¿¡æ¯ï¼Œç±»å‹ä¸ºåˆ—è¡¨ã€‚
      - `type -> str`ï¼šè¾“å…¥å‚æ•°çš„ç±»å‹ï¼Œä¾‹å¦‚ strã€‚
      - `required -> boolean`ï¼šè¾“å…¥å‚æ•°æ˜¯å¦å¿…å¡«ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ã€‚
      - `name -> str`ï¼šè¾“å…¥å‚æ•°çš„åç§°ã€‚
      - `description -> str`ï¼šè¾“å…¥å‚æ•°çš„æè¿°ä¿¡æ¯ã€‚
    - `provider -> dict`ï¼šå·¥å…·å…³è”çš„æœåŠ¡æä¾›è€…ä¿¡æ¯ï¼Œç±»å‹æ˜¯ä¸€ä¸ªå­—å…¸ã€‚
      - `id -> uuid`ï¼šå·¥å…·æä¾›è€…çš„ idï¼Œç±»å‹ä¸º uuidã€‚
      - `name -> str`ï¼šå·¥å…·æä¾›è€…çš„åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `icon -> str`ï¼šå·¥å…·æä¾›è€…çš„ icon å›¾æ ‡åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `description -> str`ï¼šå·¥å…·æä¾›è€…çš„æè¿°ä¿¡æ¯ã€‚
      - `headers -> list`ï¼šå·¥å…·æä¾›è€…çš„è¯·æ±‚å¤´åˆ—è¡¨ä¿¡æ¯ï¼Œåˆ—è¡¨é‡Œçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå­—å…¸ã€‚
        - `key -> str`ï¼šè¯·æ±‚å¤´å¯¹åº”çš„é”®ã€‚
        - `value -> str`ï¼šè¯·æ±‚å¤´å¯¹åº”çš„å€¼ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/api-tools/46db30d1-3199-4e79-a0cd-abf12fa6858f/tools/GetCurrentName
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "id": "d400cec0-892f-49ab-8f72-821b88c1aaa9",
          "name": "GetCurrentWeather",
          "description": "æ ¹æ®ä¼ é€’çš„åŸå¸‚åè·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”é¢„æŠ¥ï¼Œä¾‹å¦‚ï¼šå¹¿å·ã€‚",
          "inputs": [
              {
                  "type": "str",
                  "required": true,
                  "name": "query",
                  "description": "éœ€è¦æœç´¢çš„æŸ¥è¯¢è¯­å¥"
              }
          ],
          "provider": {
              "id": "46db30d1-3199-4e79-a0cd-abf12fa6858f",
              "name": "é«˜å¾·å·¥å…·åŒ…",
              "icon": "https://cdn.imooc.com/gaode.png",
              "description": "æŸ¥è¯¢ipæ‰€åœ¨åœ°ã€å¤©æ°”é¢„æŠ¥ã€è·¯çº¿è§„åˆ’ç­‰é«˜å¾·å·¥å…·åŒ…",
              "headers": [
                  {"key": "Authorization", "value": "Bearer QQYnRFerJTSEcrfB89fw8prOaObmrch8"}
              ],
              "created_at": 1721460914
          }
      },
      "message": ""
  }
  ```

### 2.12 æ ¡éªŒ OpenAPI å­—ç¬¦ä¸²æ˜¯å¦æ­£ç¡®

- **æ¥å£è¯´æ˜**ï¼šæ ¡éªŒä¼ é€’çš„ OpenAPI-Schema å­—ç¬¦ä¸²æ˜¯å¦æ­£ç¡®ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/api-tools/validate-openapi-schema`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `openapi_schema -> str`ï¼šéœ€è¦æ ¡éªŒçš„ openapi-schema å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²çš„è§„åˆ™ç¬¦åˆé¡¹ç›® OpenAPI-Schema è§„èŒƒï¼Œè¯¥æ¥å£åªæ ¡éªŒæ•°æ®æ˜¯å¦ç¬¦åˆè§„åˆ™ï¼Œä¸æ ¡éªŒå¯¹åº”çš„æä¾›å•†åå­—ã€å·¥å…·åå­—ç­‰æ˜¯å¦å”¯ä¸€ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  {
      "openapi_schema": "{\"description\":\"è¿™æ˜¯ä¸€ä¸ªæŸ¥è¯¢å¯¹åº”è‹±æ–‡å•è¯å­—å…¸çš„å·¥å…·\",\"server\":\"https://dict.youdao.com\",\"paths\":{\"/suggest\":{\"get\":{\"description\":\"æ ¹æ®ä¼ é€’çš„å•è¯æŸ¥è¯¢å…¶å­—å…¸ä¿¡æ¯\",\"operationId\":\"YoudaoSuggest\",\"parameters\":[{\"name\":\"q\",\"in\":\"query\",\"description\":\"è¦æ£€ç´¢æŸ¥è¯¢çš„å•è¯ï¼Œä¾‹å¦‚love/computer\",\"required\":true,\"type\":\"str\"},{\"name\":\"doctype\",\"in\":\"query\",\"description\":\"è¿”å›çš„æ•°æ®ç±»å‹ï¼Œæ”¯æŒjsonå’Œxmlä¸¤ç§æ ¼å¼ï¼Œé»˜è®¤æƒ…å†µä¸‹jsonæ•°æ®\",\"required\":false,\"type\":\"str\"}]}}}}"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
  	"code": "success",
  	"data": {},
  	"message": "openapi-schemaæ•°æ®æ ¼å¼æ— è¯¯"
  }
  ```

  ```json
  {
  	"code": "validate_error",
  	"data": {},
  	"message": "openapi-schemaæ ¡éªŒå¤±è´¥ï¼Œinfoä¸èƒ½ä¸ºç©º"
  }
  ```



## 03. æ–‡ä»¶ä¸Šä¼ æ¨¡å—

### 3.1 å°†æ–‡ä»¶ä¸Šä¼ åˆ°è…¾è®¯äº‘cos

- **æ¥å£è¯´æ˜**ï¼šå°†æ–‡ä»¶ä¸Šä¼ åˆ°è…¾è®¯äº‘å¯¹è±¡å­˜å‚¨ä¸­ï¼Œè¯¥æ¥å£ä¸»è¦ç”¨äºä¸Šä¼ æ–‡ä»¶ï¼Œè°ƒç”¨æ¥å£åè¿”å›å¯¹åº”çš„æ–‡ä»¶ idã€åå­—ã€äº‘ç«¯ä½ç½®ç­‰ä¿¡æ¯ï¼Œä¸»è¦ç”¨äºçŸ¥è¯†åº“ã€å·¥å…·ã€å¤šæ¨¡æ€åº”ç”¨å¯¹è¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/upload-files/file`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `file -> File`ï¼šéœ€è¦ä¸Šä¼ çš„æ–‡ä»¶ï¼Œæœ€å¤šæ”¯æŒä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ï¼Œæœ€å¤§æ”¯æŒçš„æ–‡ä»¶ä¸èƒ½è¶…è¿‡ 15 MBã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šä¸Šä¼ æ–‡ä»¶çš„å¼•ç”¨ idï¼Œç±»å‹ä¸º uuidï¼Œåœ¨çŸ¥è¯†åº“æ¨¡å—ã€åº”ç”¨å¯¹è¯æ¨¡å—ä¼šä½¿ç”¨è¯¥å¼•ç”¨æ–‡ä»¶ idã€‚
    - `account_id -> uuid`ï¼šè¯¥æ–‡ä»¶æ‰€å½’å±çš„è´¦å· idï¼Œç”¨äºæ ‡è®°æ˜¯å“ªä¸ªè´¦å·ä¸Šä¼ äº†è¯¥æ–‡ä»¶ã€‚
    - `name -> str`ï¼šåŸå§‹æ–‡ä»¶åå­—ã€‚
    - `key -> str`ï¼šäº‘ç«¯æ–‡ä»¶å¯¹åº”çš„ key æˆ–è€…è·¯å¾„ã€‚
    - `size -> int`ï¼šæ–‡ä»¶å¤§å°ï¼Œå•ä½ä¸ºå­—èŠ‚ã€‚
    - `extension -> str`ï¼šæ–‡ä»¶çš„æ‰©å±•åï¼Œä¾‹å¦‚ `.md`ã€‚
    - `mime_type -> str`ï¼šæ–‡ä»¶ mime-type ç±»å‹æ¨æ–­ã€‚
    - `created_at -> str`ï¼šæ–‡ä»¶çš„åˆ›å»ºæ—¶é—´æˆ³ã€‚

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "id": "46db30d1-3199-4e79-a0cd-abf12fa6858f",
          "account_id": "e1baf52a-1be2-4b93-ad62-6fad72f1ec37",
          "name": "é¡¹ç›®APIæ–‡æ¡£.md",
          "key": "2024/05/14/218e5217-ab10-4634-9681-022867955f1b.md",
          "size": 30241,
          "extension": ".md",
          "mime_type": "txt",
          "created_at": 1721460914
      },
      "message": ""
  }
  ```

### 3.2 å°†å›¾ç‰‡ä¸Šä¼ åˆ°è…¾è®¯äº‘cos

- **æ¥å£è¯´æ˜**ï¼šå°†å›¾ç‰‡ä¸Šä¼ åˆ°è…¾è®¯äº‘ cos å¯¹è±¡å­˜å‚¨ä¸­ï¼Œè¯¥æ¥å£ç”¨äºéœ€è¦ä¸Šä¼ å›¾ç‰‡çš„æ¨¡å—ï¼Œæ¥å£ä¼šè¿”å›å›¾ç‰‡çš„ URL åœ°å€ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/upload-files/image`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `file -> File`ï¼šéœ€è¦ä¸Šä¼ çš„å›¾ç‰‡æ–‡ä»¶ï¼Œæ”¯æŒä¸Šä¼  jpgã€jpegã€pngã€gifï¼Œæœ€å¤§ä¸èƒ½è¶…è¿‡ 15 MBã€‚
  - å“åº”å‚æ•°ï¼š
    - `image_url -> str`ï¼šä¸Šä¼ å›¾ç‰‡å¯¹åº”çš„ URL é“¾æ¥ã€‚

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "image_url": "https://cdn.imooc.com/2024/05/14/218e5217-ab10-4634-9681-022867955f1b.png"
      },
      "message": ""
  }
  ```


## 04. çŸ¥è¯†åº“æ¨¡å—

### 4.1 è·å–çŸ¥è¯†åº“åˆ—è¡¨

- **æ¥å£è¯´æ˜**ï¼šç”¨äºè·å–å½“å‰ç™»å½•è´¦å·çš„çŸ¥è¯†åº“åˆ—è¡¨ä¿¡æ¯ï¼Œè¯¥æ¥å£æ”¯æŒæœç´¢+åˆ†é¡µï¼Œä¼ é€’æœç´¢è¯ä¸ºç©ºæ—¶ä»£è¡¨ä¸æœç´¢ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/datasets`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `search_word -> str`ï¼šå¯é€‰å‚æ•°ï¼Œæœç´¢è¯ï¼Œç”¨äºçŸ¥è¯†åº“åç§°æ¨¡ç³Šæœç´¢ï¼Œé»˜è®¤ä¸ºç©ºä»£è¡¨ä¸æœç´¢ä»»ä½•å†…å®¹ã€‚
    - `current_page -> int`ï¼šå¯é€‰å‚æ•°ï¼Œä»£è¡¨å½“å‰é¡µæ•°ï¼Œé»˜è®¤ä¸º 1ã€‚
    - `page_size -> int`ï¼šå¯é€‰å‚æ•°ï¼Œä»£è¡¨å½“å‰æ¯é¡µçš„æ•°æ®æ¡æ•°ï¼Œé»˜è®¤ä¸º 20ï¼ŒèŒƒå›´ä» 1~50ã€‚
  - å“åº”å‚æ•°ï¼š
    - `list -> list`ï¼šåˆ†é¡µåçš„çŸ¥è¯†åº“åˆ—è¡¨ä¿¡æ¯ã€‚
      - `id -> uuid`ï¼šçŸ¥è¯†åº“å¯¹åº”çš„ idï¼Œç±»å‹ä¸º uuidã€‚
      - `name -> str`ï¼šçŸ¥è¯†åº“å¯¹åº”çš„åç§°ã€‚
      - `icon -> str`ï¼šçŸ¥è¯†åº“å¯¹åº”çš„å›¾æ ‡ã€‚
      - `description -> str`ï¼šçŸ¥è¯†åº“æè¿°ä¿¡æ¯ã€‚
      - `document_count -> int`ï¼šè¯¥çŸ¥è¯†åº“ä¸‹çš„æ–‡æ¡£æ•°ã€‚
      - `character_count -> int`ï¼šè¯¥çŸ¥è¯†åº“æ‹¥æœ‰çš„æ–‡æ¡£çš„æ€»å­—ç¬¦æ•°ã€‚
      - `related_app_count -> int`ï¼šè¯¥çŸ¥è¯†åº“å…³è”çš„ APP æ•°é‡ã€‚
      - `updated_at -> int`ï¼šçŸ¥è¯†åº“çš„æœ€è¿‘ç¼–è¾‘æ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ã€‚
      - `created_at -> int`ï¼šçŸ¥è¯†åº“çš„åˆ›å»ºæ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ã€‚
    - `paginator -> dict`ï¼šåˆ†é¡µå­—å…¸ä¿¡æ¯ã€‚
      - `current_page -> int`ï¼šå½“å‰çš„é¡µæ•°ã€‚
      - `page_size -> int`ï¼šæ¯é¡µçš„æ¡æ•°ã€‚
      - `total_page -> int`ï¼šæ€»é¡µæ•°ã€‚
      - `total_record -> int`ï¼šæ€»è®°å½•æ¡æ•°ã€‚

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "list": [
              {
                  "id": "46db30d1-3199-4e79-a0cd-abf12fa6858f",
                  "name": "æ…•è¯¾LLMOpsçŸ¥è¯†åº“",
                  "icon": "https://cdn.imooc.com/dataset.png",
                  "description": "JavaScript æ˜¯ä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œç”¨äºåˆ›å»ºäº¤äº’å¼ç½‘é¡µå’ŒåŠ¨æ€æ•ˆæœã€‚JavaScript åœ¨å‰ç«¯å¼€å‘ä¸­æ‰®æ¼”ç€éå¸¸é‡è¦çš„è§’è‰²ï¼Œå› æ­¤å­¦ä¹  JavaScript å¯¹äºåˆçº§å‰ç«¯å·¥ç¨‹å¸ˆæ¥è¯´éå¸¸å¿…è¦ã€‚JavaScript...",
                  "document_count": 10,
                  "character_count": 14651,
                  "related_app_count": 2,
                  "updated_at": 1721460914,
                  "created_at": 1721460914
              }
          ],
          "paginator": {
              "current_page": 1,
              "page_size": 21,
              "total_page": 1,
              "total_record": 2
          }
      },
      "message": ""
  }
  ```

### 4.2 åˆ›å»ºçŸ¥è¯†åº“

- **æ¥å£è¯´æ˜**ï¼šæ ¹æ®ä¼ é€’çš„ä¿¡æ¯åˆ›å»ºçŸ¥è¯†åº“ï¼Œåœ¨åŒä¸€ä¸ªè´¦å·ä¸‹ï¼Œåªèƒ½åˆ›å»ºä¸€ä¸ªåŒåçš„çŸ¥è¯†åº“ï¼Œé¿å…åœ¨å¼•ç”¨çš„æ—¶å€™å‘ç”Ÿè¯¯è§£ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/datasets`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `name -> str`ï¼šçŸ¥è¯†åº“çš„åç§°ï¼Œåœ¨åŒä¸€ä¸ªè´¦å·ä¸‹ï¼Œåªèƒ½åˆ›å»ºä¸€ä¸ªåŒåçš„çŸ¥è¯†åº“ï¼Œé€»è¾‘å’Œ `è‡ªå®šä¹‰APIæ’ä»¶` ä¸€æ ·ï¼ŒçŸ¥è¯†åº“çš„åç§°æœ€é•¿ä¸èƒ½è¶…è¿‡ 100 ä¸ªå­—ç¬¦ã€‚
    - `icon -> str`ï¼šçŸ¥è¯†åº“çš„ icon å›¾æ ‡åœ°å€ï¼Œåœ¨å‰ç«¯å¯ä»¥è°ƒç”¨ `å›¾ç‰‡ä¸Šä¼ æ¥å£` è·å– URL é“¾æ¥åæäº¤ã€‚
    - `description -> str`ï¼šå¯é€‰å‚æ•°ï¼ŒçŸ¥è¯†åº“çš„æè¿°ä¿¡æ¯ï¼Œæè¿°æœ€å¤§ä¸èƒ½è¶…è¿‡ 2000 ä¸ªå­—ç¬¦ï¼Œå½“è¯¥å‚æ•°æ²¡æœ‰å¡«å†™æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆç±»ä¼¼ `Useful for when you want to answer queries about the xxx` çš„æè¿°ï¼Œåœ¨åç«¯ç¡®ä¿è¯¥å­—æ®µæ°¸è¿œä¸ä¼šä¸ºç©ºã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  {
      "name": "æ…•è¯¾LLMOpsçŸ¥è¯†åº“",
      "icon": "https://cdn.imooc.com/dataset.jpg",
      "description": "Useful for when you want to answer queries about the æ…•è¯¾LLMOpsçŸ¥è¯†åº“"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "åˆ›å»ºçŸ¥è¯†åº“æˆåŠŸ"
  }

### 4.3 æ›´æ–°æŒ‡å®šçŸ¥è¯†åº“ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºæ›´æ–°æŒ‡å®šçš„çŸ¥è¯†åº“ä¿¡æ¯ï¼Œæ¶µç›–ï¼šçŸ¥è¯†åº“åç§°ã€å›¾æ ‡ã€æè¿°ç­‰ä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/datasets/:dataset_id`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šéœ€è¦æ›´æ–°çš„çŸ¥è¯†åº“ idï¼Œç±»å‹ä¸º uuidï¼Œè¯¥å‚æ•°ä¸ºè·¯ç”±å‚æ•°ã€‚
    - `name -> str`ï¼šå¿…å¡«å‚æ•°ï¼Œéœ€è¦æ›´æ–°çš„çŸ¥è¯†åº“åç§°ï¼ŒçŸ¥è¯†åº“åç§°ä¹Ÿå¿…é¡»ä¿è¯å”¯ä¸€ï¼Œé•¿åº¦ä¸èƒ½è¶…è¿‡ 100 ä¸ªå­—ç¬¦ã€‚
    - `icon -> str`ï¼šå¿…å¡«å‚æ•°ï¼Œéœ€è¦æ›´æ–°çš„çŸ¥è¯†åº“å›¾æ ‡ï¼Œç±»å‹ä¸ºå›¾æ ‡çš„ URL åœ°å€ã€‚
    - `description -> str`ï¼šå¯é€‰å‚æ•°ï¼Œéœ€è¦æ›´æ–°çš„çŸ¥è¯†åº“æè¿°ï¼Œé•¿åº¦ä¸è¶…è¿‡ 2000 ä¸ªå­—ç¬¦ï¼Œå¦‚æœä¸ºç©ºï¼Œä¼šå…ˆåˆ é™¤åŸæœ‰çš„æè¿°ä¿¡æ¯ï¼Œå¹¶ä¸”åœ¨åç«¯è‡ªåŠ¨ç”Ÿæˆç±»ä¼¼ `Useful for when you want to answer queries about the xxx` çš„æè¿°ï¼Œåœ¨åç«¯ç¡®ä¿è¯¥å­—æ®µæ°¸è¿œä¸ä¼šä¸ºç©ºã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  POST:/dataset/e1baf52a-1be2-4b93-ad62-6fad72f1ec37
  
  {
      "name": "æ…•è¯¾LLMOpsçŸ¥è¯†åº“",
      "icon": "https://cdn.imooc.com/dataset.jpg",
      "description": "Useful for when you want to answer queries about the æ…•è¯¾LLMOpsçŸ¥è¯†åº“"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "æ›´æ–°çŸ¥è¯†åº“æˆåŠŸ"
  }
  ```

### 4.4 åˆ é™¤æŒ‡å®šçš„çŸ¥è¯†åº“

- **æ¥å£è¯´æ˜**ï¼šç”¨äºåˆ é™¤æŒ‡å®šçš„çŸ¥è¯†åº“ï¼Œåˆ é™¤çŸ¥è¯†åº“åï¼Œåœ¨åç«¯ä¼šå°†å…³è”çš„åº”ç”¨é…ç½®ã€çŸ¥è¯†åº“ä¸‹çš„æ‰€æœ‰æ–‡æ¡£/æ–‡æ¡£ç‰‡æ®µ/æŸ¥è¯¢è¯­å¥ä¹Ÿè¿›è¡Œä¸€å¹¶åˆ é™¤ï¼ˆè¯¥æ¥å£ä¸ºè€—æ—¶æ¥å£ï¼Œå°†ä½¿ç”¨å¼‚æ­¥/æ¶ˆæ¯é˜Ÿåˆ—çš„å½¢å¼æ¥å®ç°ï¼‰ï¼Œåˆ é™¤åä»¥å‰å…³è”çš„åº”ç”¨å°†æ— æ³•å¼•ç”¨è¯¥çŸ¥è¯†åº“ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/datasets/:dataset_id/delete`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šéœ€è¦åˆ é™¤çš„çŸ¥è¯†åº“ idï¼Œç±»å‹ä¸º uuidï¼Œè¯¥å‚æ•°ä¸ºè·¯ç”±å‚æ•°ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  POST:/dataset/e1baf52a-1be2-4b93-ad62-6fad72f1ec37/delete
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "åˆ é™¤çŸ¥è¯†åº“æˆåŠŸ"
  }
  ```

### 4.5 è·å–æŒ‡å®šçš„çŸ¥è¯†åº“è¯¦æƒ…

- **æ¥å£è¯´æ˜**ï¼šç”¨äºè·å–æŒ‡å®šçš„çŸ¥è¯†åº“è¯¦æƒ…ä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/datasets/:dataset_id`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦è·å–çš„çŸ¥è¯†åº“ idï¼Œç±»å‹ä¸º uuidã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šçŸ¥è¯†åº“ idï¼Œç±»å‹ä¸º uuidã€‚
    - `name -> str`ï¼šçŸ¥è¯†åº“åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `icon -> str`ï¼šçŸ¥è¯†åº“çš„ icon å›¾æ ‡åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `description -> str`ï¼šçŸ¥è¯†åº“çš„æè¿°ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `document_count -> int`ï¼šçŸ¥è¯†åº“ä¸‹çš„æ–‡æ¡£æ•°é‡ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `hit_count -> int`ï¼šçŸ¥è¯†åº“çš„æ–‡æ¡£æ€»å‘½ä¸­æ¬¡æ•°ï¼Œè¯¥çŸ¥è¯†åº“ä¸‹çš„æ¯ä¸€ä¸ªæ–‡æ¡£è¢«å‘½ä¸­ï¼Œåˆ™æ¬¡æ•°+1ï¼Œå¦‚æœä¸€æ¬¡æŸ¥è¯¢å‘½ä¸­å¤šä¸ªåŒå±äºåŒä¸€ä¸ªæ–‡æ¡£çš„ç‰‡æ®µï¼Œè¯¥æ–‡æ¡£çš„å‘½ä¸­æ¬¡æ•°ä¹Ÿåª+1ï¼Œè¿™æ ·è®¡ç®—ä¼šæ›´åŠ å‡è¡¡ï¼ˆè®¡ç®—é€»è¾‘ä¼šæ›´ç®€å•ï¼‰ã€‚
    - `related_app_count -> int`ï¼šçŸ¥è¯†åº“å…³è”çš„ AI/Agent åº”ç”¨æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `character_count -> int`ï¼šè¯¥çŸ¥è¯†åº“æ‹¥æœ‰çš„æ–‡æ¡£çš„æ€»å­—ç¬¦æ•°ã€‚
    - `updated_at -> int`ï¼šçŸ¥è¯†åº“çš„æœ€åç¼–è¾‘æ—¶é—´ã€‚
    - `created_at -> int`ï¼šçŸ¥è¯†åº“çš„åˆ›å»ºæ—¶é—´ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/dataset/e1baf52a-1be2-4b93-ad62-6fad72f1ec37
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "id": "46db30d1-3199-4e79-a0cd-abf12fa6858f",
          "name": "æ…•è¯¾LLMOpsçŸ¥è¯†åº“",
          "icon": "https://cdn.imooc.com/dataset.png",
          "description": "JavaScript æ˜¯ä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œç”¨äºåˆ›å»ºäº¤äº’å¼ç½‘é¡µå’ŒåŠ¨æ€æ•ˆæœã€‚JavaScript åœ¨å‰ç«¯å¼€å‘ä¸­æ‰®æ¼”ç€éå¸¸é‡è¦çš„è§’è‰²ï¼Œå› æ­¤å­¦ä¹  JavaScript å¯¹äºåˆçº§å‰ç«¯å·¥ç¨‹å¸ˆæ¥è¯´éå¸¸å¿…è¦ã€‚JavaScript...",
          "document_count": 10,
          "character_count": 14651,
          "hit_count": 10,
          "related_app_count": 2,
          "updated_at": 1721460914,
          "created_at": 1721460914
      },
      "message": ""
  }

### 4.6 æŒ‡å®šçŸ¥è¯†åº“è¿›è¡Œå¬å›æµ‹è¯•

- **æ¥å£è¯´æ˜**ï¼šä½¿ç”¨æŒ‡å®šçš„çŸ¥è¯†åº“è¿›è¡Œå¬å›æµ‹è¯•ï¼Œç”¨äºæ£€æµ‹ä¸åŒçš„æŸ¥è¯¢ query åœ¨æ•°æ®åº“ä¸­çš„æ£€ç´¢æ•ˆæœï¼Œæ¯æ¬¡æ‰§è¡Œå¬å›æµ‹è¯•çš„æ—¶å€™éƒ½ä¼šå°†è®°å½•å­˜å‚¨åˆ° `æœ€è¿‘æŸ¥è¯¢åˆ—è¡¨` ä¸­ï¼Œè¿”å›çš„æ•°æ®ä¸ºæ£€ç´¢åˆ°çš„ `æ–‡æ¡£ç‰‡æ®µ` åˆ—è¡¨ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/datasets/:dataset_id/hit`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦è¿›è¡Œå¬å›æµ‹è¯•çš„çŸ¥è¯†åº“ idï¼Œç±»å‹ä¸º uuidã€‚
    - `query -> str`ï¼šè¿›è¡Œå¬å›æµ‹è¯•çš„æŸ¥è¯¢è¯­å¥ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸è¶…è¿‡ 200 ä¸ªå­—ç¬¦ã€‚
    - `retrieval_strategy -> str`ï¼šæ£€ç´¢ç­–ç•¥ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œæ”¯æŒçš„å€¼ä¸º `full_text(å…¨æ–‡/å…³é”®è¯æ£€ç´¢)`ã€`semantic(å‘é‡/ç›¸ä¼¼æ€§æ£€ç´¢)`ã€`hybrid(æ··åˆæ£€ç´¢)`ã€‚
    - `k -> int`ï¼šæœ€å¤§å¬å›æ•°é‡ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œæ•°æ®èŒƒå›´ä¸º 0-10ï¼Œå¿…å¡«å‚æ•°ã€‚
    - `score -> float`ï¼šæœ€å°åŒ¹é…åº¦ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ï¼ŒèŒƒå›´ä» 0-1ï¼Œä¿ç•™ 2 ä½å°æ•°ï¼Œæ•°å­—è¶Šå¤§è¡¨ç¤ºç›¸ä¼¼åº¦è¶Šé«˜ã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šæ–‡æ¡£ç‰‡æ®µçš„ idï¼Œç±»å‹ä¸º uuidã€‚
    - `document -> dict`ï¼šç‰‡æ®µå½’å±çš„æ–‡æ¡£ä¿¡æ¯ã€‚
      - `id -> uuid`ï¼šæ–‡æ¡£ idï¼Œç±»å‹ä¸º uuidã€‚
      - `name -> string`ï¼šæ–‡æ¡£çš„åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `extension -> string`ï¼šæ–‡æ¡£çš„æ‰©å±•åã€‚
      - `mime_type -> string`ï¼šæ–‡æ¡£çš„ mime_type ç±»å‹æ¨æ–­ã€‚
    - `dataset_id -> uuid`ï¼šç‰‡æ®µå½’å±çš„ `çŸ¥è¯†åº“id`ï¼Œç±»å‹ä¸º uuidã€‚
    - `score -> float`ï¼šç‰‡æ®µçš„å¬å›å¾—åˆ†ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ï¼Œæ•°å€¼èŒƒå›´ä» 0-1ï¼Œåªæœ‰æ£€ç´¢ç±»å‹ä¸º `ç›¸ä¼¼æ€§æ£€ç´¢` çš„æ—¶å€™æ‰ä¼šè¿”å›å¾—åˆ†ï¼Œ`full_text` å’Œ `hybrid` è¿™ä¸¤ç§æ£€ç´¢ç­–ç•¥ä¸ä¼šè®¡ç®—å¬å›å¾—åˆ†ï¼ˆè¿”å›ç»“æœä¸º 0ï¼‰ã€‚
    - `position -> int`ï¼šç‰‡æ®µåœ¨æ–‡æ¡£å†…çš„ä½ç½®ï¼Œæ•°å­—è¶Šå°è¶Šé å‰ï¼ˆè‡ªç„¶æ’åºï¼‰ã€‚
    - `content -> str`ï¼šç‰‡æ®µçš„å†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `keywords -> list[str]`ï¼šå…³é”®è¯åˆ—è¡¨ï¼Œåˆ—è¡¨çš„å…ƒç´ ç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `character_count -> int`ï¼šç‰‡æ®µçš„å­—ç¬¦ä¸²é•¿åº¦ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `token_count -> int`ï¼šç‰‡æ®µçš„ token æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `hit_count -> int`ï¼šç‰‡æ®µè¢«å‘½ä¸­çš„æ¬¡æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `enabled -> bool`ï¼šç‰‡æ®µæ˜¯å¦å¯ç”¨ï¼Œtrue è¡¨ç¤ºå¯ç”¨ï¼Œfalse è¡¨ç¤ºç¦ç”¨ï¼ˆäººä¸ºç¦ç”¨æˆ–è€…ç¨‹åºå¤„ç†å¼‚å¸¸ã€æœªå¤„ç†å®Œå¯¼è‡´çš„ç¦ç”¨ï¼‰ï¼Œåªæœ‰å½“ `status` ä¸º `completed(å®Œæˆ)` æ—¶ï¼Œenabled æ‰æœ‰å¯èƒ½ä¸º trueã€‚
    - `disabled_at -> int`ï¼šç‰‡æ®µè¢«äººä¸ºç¦ç”¨çš„æ—¶é—´ï¼Œä¸º 0 è¡¨ç¤ºæ²¡æœ‰äººä¸ºç¦ç”¨ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `status -> string`ï¼šç‰‡æ®µçš„çŠ¶æ€ï¼Œæ¶µç›– `waiting(ç­‰å¾…å¤„ç†)`ã€`indexing(æ„å»ºç´¢å¼•)`ã€`completed(æ„å»ºå®Œæˆ)`ã€`error(é”™è¯¯)` ç­‰çŠ¶æ€ï¼Œä¸åŒçš„çŠ¶æ€ä»£è¡¨ä¸åŒçš„å¤„ç†ç¨‹åº¦ã€‚
    - `error -> string`ï¼šé”™è¯¯ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå½“åç«¯ç¨‹åºå¤„ç†å‡ºç°é”™è¯¯çš„æ—¶å€™ï¼Œä¼šè®°å½•é”™è¯¯ä¿¡æ¯ã€‚
    - `updated_at -> int`ï¼šç‰‡æ®µçš„æœ€åæ›´æ–°æ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ã€‚
    - `created_at -> int`ï¼šç‰‡æ®µçš„åˆ›å»ºæ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  POST:/dataset/e1baf52a-1be2-4b93-ad62-6fad72f1ec37/hit
  
  {
      "query": "LLMOps",
      "retrieval_strategy": "hybrid",
      "k": 10,
      "score": 0.4
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": [
          {
              "id": "b7087193-8e1b-4e88-8ae4-48a0f90a8ad5",
              "document": {
  				"id": "6a266b4b-d03b-4066-a4bb-f64abfe23b9d",
                  "name": "æ…•è¯¾LLMOpsé¡¹ç›®APIæ–‡æ¡£.md",
                  "extension": "md",
                  "mime_type": "md"
              },
              "dataset_id": "bde70d64-cbcc-47e7-a0f5-b51200b87c7c",
              "position": 1,
              "score": 0.54,
              "content": "ä¸ºäº†å€ŸåŠ©ç¤¾äº¤äº§å“çš„æµé‡ï¼Œè®©ç”¨æˆ·ä¸»åŠ¨åˆ†äº«APPä¸­çš„å†…å®¹åˆ°ç¤¾äº¤å¹³å°æ¥è¾¾åˆ°æ‹‰æ–°å’Œä¿ƒæ´»çš„ç›®çš„ï¼Œå¸‚åœºä¸Šç»å¤§å¤šæ•°APPéƒ½æœ‰ç¬¬ä¸‰æ–¹åˆ†äº«çš„åŠŸèƒ½ï¼Œå®ƒæ˜¯å†…å®¹åˆ†å‘çš„æœ€æœ‰æ•ˆé€”å¾„ï¼Œå¹¶ä¸”å¤§å¤§é™ä½äº†ä¼...",
              "keywords": ["ç¤¾äº¤", "App", "æˆæœ¬", "åŠŸèƒ½", "å†…å®¹åˆ†å‘"],
              "character_count": 487,
              "token_count": 407,
              "hit_count": 1,
              "enabled": true,
              "disabled_at": 0,
              "status": "completed",
              "error": "",
              "updated_at": 1726858854,
              "created_at": 1726858854
          }
      ]
  }
  ```

### 4.7 è·å–æŒ‡å®šçŸ¥è¯†åº“æœ€è¿‘çš„æŸ¥è¯¢åˆ—è¡¨

- **æ¥å£è¯´æ˜**ï¼šç”¨äºè·å–æŒ‡å®šçŸ¥è¯†åº“æœ€è¿‘çš„æŸ¥è¯¢åˆ—è¡¨ï¼Œè¯¥æ¥å£ä¼šè¿”å›æœ€è¿‘çš„ 10 æ¡è®°å½•ï¼Œæ²¡æœ‰åˆ†é¡µ+æœç´¢åŠŸèƒ½ï¼Œè¿”å›çš„æ•°æ®æ˜¯æŒ‰ç…§ `created_at` è¿›è¡Œå€’åºï¼Œå³æ•°æ®è¶Šæ–°è¶Šé å‰ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/datasets/:dataset_id/queries`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦è·å–æœ€è¿‘æŸ¥è¯¢çš„çŸ¥è¯†åº“ idï¼Œç±»å‹ä¸º uuidã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šæŸ¥è¯¢çš„è®°å½• idï¼Œç±»å‹ä¸º uuidã€‚
    - `dataset_id -> uuid`ï¼šæŸ¥è¯¢è®°å½•å…³è”çš„çŸ¥è¯†åº“ idï¼Œç±»å‹ä¸º uuidã€‚
    - `query -> str`ï¼šæŸ¥è¯¢çš„ query è¯­å¥ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `source -> str`ï¼šæŸ¥è¯¢çš„æ¥æºä¿¡æ¯ï¼Œæ”¯æŒ `Hit Testing(å¬å›æµ‹è¯•)`ã€`App(AI/Agentåº”ç”¨è°ƒç”¨)`
    - `created_at -> int`ï¼šæŸ¥è¯¢çš„æ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  GET:/dataset/e1baf52a-1be2-4b93-ad62-6fad72f1ec37/query
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": [
          {
              "id": "26834b62-8bb4-410b-a626-00aded4892b9",
              "dataset_id": "e1baf52a-1be2-4b93-ad62-6fad72f1ec37",
              "query": "æ…•è¯¾LLMOpsæ˜¯ä»€ä¹ˆ?",
              "source": "Hit Testing",
              "created_at": 1726858849
          }
      ],
      "message": ""
  }
  ```

### 4.8 è·å–æŒ‡å®šçŸ¥è¯†åº“çš„æ–‡æ¡£åˆ—è¡¨

- **æ¥å£è¯´æ˜**ï¼šç”¨äºè·å–æŒ‡å®šçŸ¥è¯†åº“ä¸‹çš„æ–‡æ¡£åˆ—è¡¨ï¼Œè¯¥æ¥å£æ”¯æŒæœç´¢+åˆ†é¡µï¼Œå¦‚æœä¼ é€’çš„æœç´¢è¯ä¸ºç©ºä»£è¡¨ä¸æœç´¢ä»»ä½•å†…å®¹ï¼Œè¿™é‡Œçš„æœç´¢è¯ä½¿ç”¨ `æ–‡æ¡£åç§°` è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/datasets/:dataset_id/documents`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦è·å–æ–‡æ¡£åˆ—è¡¨å½’å±çš„çŸ¥è¯†åº“ idï¼Œç±»å‹ä¸º uuidã€‚
    - `search_word -> str`ï¼šå¯é€‰å‚æ•°ï¼Œæœç´¢è¯ï¼Œç”¨äºæ¨¡ç³ŠåŒ¹é…æœç´¢æ–‡æ¡£åç§°ï¼Œé»˜è®¤ä¸ºç©ºä»£è¡¨ä¸æœç´¢ä»»ä½•å†…å®¹ã€‚
    - `current_page -> int`ï¼šå¯é€‰å‚æ•°ï¼Œä»£è¡¨å½“å‰é¡µæ•°ï¼Œé»˜è®¤ä¸º 1ã€‚
    - `page_size -> int`ï¼šå¯é€‰å‚æ•°ï¼Œä»£è¡¨å½“å‰æ¯é¡µçš„æ•°æ®æ¡æ•°ï¼Œé»˜è®¤ä¸º 20ï¼ŒèŒƒå›´ä» 1~50ã€‚
  - å“åº”å‚æ•°ï¼š
    - `list -> list`ï¼šåˆ†é¡µåçš„æ–‡æ¡£åˆ—è¡¨ä¿¡æ¯ã€‚
      - `id -> uuid`ï¼šæ–‡æ¡£çš„ idï¼Œç±»å‹ä¸º uuidã€‚
      - `name -> str`ï¼šæ–‡æ¡£çš„åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `character_count -> int`ï¼šæ–‡æ¡£çš„å­—ç¬¦æ€»æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `hit_count -> int`ï¼šæ–‡æ¡£çš„å¬å›å‘½ä¸­æ¬¡æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `position -> int`ï¼šæ–‡æ¡£åœ¨çŸ¥è¯†åº“ä¸­çš„ä½ç½®ï¼Œæ•°å­—è¶Šå°è¶Šé å‰ã€‚
      - `enabled -> bool`ï¼šæ–‡æ¡£æ˜¯å¦å¼€å¯ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œå¦‚æœä¸º true åˆ™è¡¨ç¤ºå¼€å¯ï¼Œfalse è¡¨ç¤ºå…³é—­ï¼Œåªæœ‰å½“çŠ¶æ€ä¸º `completed(æ„å»ºå®Œæˆ)` æ—¶è¯¥æ¥å£æ‰å¯ä»¥è®¾ç½®ä¸º trueã€‚
      - `disabled_at -> int`ï¼šæ–‡æ¡£çš„ç¦ç”¨æ—¶é—´ï¼ˆäººä¸ºç¦ç”¨çš„æ—¶å€™è®°å½•ï¼‰ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ï¼Œå¦‚æœå¼€å¯åˆ™ä¸º 0ã€‚
      - `status -> string`ï¼šæ–‡æ¡£çš„çŠ¶æ€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œæ¶µç›– `waiting(ç­‰å¾…ä¸­)`ã€`parsing(è§£æå¤„ç†ä¸­)`ã€`splitting(åˆ†å‰²ä¸­)`ã€`indexing(æ„å»ºç´¢å¼•ä¸­)`ã€`completed(æ„å»ºå®Œæˆ)`ã€`error(å‡ºé”™)` ç­‰ï¼Œåªæœ‰å½“æ„å»ºå®Œæˆæ—¶ enabled æ‰èµ·ä½œç”¨ã€‚
      - `error -> string`ï¼šé”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯åˆ™ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå½“å‡ºç°é”™è¯¯çš„æ—¶å€™ï¼Œåœ¨å‰ç«¯ UI ç•Œé¢å¯ä»¥äºˆä»¥ç›¸å…³æç¤ºã€‚
      - `updated_at -> int`ï¼šæ–‡æ¡£çš„æ›´æ–°æ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `created_at -> int`ï¼šæ–‡æ¡£çš„åˆ›å»ºæ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `paginator -> dict`ï¼šåˆ†é¡µä¿¡æ¯å­—å…¸ã€‚
      - `current_page -> int`ï¼šå½“å‰çš„é¡µæ•°ã€‚
      - `page_size -> int`ï¼šæ¯é¡µçš„æ¡æ•°ã€‚
      - `total_page -> int`ï¼šæ€»é¡µæ•°ã€‚
      - `total_record -> int`ï¼šæ€»è®°å½•æ¡æ•°ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/datasets/46db30d1-3199-4e79-a0cd-abf12fa6858f/documents
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "list": [
              {
                  "id": "bde70d64-cbcc-47e7-a0f5-b51200b87c7c",
                  "name": "LLMOpsé¡¹ç›®æç¤ºè¯.md",
                  "character_count": 4700,
                  "hit_count": 0,
                  "position": 21,
                  "enabled": true,
                  "disabled_at": 0,
                  "status": "completed",
                  "error": "",
                  "updated_at": 1726949586,
                  "created_at": 1726949586
              }
          ],
          "paginator": {
              "current_page": 1,
              "page_size": 21,
              "total_page": 1,
              "total_record": 2
          }
      },
      "message": ""
  }
  ```
  
  

### 4.9 åœ¨æŒ‡å®šçŸ¥è¯†åº“ä¸‹æ–°å¢æ–‡æ¡£

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºåœ¨æŒ‡å®šçš„çŸ¥è¯†åº“ä¸‹æ·»åŠ æ–°æ–‡æ¡£ï¼Œè¯¥æ¥å£åç«¯çš„æœåŠ¡ä¼šé•¿æ—¶é—´è¿›è¡Œå¤„ç†ï¼Œæ‰€ä»¥åœ¨åç«¯æœåŠ¡ä¸­ï¼Œåˆ›å»ºå¥½åŸºç¡€çš„ `æ–‡æ¡£ä¿¡æ¯` åæ¥å£å°±ä¼šå“åº”å‰ç«¯ï¼Œåœ¨å‰ç«¯å…³é—­é¡µé¢/æ¥å£ä¸å½±å“åç«¯é€»è¾‘çš„æ‰§è¡Œï¼Œè¯¥æ¥å£ä¸€æ¬¡æ€§æœ€å¤šå¯ä»¥ä¸Šä¼  10 ä»½æ–‡æ¡£ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/datasets/:dataset_id/documents`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œæ ‡è¯†éœ€è¦æ·»åŠ æ–‡æ¡£çš„çŸ¥è¯†åº“ idï¼Œç±»å‹ä¸º uuidã€‚
    - `upload_file_ids -> list[uuid]`ï¼šå¿…å¡«å‚æ•°ï¼Œä¼ é€’éœ€è¦æ–°å¢åˆ°çŸ¥è¯†åº“ä¸­çš„ `æ–‡ä»¶idåˆ—è¡¨`ï¼Œæœ€å¤šæ”¯æŒä¸Šä¼  10 ä»½æ–‡ä»¶ï¼Œè¦æƒ³è·å– `æ–‡ä»¶id`ï¼Œå¯ä»¥è°ƒç”¨ `æ–‡ä»¶ä¸Šä¼ æ¥å£`ã€‚
    - `process_type -> str`ï¼šå¿…å¡«å‚æ•°ï¼Œå¤„ç†ç±»å‹ï¼Œæ”¯æŒ `automatic(è‡ªåŠ¨æ¨¡å¼)` å’Œ `custom(è‡ªå®šä¹‰)`ã€‚
    - `rule -> dict`ï¼šå¯é€‰å‚æ•°ï¼Œå½“å¤„ç†ç±»å‹ä¸º `custom` æ—¶ä¸ºå¿…å¡«å‚æ•°ã€‚
      - `pre_process_rules -> list`ï¼šé¢„å¤„ç†è§„åˆ™åˆ—è¡¨ï¼Œæ¶µç›– `id` å’Œ `enabled` ä¸¤ä¸ªå±æ€§ã€‚
        - `id -> str`ï¼šé¢„å¤„ç†æ ‡è¯†ï¼Œæ”¯æŒ `remove_extra_space(ç§»é™¤å¤šä½™ç©ºæ ¼)` å’Œ `remove_url_and_email(ç§»é™¤é“¾æ¥å’Œé‚®ç®±)`
        - `enabled -> bool`ï¼šå¯¹åº”çš„é¢„å¤„ç†æ˜¯å¦å¼€å¯ã€‚
      - `segment -> dict`ï¼šç‰‡æ®µçš„å¤„ç†è§„åˆ™ï¼ŒåŒ…å«åˆ†éš”ç¬¦ã€ç‰‡æ®µå¤§å°ã€ç‰‡æ®µä¹‹é—´çš„é‡å ã€‚
        - `separators -> list[str]`ï¼šç‰‡æ®µçš„åˆ†éš”ç¬¦åˆ—è¡¨ï¼Œæ”¯æŒæ­£åˆ™åŒ¹é…ã€‚
        - `chunk_size -> int`ï¼šæ¯ä¸ªç‰‡æ®µçš„æœ€å¤§ Token æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
        - `chunk_overlap -> int`ï¼šæ¯ä¸ªç‰‡æ®µä¹‹é—´çš„é‡å åº¦ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
  - **å“åº”å‚æ•°**ï¼š
    - `documents -> list`ï¼šè¿”å›å¤„ç†çš„æ–‡æ¡£åˆ—è¡¨ï¼ŒåŒ…å«æ–‡æ¡£çš„åŸºç¡€ä¿¡æ¯ã€‚
      - `id -> uuid`ï¼šåˆ›å»ºçš„æ–‡æ¡£ idï¼Œç±»å‹ä¸º uuidã€‚
      - `name -> str`ï¼šåˆ›å»ºçš„æ–‡æ¡£åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `status -> str`ï¼šå½“å‰æ–‡æ¡£çš„çŠ¶æ€ï¼Œæ¶µç›– `waiting(ç­‰å¾…ä¸­)`ã€`parsing(è§£æå¤„ç†ä¸­)`ã€`splitting(åˆ†å‰²ä¸­)`ã€`indexing(æ„å»ºç´¢å¼•ä¸­)`ã€`completed(æ„å»ºå®Œæˆ)`ã€`error(å‡ºé”™)` ç­‰ã€‚
      - `created_at -> int`ï¼šæ–‡æ¡£çš„åˆ›å»ºæ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `batch -> str`ï¼šå½“å‰å¤„ç†çš„æ‰¹æ¬¡æ ‡è¯†ï¼Œå¯ä»¥é€šè¿‡è¯¥æ‰¹æ¬¡æ¥è·å–å¯¹åº”æ–‡æ¡£çš„å¤„ç†ä¿¡æ¯ï¼Œæ‰¹æ¬¡çš„æ ¼å¼ä¸º `%Y%m%d%H%M%S` + `100000-999999éšæœºå­—ç¬¦ä¸²`ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  POST:/datasets/46db30d1-3199-4e79-a0cd-abf12fa6858f/documents
  
  {
      "upload_file_ids": [
          "5537fc7d-22ef-416e-9535-e4faec532c54",
          "fbd81b3f-3d57-42c8-bfaa-c4b564b1306d",
          "c8bd1894-f64b-46d3-9928-54e452669f9e"
      ],
      "process_type": "custom",
      "rule": {
          "pre_proces_rules": [
              {"id": "remove_extra_space", "enabled": true},
              {"id": "remove_url_and_email", "enabled": false},
          ],
          "segment": {
              "separators": ["\n"],
              "chunk_size": 500,
              "chunk_overlap": 50,
          }
      }
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "documents": [
              {
                  "id": "c8bd1894-f64b-46d3-9928-54e452669f9e",
                  "name": "æ…•è¯¾LLMOpsé¡¹ç›®APIæ–‡æ¡£.md",
                  "status": "waiting",
                  "created_at": 1726858840
              },
              {
                  "id": "f16fa6a3-3088-4b6c-9609-85827f45e9d5",
                  "name": "æ…•è¯¾LLMOpsè¯¾ç¨‹æç¤ºè¯.md",
                  "status": "waiting",
                  "created_at": 1726858837
              }
          ],
          "batch": "20240516234156542163"
      },
      "message": ""
  }
  ```

### 4.10 æ ¹æ®æ‰¹å¤„ç†æ ‡è¯†è·å–å¤„ç†è¿›åº¦

- **æ¥å£è¯´æ˜**ï¼šæ ¹æ®ç”Ÿæˆçš„æ‰¹å¤„ç†æ ‡è¯†æŸ¥è¯¢å½“å‰æ‰¹æ¬¡ä¸‹æ–‡æ¡£çš„å¤„ç†è¿›åº¦ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/datasets/:dataset_id/documents/batch/:batch`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œæ‰¹å¤„ç†æ ‡è¯†å…³è”çš„çŸ¥è¯†åº“idï¼Œç±»å‹ä¸º uuidã€‚
    - `batch -> str`ï¼šæ‰¹å¤„ç†æ ‡è¯†ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œæ ¼å¼ä¸º  `%Y%m%d%H%M%S` + `100000-999999éšæœºå­—ç¬¦ä¸²`ã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šå¤„ç†æ–‡æ¡£çš„ idï¼Œç±»å‹ä¸º uuidã€‚
    - `name -> string`ï¼šæ–‡æ¡£çš„åå­—ï¼Œç±»å‹ä¸º uuidã€‚
    - `size -> int`ï¼šæ–‡æ¡£å…³è”çš„æ–‡ä»¶å¤§å°ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œå•ä½ä¸ºå­—èŠ‚ã€‚
    - `extension -> string`ï¼šæ–‡æ¡£çš„æ‰©å±•åï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `mime_type -> string`ï¼šæ–‡æ¡£çš„ mimetype ç±»å‹æ¨æ–­ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `position -> int`ï¼šæ–‡æ¡£åœ¨çŸ¥è¯†åº“ä¸­çš„ä½ç½®ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `segment_count -> int`ï¼šè¯¥æ–‡æ¡£ä¸‹çš„æ–‡æ¡£ç‰‡æ®µæ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `completed_segment_count -> int`ï¼šè¯¥æ–‡æ¡£ä¸‹å·²ç»å¤„ç†å®Œæˆçš„æ–‡æ¡£ç‰‡æ®µæ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `error -> str`ï¼šæ–‡æ¡£ç‰‡æ®µå¦‚æœå¤„ç†å‡ºé”™ï¼Œä¼šä½¿ç”¨è¯¥å­—æ®µè®°å½•ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `status -> str`ï¼šæ–‡æ¡£çš„çŠ¶æ€ï¼Œæ¶µç›– `waiting(ç­‰å¾…ä¸­)`ã€`parsing(è§£æå¤„ç†ä¸­)`ã€`splitting(åˆ†å‰²ä¸­)`ã€`indexing(æ„å»ºç´¢å¼•ä¸­)`ã€`completed(æ„å»ºå®Œæˆ)`ã€`error(å‡ºé”™)` ç­‰å†…å®¹ï¼Œç”¨äºå±•ç¤ºå½“å‰æ–‡æ¡£çš„è¯¦ç»†çŠ¶æ€ã€‚
    - `processing_started_at -> int`ï¼šå¼€å§‹å¤„ç†æ—¶é—´ï¼Œå½“ç¨‹åºå¼€å§‹å¤„ç†å½“å‰çš„æ–‡æ¡£æ—¶ï¼Œä¼šè®°å½•è¯¥æ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ï¼Œä¸‹ä¸€æ­¥ä¸º `è§£æ`ï¼Œå¦‚æœæ²¡æœ‰å®Œæˆåˆ™å€¼ä¸º 0ï¼Œå½“å‰çš„çŠ¶æ€ä¸º `parsing`ï¼Œä¸€å¼€å§‹çš„çŠ¶æ€ä¸º `waiting`ã€‚
    - `parsing_completed_at -> int`ï¼šè§£æå®Œæˆæ—¶é—´ï¼Œå½“ç¨‹åºåŠ è½½å®Œå½“å‰æ–‡æ¡£çš„æ—¶å€™è®°å½•çš„æ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ï¼Œä¸‹ä¸€æ­¥ä¸º `åˆ†å‰²`ï¼Œå¦‚æœæ²¡æœ‰å®Œæˆï¼Œåˆ™å€¼ä¸º 0ï¼Œå½“å‰çš„çŠ¶æ€ä¸º `splitting`ï¼Œä»£è¡¨ä¸‹ä¸€æ­¥éœ€è¦åˆ†å‰²ï¼Œå› ä¸ºè§£æå·²ç»ç»“æŸã€‚
    - `splitting_completed_at -> int`ï¼šåˆ†å‰²å®Œæˆæ—¶é—´ï¼Œå½“ç¨‹åºä½¿ç”¨åˆ†å‰²å™¨å¤„ç†å®Œè¯¥æ–‡æ¡£æ—¶è®°å½•çš„æ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ï¼Œä¸‹ä¸€æ­¥ä¸º `æ„å»º(ç´¢å¼•æ„å»º+å…³é”®è¯æ„å»º)`ï¼Œå¦‚æœæ²¡æœ‰å®Œæˆï¼Œåˆ™å€¼ä¸º 0ï¼Œå½“å‰çš„çŠ¶æ€ä¸º `indexing`ï¼Œä»£è¡¨ä¸‹ä¸€æ­¥éœ€è¦æ„å»ºç´¢å¼•ï¼Œå½“å‰åˆ†å‰²å·²ç»“æŸã€‚
    - `completed_at -> int`ï¼šæ„å»ºå®Œæˆæ—¶é—´ï¼Œå½“ç¨‹åºä½¿ç”¨ Embeddings æ–‡æœ¬åµŒå…¥æ¨¡å‹ä»¥åŠåˆ†è¯å™¨å®Œæˆå‘é‡è½¬æ¢+å…³é”®è¯æå–åŠ¨ä½œçš„æ—¶å€™è®°å½•çš„æ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ï¼Œè¯¥é˜¶æ®µä¸ºæœ€åä¸€ä¸ªé˜¶æ®µï¼Œå¦‚æœæ²¡æœ‰å®Œæˆï¼Œåˆ™å€¼ä¸º 0ï¼ŒçŠ¶æ€ä¸º `completed` ä»£è¡¨å¤„ç†å®Œæˆã€‚
    - `stopped_at -> int`ï¼šåœæ­¢æ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ï¼Œæ–‡æ¡£æ²¡æœ‰æ­£å¸¸å¤„ç†å®Œæˆçš„æ—¶å€™ï¼Œè®°å½•çš„æ—¶é—´ï¼Œå¦‚æœæ²¡æœ‰åœæ­¢ï¼Œåˆ™å€¼ä¸º 0ï¼Œå½“å‰çŠ¶æ€ä¸º `error`ï¼Œä»£è¡¨å‡ºé”™äº†ã€‚
    - `created_at -> int`ï¼šæ–‡æ¡£çš„è®°å½•åˆ›å»ºæ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET://datasets/46db30d1-3199-4e79-a0cd-abf12fa6858f/documents/batch/20240516234156542163
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": [
          {
              "completed_at": 1728227098,
              "completed_segment_count": 60,
              "created_at": 1728198253,
              "error": "",
              "extension": "md",
              "id": "6ddd7c75-a379-41ed-8f93-3e9bd766c850",
              "mime_type": "text/markdown",
              "name": "é¡¹ç›®APIæ–‡æ¡£-å®Œæ•´.md",
              "parsing_completed_at": 1728227070,
              "position": 2,
              "processing_started_at": 1728227065,
              "segment_count": 60,
              "size": 94003,
              "splitting_completed_at": 1728227072,
              "status": "completed",
              "stopped_at": 0
          }
      ],
      "message": ""
  }
  ```

### 4.11 æ›´æ–°æŒ‡å®šæ–‡æ¡£åŸºç¡€åç§°

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºæ›´å®šç‰¹å®šçš„æ–‡æ¡£åŸºç¡€ä¿¡æ¯ï¼ˆæ–‡æ¡£çš„åç§°ï¼‰ï¼Œåœ¨åŒä¸€ä¸ª `çŸ¥è¯†åº“` ä¸­ï¼Œæ–‡æ¡£æ˜¯å¯ä»¥å‡ºç°é‡åçš„ï¼Œå¹¶ä¸”æ–‡æ¡£æ›´æ–°åçš„åç§°é•¿åº¦ä¸èƒ½è¶…è¿‡100ä¸ªå­—ç¬¦ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/datasets/:dataset_id/documents/:document_id/name`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œè¯¥æ–‡æ¡£å½’å±çš„çŸ¥è¯†åº“ idï¼Œç±»å‹ä¸º uuidã€‚
    - `document_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦æ›´æ–°çš„æ–‡æ¡£ idï¼Œç±»å‹ä¸º uuidã€‚
    - `name -> str`ï¼šéœ€è¦æ›´æ–°çš„æ–‡æ¡£åç§°ï¼Œé•¿åº¦ä¸èƒ½è¶…è¿‡ 100 ä¸ªå­—ç¬¦ï¼Œå¿…å¡«ï¼Œä¸èƒ½ä¸ºç©ºï¼Œæ›´æ–°çš„æ–‡æ¡£åå­—ä¸å¿…ä½¿ç”¨å¯¹åº”çš„æ‰©å±•ï¼Œå¯ä»¥ä»»æ„èµ·åã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  POST:/datasets/bde70d64-cbcc-47e7-a0f5-b51200b87c7c/documents/6a266b4b-d03b-4066-a4bb-f64abfe23b9d
  
  {
      "name": "åŸºäºå·¥å…·è°ƒç”¨çš„æ™ºèƒ½ä½“è®¾è®¡ä¸å®ç°.md"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "æ›´æ–°æ–‡æ¡£ä¿¡æ¯æˆåŠŸ"
  }
  ```

### 4.12 æ›´æ”¹æŒ‡å®šæ–‡æ¡£çš„å¯ç”¨çŠ¶æ€

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºæ›´æ”¹æŒ‡å®šæ–‡æ¡£çš„å¯ç”¨çŠ¶æ€ï¼Œä¾‹å¦‚ `å¼€å¯` æˆ– `å…³é—­`ï¼Œå¹¶ä¸”è¯¥æ¥å£åªæœ‰åœ¨ `æ–‡æ¡£` çŠ¶æ€ä¸º `completed(å®Œæˆ)` æ—¶æ‰å¯ä»¥åšç›¸åº”çš„æ›´æ–°è°ƒæ•´ï¼Œå¦åˆ™ä¼šæŠ›å‡ºé”™è¯¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/datasets/:dataset_id/documents/:document_id/enabled`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œè¯¥æ–‡æ¡£å½’å±çš„çŸ¥è¯†åº“ idï¼Œç±»å‹ä¸º uuidã€‚
    - `document_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦æ›´æ–°çš„æ–‡æ¡£ idï¼Œç±»å‹ä¸º uuidã€‚
    - `enabled -> bool`ï¼šå¯¹åº”æ–‡æ¡£çš„çŠ¶æ€ï¼Œtrue ä¸ºå¼€å¯ï¼Œfalse ä¸ºå…³é—­ï¼Œåªæœ‰å½“æ–‡æ¡£å¤„ç†å®Œæˆåï¼Œæ‰å¯ä»¥ä¿®æ”¹ï¼Œæ–‡æ¡£å¦‚æœæ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼Œå°† `enabled` ä¿®æ”¹ä¸º trueï¼Œä¼šæŠ›å‡ºé”™è¯¯ä¿¡æ¯ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  POST://datasets/bde70d64-cbcc-47e7-a0f5-b51200b87c7c/documents/6a266b4b-d03b-4066-a4bb-f64abfe23b9d/enabled
  
  {
      "enabled": false
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "æ›´æ”¹æ–‡æ¡£å¯ç”¨çŠ¶æ€æˆåŠŸ"
  }
  ```

### 4.13 è·å–æŒ‡å®šæ–‡æ¡£åŸºç¡€ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºè·å–æŒ‡å®šæ–‡æ¡£çš„åŸºç¡€ä¿¡æ¯ï¼Œä¸»è¦ç”¨äºå±•ç¤ºæ–‡æ¡£ç‰‡æ®µä¿¡æ¯+æ›´æ–°æ–‡æ¡£ä¿¡æ¯å¯¹åº”çš„é¡µé¢ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/datasets/:dataset_id/documents/:document_id`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œè¯¥æ–‡æ¡£å½’å±çš„çŸ¥è¯†åº“ idï¼Œç±»å‹ä¸º uuidã€‚
    - `document_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦è·å–ä¿¡æ¯çš„ `æ–‡æ¡£id`ï¼Œç±»å‹ä¸º uuidã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šæ–‡æ¡£çš„ idï¼Œç±»å‹ä¸º uuidã€‚
    - `dataset_id -> uuid`ï¼šæ–‡æ¡£å½’å±çš„çŸ¥è¯†åº“ idï¼Œç±»å‹ä¸º uuidã€‚
    - `name -> str`ï¼šæ–‡æ¡£çš„åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `segment_count -> int`ï¼šæ–‡æ¡£çš„ç‰‡æ®µæ€»æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `character_count -> int`ï¼šæ–‡æ¡£çš„å­—ç¬¦æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `hit_count -> int`ï¼šæ–‡æ¡£çš„å‘½ä¸­æ¬¡æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `position -> int`ï¼šæ–‡æ¡£çš„ä½ç½®ï¼Œæ•°å­—è¶Šå°è¶Šé å‰ï¼ˆè‡ªç„¶æ’åºï¼‰ã€‚
    - `enabled -> bool`ï¼šæ–‡æ¡£çš„å¯ç”¨çŠ¶æ€ï¼Œtrue è¡¨ç¤ºå¯ç”¨ï¼Œfalse è¡¨ç¤ºå·²ç¦ç”¨ï¼ˆå¤šç§åŸå› ç¦ç”¨ï¼‰ã€‚
    - `disabled_at -> int`ï¼šæ–‡æ¡£çš„ç¦ç”¨æ—¶é—´ï¼ˆäººä¸ºç¦ç”¨æ—¶æ·»åŠ ï¼‰ï¼Œé»˜è®¤ä¸º 0 è¡¨ç¤ºæ— äººå·¥ç¦ç”¨ã€‚
    - `status -> string`ï¼šæ–‡æ¡£çš„çŠ¶æ€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œæ¶µç›– `waiting(ç­‰å¾…ä¸­)`ã€`parsing(è§£æå¤„ç†ä¸­)`ã€`splitting(åˆ†å‰²ä¸­)`ã€`indexing(æ„å»ºç´¢å¼•ä¸­)`ã€`completed(æ„å»ºå®Œæˆ)`ã€`error(å‡ºé”™)` ç­‰ï¼Œåªæœ‰å½“æ„å»ºå®Œæˆæ—¶ enabled æ‰èµ·ä½œç”¨ã€‚
    - `error -> string`ï¼šé”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯åˆ™ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå½“å‡ºç°é”™è¯¯çš„æ—¶å€™ï¼Œåœ¨å‰ç«¯ UI ç•Œé¢å¯ä»¥äºˆä»¥ç›¸å…³æç¤ºã€‚
    - `updated_at -> int`ï¼šæ–‡æ¡£çš„æ›´æ–°æ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `created_at -> int`ï¼šæ–‡æ¡£çš„åˆ›å»ºæ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/datasets/bde70d64-cbcc-47e7-a0f5-b51200b87c7c/documents/6a266b4b-d03b-4066-a4bb-f64abfe23b9d
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "id": "6196a3bc-2c81-40b8-83a5-25ad837f5a84",
          "dataset_id": "bde70d64-cbcc-47e7-a0f5-b51200b87c7c",
          "name": "åŸºäºå·¥å…·è°ƒç”¨çš„æ™ºèƒ½ä½“è®¾è®¡ä¸å®ç°.md",
          "segment_count": 15,
          "character_count": 4700,
          "hit_count": 0,
          "position": 21,
          "enabled": true,
          "disabled_at": 0,
          "status": "completed",
          "error": "",
          "updated_at": 1726949586,
          "created_at": 1726949586
      },
      "message": ""
  }
  ```

### 4.14 åˆ é™¤æŒ‡å®šæ–‡æ¡£ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¼šæ ¹æ®ä¼ é€’çš„ä¿¡æ¯åˆ é™¤æ–‡æ¡£ä¿¡æ¯ï¼Œå¹¶åˆ é™¤è¯¥æ–‡æ¡£ä¸‹çš„ç‰‡æ®µä¿¡æ¯ï¼ŒåŒæ—¶ä¼šå°†æ“ä½œåŒæ­¥åˆ°å‘é‡æ•°æ®åº“ï¼Œåœ¨å‘é‡æ•°æ®åº“ä¸­åˆ é™¤å½’å±è¯¥æ–‡æ¡£çš„æ‰€æœ‰ç‰‡æ®µä¿¡æ¯ï¼Œè¯¥æ¥å£å±äºè€—æ—¶æ¥å£ï¼Œæ‰€ä»¥åœ¨åç«¯ä½¿ç”¨å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—çš„æ–¹å¼è¿›è¡Œæ“ä½œï¼Œå®ŒæˆåŸºç¡€ä¿¡æ¯çš„åˆ é™¤ï¼ˆä¾‹å¦‚æ–‡æ¡£è®°å½•ï¼‰åï¼Œæ¥å£å³ä¼šæ­£å¸¸å“åº”å‰ç«¯ï¼ˆåˆ é™¤æ–‡æ¡£ã€æ–‡æ¡£ç‰‡æ®µã€å…³é”®è¯è¡¨æ•°æ®ã€weaviateæ•°æ®ï¼ŒåŒæ—¶åœ¨åˆ é™¤çš„æ—¶å€™éœ€è¦ä¸Šé”ï¼‰ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/datasets/:dataset_id/documents/:document_id/delete`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œè¯¥æ–‡æ¡£å½’å±çš„çŸ¥è¯†åº“ idï¼Œç±»å‹ä¸º uuidã€‚
    - `document_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦åˆ é™¤çš„ `æ–‡æ¡£id`ï¼Œç±»å‹ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/datasets/bde70d64-cbcc-47e7-a0f5-b51200b87c7c/documents/6a266b4b-d03b-4066-a4bb-f64abfe23b9d/delete
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "åˆ é™¤æ–‡æ¡£æˆåŠŸ"
  }
  ```

### 4.15 è·å–æŒ‡å®šæ–‡æ¡£çš„ç‰‡æ®µåˆ—è¡¨

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºè·å–æŒ‡å®šæ–‡æ¡£çš„ç‰‡æ®µåˆ—è¡¨ï¼Œè¯¥æ¥å£æ”¯æŒåˆ†é¡µ+æœç´¢ï¼Œæœç´¢æ¨¡ç³ŠåŒ¹é…ç‰‡æ®µå†…å®¹ï¼Œå½“æœç´¢è¯ä¸ºç©ºæ—¶ä»£è¡¨ä¸è¿›è¡Œä»»ä½•æ£€ç´¢ï¼Œè¯¥æ¥å£åªè¦ `dataset_id`ã€`document_id` æœ‰ä»»æ„ä¸€ä¸ªä¸åŒ¹é…å°±ä¼šæŠ›å‡ºå¯¹åº”çš„é”™è¯¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/datasets/:dataset_id/documents/:document_id/segments`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œè¯¥ç‰‡æ®µå½’å±çš„ `çŸ¥è¯†åº“ id`ï¼Œç±»å‹ä¸º uuidã€‚
    - `document_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œè¯¥ç‰‡æ®µå½’å±çš„ `æ–‡æ¡£id`ï¼Œç±»å‹ä¸º uuidã€‚
    - `search_word -> str`ï¼šå¯é€‰å‚æ•°ï¼Œæœç´¢è¯ï¼Œç”¨äºç‰‡æ®µå†…å®¹æ¨¡ç³Šæœç´¢ï¼Œé»˜è®¤ä¸ºç©ºä»£è¡¨ä¸æœç´¢ä»»ä½•å†…å®¹ã€‚
    - `current_page -> int`ï¼šå¯é€‰å‚æ•°ï¼Œä»£è¡¨å½“å‰é¡µæ•°ï¼Œé»˜è®¤ä¸º 1ã€‚
    - `page_size -> int`ï¼šå¯é€‰å‚æ•°ï¼Œä»£è¡¨å½“å‰æ¯é¡µçš„æ•°æ®æ¡æ•°ï¼Œé»˜è®¤ä¸º 20ï¼ŒèŒƒå›´ä» 1~50ã€‚
  - å“åº”å‚æ•°ï¼š
    - `list -> list[dict]`ï¼šåˆ†é¡µåçš„æ–‡æ¡£ç‰‡æ®µåˆ—è¡¨ä¿¡æ¯ã€‚
      - `id -> uuid`ï¼šæ–‡æ¡£ç‰‡æ®µçš„ idï¼Œç±»å‹ä¸º uuidã€‚
      - `document_id -> uuid`ï¼šç‰‡æ®µå½’å±çš„ `æ–‡æ¡£id`ï¼Œç±»å‹ä¸º uuidã€‚
      - `dataset_id -> uuid`ï¼šç‰‡æ®µå½’å±çš„ `çŸ¥è¯†åº“id`ï¼Œç±»å‹ä¸º uuidã€‚
      - `position -> int`ï¼šç‰‡æ®µåœ¨æ–‡æ¡£å†…çš„ä½ç½®ï¼Œæ•°å­—è¶Šå°è¶Šé å‰ï¼ˆè‡ªç„¶æ’åºï¼‰ã€‚
      - `content -> str`ï¼šç‰‡æ®µçš„å†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `keywords -> list[str]`ï¼šå…³é”®è¯åˆ—è¡¨ï¼Œåˆ—è¡¨çš„å…ƒç´ ç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `character_count -> int`ï¼šç‰‡æ®µçš„å­—ç¬¦ä¸²é•¿åº¦ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `token_count -> int`ï¼šç‰‡æ®µçš„ token æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `hit_count -> int`ï¼šç‰‡æ®µè¢«å‘½ä¸­çš„æ¬¡æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `enabled -> bool`ï¼šç‰‡æ®µæ˜¯å¦å¯ç”¨ï¼Œtrue è¡¨ç¤ºå¯ç”¨ï¼Œfalse è¡¨ç¤ºç¦ç”¨ï¼ˆäººä¸ºç¦ç”¨æˆ–è€…ç¨‹åºå¤„ç†å¼‚å¸¸ã€æœªå¤„ç†å®Œå¯¼è‡´çš„ç¦ç”¨ï¼‰ï¼Œåªæœ‰å½“ `status` ä¸º `completed(å®Œæˆ)` æ—¶ï¼Œenabled æ‰æœ‰å¯èƒ½ä¸º trueã€‚
      - `disabled_at -> int`ï¼šç‰‡æ®µè¢«äººä¸ºç¦ç”¨çš„æ—¶é—´ï¼Œä¸º 0 è¡¨ç¤ºæ²¡æœ‰äººä¸ºç¦ç”¨ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `status -> string`ï¼šç‰‡æ®µçš„çŠ¶æ€ï¼Œæ¶µç›– `waiting(ç­‰å¾…å¤„ç†)`ã€`indexing(æ„å»ºç´¢å¼•)`ã€`completed(æ„å»ºå®Œæˆ)`ã€`error(é”™è¯¯)` ç­‰çŠ¶æ€ï¼Œä¸åŒçš„çŠ¶æ€ä»£è¡¨ä¸åŒçš„å¤„ç†ç¨‹åº¦ã€‚
      - `error -> string`ï¼šé”™è¯¯ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå½“åç«¯ç¨‹åºå¤„ç†å‡ºç°é”™è¯¯çš„æ—¶å€™ï¼Œä¼šè®°å½•é”™è¯¯ä¿¡æ¯ã€‚
      - `updated_at -> int`ï¼šç‰‡æ®µçš„æœ€åæ›´æ–°æ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ã€‚
      - `created_at -> int`ï¼šç‰‡æ®µçš„åˆ›å»ºæ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/datasets/bde70d64-cbcc-47e7-a0f5-b51200b87c7c/documents/6a266b4b-d03b-4066-a4bb-f64abfe23b9d/segments
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "list": [
              {
                  "id": "b7087193-8e1b-4e88-8ae4-48a0f90a8ad5",
                  "document_id": "6a266b4b-d03b-4066-a4bb-f64abfe23b9d",
                  "dataset_id": "bde70d64-cbcc-47e7-a0f5-b51200b87c7c",
                  "position": 1,
                  "content": "ä¸ºäº†å€ŸåŠ©ç¤¾äº¤äº§å“çš„æµé‡ï¼Œè®©ç”¨æˆ·ä¸»åŠ¨åˆ†äº«APPä¸­çš„å†…å®¹åˆ°ç¤¾äº¤å¹³å°æ¥è¾¾åˆ°æ‹‰æ–°å’Œä¿ƒæ´»çš„ç›®çš„ï¼Œå¸‚åœºä¸Šç»å¤§å¤šæ•°APPéƒ½æœ‰ç¬¬ä¸‰æ–¹åˆ†äº«çš„åŠŸèƒ½ï¼Œå®ƒæ˜¯å†…å®¹åˆ†å‘çš„æœ€æœ‰æ•ˆé€”å¾„ï¼Œå¹¶ä¸”å¤§å¤§é™ä½äº†ä¼...",
                  "keywords": ["ç¤¾äº¤", "App", "æˆæœ¬", "åŠŸèƒ½", "å†…å®¹åˆ†å‘"],
                  "character_count": 487,
                  "token_count": 407,
                  "hit_count": 1,
                  "enabled": true,
                  "disabled_at": 0,
                  "status": "completed",
                  "error": "",
                  "updated_at": 1726858854,
                  "created_at": 1726858854
              }
          ],
          "paginator": {
              "current_page": 1,
              "page_size": 21,
              "total_page": 1,
              "total_record": 2
          }
      },
      "message": ""
  }
  ```

### 4.16 æ–°å¢æ–‡æ¡£ç‰‡æ®µä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºåœ¨æŒ‡å®šæ–‡æ¡£ä¸‹æ–°å¢ `æ–‡æ¡£ç‰‡æ®µ` ä¿¡æ¯ï¼Œæ·»åŠ çš„ç‰‡æ®µä½ç½®ä¼šå¤„äºè¯¥æ–‡æ¡£çš„æœ€åï¼Œå¹¶ä¸”ç”±äºæ¯æ¬¡åªèƒ½æ–°å¢ä¸€ä¸ªæ–‡æ¡£ç‰‡æ®µï¼Œç›¸å¯¹æ¥è¯´å¹¶ä¸ä¼šè¿™ä¹ˆè€—æ—¶ï¼ˆæ— éœ€åŠ è½½åˆ†å‰²ï¼Œç›´æ¥å¹¶è¡Œæ‰§è¡Œ `å…³é”®è¯æå–`+`æ–‡æœ¬è½¬å‘é‡`ï¼‰ï¼Œæ‰€ä»¥è¯¥æ¥å£æ˜¯åŒæ­¥çš„ï¼Œæ¥å£ä¼šç­‰å¾…å¤„ç†å®Œæ¯•åå†è¿”å›ï¼Œè¯¥æ¥å£å¦‚æœä»»æ„ä¸€ä¸ª `dataset_id` æˆ– `document_id` å‡ºé”™ï¼Œéƒ½ä¼šæŠ›å‡ºå¯¹åº”çš„é”™è¯¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/datasets/:dataset_id/documents/:document_id/segments`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œè¯¥ç‰‡æ®µå½’å±çš„ `çŸ¥è¯†åº“ id`ï¼Œç±»å‹ä¸º uuidã€‚
    - `document_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œè¯¥ç‰‡æ®µå½’å±çš„ `æ–‡æ¡£id`ï¼Œç±»å‹ä¸º uuidã€‚
    - `content -> str`ï¼šç‰‡æ®µå†…å®¹ï¼ŒåŸåˆ™ä¸Šé•¿åº¦ä¸èƒ½è¶…è¿‡ 1000 ä¸ª tokenï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `keywords -> list[str]`ï¼šç‰‡æ®µå¯¹åº”çš„å…³é”®è¯åˆ—è¡¨ï¼Œå¯é€‰å‚æ•°ï¼Œå¦‚æœè¯¥å‚æ•°æ²¡æœ‰ä¼ ï¼Œåœ¨åç«¯ä¼šä½¿ç”¨ `åˆ†è¯æœåŠ¡` å¯¹ç‰‡æ®µå†…å®¹è¿›è¡Œåˆ†è¯ï¼Œå¾—åˆ°å¯¹åº”çš„å…³é”®è¯ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  POST:/datasets/bde70d64-cbcc-47e7-a0f5-b51200b87c7c/documents/6a266b4b-d03b-4066-a4bb-f64abfe23b9d/segments
  
  {
      "content": "## è§’è‰² ä½ æ˜¯ä¸€ä¸ªæ‹¥æœ‰10å¹´ç»éªŒçš„èµ„æ·±Pythonå·¥ç¨‹å¸ˆï¼Œç²¾é€šFlaskï¼ŒFlask-SQLAlchemyï¼ŒPostgresï¼Œä»¥åŠå…¶ä»–Pythonå¼€å‘å·¥å…·ï¼Œèƒ½å¤Ÿä¸ºç”¨æˆ·æå‡ºçš„éœ€æ±‚æˆ–è€…æä¾›çš„ä»£ç æ®µç”ŸæˆæŒ‡å®šçš„",
      "keywords": ["Python", "Flask", "å·¥ç¨‹å¸ˆ"]
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "æ–°å¢æ–‡æ¡£ç‰‡æ®µæˆåŠŸ"
  }
  ```

### 4.17 åˆ é™¤å¯¹åº”çš„æ–‡æ¡£ç‰‡æ®µä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºåˆ é™¤å¯¹åº”çš„æ–‡æ¡£ç‰‡æ®µä¿¡æ¯ï¼Œå¹¶ä¸”è¯¥æ“ä½œä¼šåŒæ­¥åˆ°å‘é‡æ•°æ®åº“ä¸­å¹¶è¡Œåˆ é™¤ï¼Œå¹¶ä¸”ç”±äºè¯¥æ¥å£æ“ä½œçš„æ•°æ®æ¯”è¾ƒå°‘ï¼Œæ²¡æœ‰è€—æ—¶æ“ä½œï¼Œæ‰€ä»¥æ— éœ€åœ¨åç«¯å¼‚æ­¥æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæˆåæ¥å£ä¼šæ­£å¸¸å“åº”ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/datasets/:dataset_id/documents/:document_id/segments/:segment_id/delete`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œè¯¥ç‰‡æ®µå½’å±çš„ `çŸ¥è¯†åº“ id`ï¼Œç±»å‹ä¸º uuidã€‚
    - `document_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œè¯¥ç‰‡æ®µå½’å±çš„ `æ–‡æ¡£id`ï¼Œç±»å‹ä¸º uuidã€‚
    - `segment_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦åˆ é™¤çš„ `ç‰‡æ®µid`ï¼Œç±»å‹ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/datasets/bde70d64-cbcc-47e7-a0f5-b51200b87c7c/documents/6a266b4b-d03b-4066-a4bb-f64abfe23b9d/segments/26834b62-8bb4-410b-a626-00aded4892b9/delete
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "åˆ é™¤æ–‡æ¡£ç‰‡æ®µæˆåŠŸ"
  }
  ```

### 4.18 ä¿®æ”¹æ–‡æ¡£ç‰‡æ®µå†…å®¹

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºä¿®æ”¹æŒ‡å®šçš„æ–‡æ¡£ç‰‡æ®µä¿¡æ¯ï¼Œæ”¯æŒä¿®æ”¹ `å†…å®¹`ã€`å…³é”®è¯`ï¼Œä¿®æ”¹çš„æ•°æ®ä¼šåŒå‘åŒæ­¥åˆ° `ä¸šåŠ¡æ•°æ®åº“` å’Œ `å‘é‡æ•°æ®åº“`ï¼Œå¹¶ä¸”ç”±äºè¯¥æ¥å£ä¿®æ”¹çš„æ•°æ®æ¯”è¾ƒå°‘ï¼Œè€—æ—¶ç›¸å¯¹è¾ƒçŸ­ï¼Œæ‰€ä»¥åœ¨åç«¯æ— éœ€å¼‚æ­¥å¤„ç†ï¼Œæ“ä½œå®Œæˆåæ¥å£è¿›è¡Œå“åº”ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/datasets/:dataset_id/documents/:document_id/segments/:segment_id`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œè¯¥ã€ç‰‡æ®µå½’å±çš„ `çŸ¥è¯†åº“ id`ï¼Œç±»å‹ä¸º uuidã€‚
    - `document_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œè¯¥ç‰‡æ®µå½’å±çš„ `æ–‡æ¡£id`ï¼Œç±»å‹ä¸º uuidã€‚
    - `segment_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦ä¿®æ”¹çš„ `ç‰‡æ®µid`ï¼Œç±»å‹ä¸º uuidã€‚
    - `content -> str`ï¼šç‰‡æ®µå†…å®¹ï¼ŒåŸåˆ™ä¸Šé•¿åº¦ä¸èƒ½è¶…è¿‡ 1000 ä¸ª tokenï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `keywords -> list[str]`ï¼šç‰‡æ®µå¯¹åº”çš„å…³é”®è¯åˆ—è¡¨ï¼Œå¯é€‰å‚æ•°ï¼Œå¦‚æœè¯¥å‚æ•°æ²¡æœ‰ä¼ ï¼Œåœ¨åç«¯ä¼šä½¿ç”¨ `åˆ†è¯æœåŠ¡` å¯¹ç‰‡æ®µå†…å®¹è¿›è¡Œåˆ†è¯ï¼Œå¾—åˆ°å¯¹åº”çš„å…³é”®è¯ï¼›ä¼ é€’äº†å‚æ•°åˆ™ä¸ä¼šè°ƒç”¨ `åˆ†è¯æœåŠ¡`ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  POST:/datasets/bde70d64-cbcc-47e7-a0f5-b51200b87c7c/documents/6a266b4b-d03b-4066-a4bb-f64abfe23b9d/segments/26834b62-8bb4-410b-a626-00aded4892b9
  
  {
      "content": "## è§’è‰² ä½ æ˜¯ä¸€ä¸ªæ‹¥æœ‰10å¹´ç»éªŒçš„èµ„æ·±Pythonå·¥ç¨‹å¸ˆï¼Œç²¾é€šFlaskï¼ŒFlask-SQLAlchemyï¼ŒPostgresï¼Œä»¥åŠå…¶ä»–Pythonå¼€å‘å·¥å…·ï¼Œèƒ½å¤Ÿä¸ºç”¨æˆ·æå‡ºçš„éœ€æ±‚æˆ–è€…æä¾›çš„ä»£ç æ®µç”ŸæˆæŒ‡å®šçš„",
      "keywords": ["Python", "Flask", "å·¥ç¨‹å¸ˆ"]
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "ä¿®æ”¹æ–‡æ¡£ç‰‡æ®µä¿¡æ¯æˆåŠŸ"
  }
  ```

### 4.19 æ›´æ–°æ–‡æ¡£ç‰‡æ®µçš„å¯ç”¨çŠ¶æ€

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºæ›´æ–°æ–‡æ¡£ç‰‡æ®µçš„å¯ç”¨çŠ¶æ€ï¼Œä¾‹å¦‚ `å¯ç”¨` æˆ– `ç¦ç”¨`ï¼Œè¯¥æ¥å£ä¼šåŒæ­¥æ›´æ–° `ä¸šåŠ¡æ•°æ®åº“` å’Œ `å‘é‡æ•°æ®åº“`ï¼Œå¹¶ä¸”è€—æ—¶è¾ƒçŸ­ï¼Œæ‰€ä»¥æ— éœ€æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/datasets/:dataset_id/documents/:document_id/segments/:segment_id/enabled`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œè¯¥ç‰‡æ®µå½’å±çš„ `çŸ¥è¯†åº“ id`ï¼Œç±»å‹ä¸º uuidã€‚
    - `document_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œè¯¥ç‰‡æ®µå½’å±çš„ `æ–‡æ¡£id`ï¼Œç±»å‹ä¸º uuidã€‚
    - `segment_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦ä¿®æ”¹çš„ `ç‰‡æ®µid`ï¼Œç±»å‹ä¸º uuidã€‚
    - `enabled -> bool`ï¼šå¯¹åº”ç‰‡æ®µçš„çŠ¶æ€ï¼Œtrue ä¸ºå¼€å¯ï¼Œfalse ä¸ºå…³é—­ï¼Œåªæœ‰å½“æ–‡æ¡£ç‰‡æ®µå¤„ç†å®Œæˆåï¼Œæ‰å¯ä»¥ä¿®æ”¹ï¼Œæ–‡æ¡£å¦‚æœæ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼Œå°† `enabled` ä¿®æ”¹ä¸º trueï¼Œä¼šæŠ›å‡ºé”™è¯¯ä¿¡æ¯ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  POST:/datasets/bde70d64-cbcc-47e7-a0f5-b51200b87c7c/documents/6a266b4b-d03b-4066-a4bb-f64abfe23b9d/segments/26834b62-8bb4-410b-a626-00aded4892b9
  
  {
      "enabled": false
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "ä¿®æ”¹ç‰‡æ®µçŠ¶æ€æˆåŠŸ"
  }

### 4.20 æŸ¥è¯¢æ–‡æ¡£ç‰‡æ®µä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºæŸ¥è¯¢å¯¹åº”çš„æ–‡æ¡£ç‰‡æ®µä¿¡æ¯ï¼Œæ¶µç›–äº†ç‰‡æ®µå†…å®¹ã€å…³é”®è¯ã€çŠ¶æ€ã€å­—ç¬¦æ•°ã€å¬å›æ¬¡æ•°ã€åˆ›å»ºæ—¶é—´ç­‰å†…å®¹ï¼Œå¹¶ä¸”è¦æ±‚ä¼ é€’çš„ `dataset_id`ã€`document_id`ã€`segment_id` ä¿æŒä¸€è‡´ï¼Œå¦åˆ™ä¼šæŠ›å‡ºé”™è¯¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/datasets/:dataset_id/documents/:document_id/segments/:segment_id`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `dataset_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œè¯¥ç‰‡æ®µå½’å±çš„ `çŸ¥è¯†åº“ id`ï¼Œç±»å‹ä¸º uuidã€‚
    - `document_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œè¯¥ç‰‡æ®µå½’å±çš„ `æ–‡æ¡£id`ï¼Œç±»å‹ä¸º uuidã€‚
    - `segment_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦æŸ¥è¯¢çš„ `ç‰‡æ®µid`ï¼Œç±»å‹ä¸º uuidã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šæ–‡æ¡£ç‰‡æ®µçš„ idï¼Œç±»å‹ä¸º uuidã€‚
    - `document_id -> uuid`ï¼šç‰‡æ®µå½’å±çš„ `æ–‡æ¡£id`ï¼Œç±»å‹ä¸º uuidã€‚
    - `dataset_id -> uuid`ï¼šç‰‡æ®µå½’å±çš„ `çŸ¥è¯†åº“id`ï¼Œç±»å‹ä¸º uuidã€‚
    - `position -> int`ï¼šç‰‡æ®µåœ¨æ–‡æ¡£å†…çš„ä½ç½®ï¼Œæ•°å­—è¶Šå°è¶Šé å‰ï¼ˆè‡ªç„¶æ’åºï¼‰ã€‚
    - `content -> str`ï¼šç‰‡æ®µçš„å†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `keywords -> list[str]`ï¼šå…³é”®è¯åˆ—è¡¨ï¼Œåˆ—è¡¨çš„å…ƒç´ ç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `character_count -> int`ï¼šç‰‡æ®µçš„å­—ç¬¦ä¸²é•¿åº¦ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `token_count -> int`ï¼šç‰‡æ®µçš„ token æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `hit_count -> int`ï¼šç‰‡æ®µè¢«å‘½ä¸­çš„æ¬¡æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `hash -> str`ï¼šç‰‡æ®µå†…å®¹çš„å“ˆå¸Œå€¼ï¼Œç”¨äºç¡®å®šå”¯ä¸€çš„ç‰‡æ®µå†…å®¹ã€‚
    - `enabled -> bool`ï¼šç‰‡æ®µæ˜¯å¦å¯ç”¨ï¼Œtrue è¡¨ç¤ºå¯ç”¨ï¼Œfalse è¡¨ç¤ºç¦ç”¨ï¼ˆäººä¸ºç¦ç”¨æˆ–è€…ç¨‹åºå¤„ç†å¼‚å¸¸ã€æœªå¤„ç†å®Œå¯¼è‡´çš„ç¦ç”¨ï¼‰ï¼Œåªæœ‰å½“ `status` ä¸º `completed(å®Œæˆ)` æ—¶ï¼Œenabled æ‰æœ‰å¯èƒ½ä¸º trueã€‚
    - `disabled_at -> int`ï¼šç‰‡æ®µè¢«äººä¸ºç¦ç”¨çš„æ—¶é—´ï¼Œä¸º 0 è¡¨ç¤ºæ²¡æœ‰äººä¸ºç¦ç”¨ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `status -> string`ï¼šç‰‡æ®µçš„çŠ¶æ€ï¼Œæ¶µç›– `waiting(ç­‰å¾…å¤„ç†)`ã€`indexing(æ„å»ºç´¢å¼•)`ã€`completed(æ„å»ºå®Œæˆ)`ã€`error(é”™è¯¯)` ç­‰çŠ¶æ€ï¼Œä¸åŒçš„çŠ¶æ€ä»£è¡¨ä¸åŒçš„å¤„ç†ç¨‹åº¦ã€‚
    - `error -> string`ï¼šé”™è¯¯ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå½“åç«¯ç¨‹åºå¤„ç†å‡ºç°é”™è¯¯çš„æ—¶å€™ï¼Œä¼šè®°å½•é”™è¯¯ä¿¡æ¯ã€‚
    - `updated_at -> int`ï¼šç‰‡æ®µçš„æœ€åæ›´æ–°æ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ã€‚
    - `created_at -> int`ï¼šç‰‡æ®µçš„åˆ›å»ºæ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/datasets/bde70d64-cbcc-47e7-a0f5-b51200b87c7c/documents/6a266b4b-d03b-4066-a4bb-f64abfe23b9d/segments/26834b62-8bb4-410b-a626-00aded4892b9
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "id": "b7087193-8e1b-4e88-8ae4-48a0f90a8ad5",
          "document_id": "6a266b4b-d03b-4066-a4bb-f64abfe23b9d",
          "dataset_id": "bde70d64-cbcc-47e7-a0f5-b51200b87c7c",
          "position": 1,
          "content": "ä¸ºäº†å€ŸåŠ©ç¤¾äº¤äº§å“çš„æµé‡ï¼Œè®©ç”¨æˆ·ä¸»åŠ¨åˆ†äº«APPä¸­çš„å†…å®¹åˆ°ç¤¾äº¤å¹³å°æ¥è¾¾åˆ°æ‹‰æ–°å’Œä¿ƒæ´»çš„ç›®çš„ï¼Œå¸‚åœºä¸Šç»å¤§å¤šæ•°APPéƒ½æœ‰ç¬¬ä¸‰æ–¹åˆ†äº«çš„åŠŸèƒ½ï¼Œå®ƒæ˜¯å†…å®¹åˆ†å‘çš„æœ€æœ‰æ•ˆé€”å¾„ï¼Œå¹¶ä¸”å¤§å¤§é™ä½äº†ä¼...",
          "keywords": ["ç¤¾äº¤", "App", "æˆæœ¬", "åŠŸèƒ½", "å†…å®¹åˆ†å‘"],
          "character_count": 487,
          "token_count": 407,
          "hit_count": 1,
          "hash": "6d867db429d26ea426d6b67a88fce43e74760d039e9e2925f0083b7acb1f066a",
          "enabled": true,
          "disabled_at": 0,
          "status": "completed",
          "error": "",
          "updated_at": 1726858854,
          "created_at": 1726858854
      },
      "message": ""
  }
  ```

## 05. ä¼šè¯äº¤æµæ¨¡å—

### 5.1 è·å–æŒ‡å®šåº”ç”¨çš„ä¼šè¯åˆ—è¡¨

- **æ¥å£è¯´æ˜**ï¼šç”¨äºè·å–åœ¨æŸä¸ªåº”ç”¨ä¸‹æ‰€æœ‰æœªåˆ é™¤çš„ä¼šè¯åˆ—è¡¨ä¿¡æ¯ï¼Œè¯¥æ¥å£ä¸æ”¯æŒåˆ†é¡µï¼Œä¼šä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰ä¼šè¯çš„åŸºç¡€ä¿¡æ¯ï¼Œå¹¶ä¸”è¿”å›çš„æ•°æ®æ˜¯å½“å‰ç™»å½•è´¦å·çš„æ•°æ®ï¼Œä¼ é€’ `is_pinned` å‚æ•°æ—¶å¯ä»¥è·å– `ç½®é¡¶` çš„ä¼šè¯ï¼Œå¦åˆ™è·å– `éç½®é¡¶` ä¼šè¯ï¼Œå¦‚æœè¯¥åº”ç”¨è¢«åˆ é™¤ï¼Œåˆ™ä¼šè¯ä¿¡æ¯é¡µæ— æ³•è®¿é—®ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/web-apps/:token/conversations`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `token -> str`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦è·å–åº”ç”¨çš„ token å‡­è¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `is_pinned -> bool`ï¼šæ˜¯å¦è·å–ç½®é¡¶çš„ä¼šè¯åˆ—è¡¨ï¼Œé»˜è®¤ä¸º False è¡¨ç¤ºè·å–éç½®é¡¶æ•°æ®ï¼Œä¼ é€’ True è¡¨ç¤ºè·å–ç½®é¡¶æ•°æ®ã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šä¼šè¯å¯¹åº”çš„ä¼šè¯ idï¼Œç±»å‹ä¸º uuidã€‚
    - `name -> str`ï¼šä¼šè¯çš„åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `summary -> str`ï¼šä¼šè¯çš„æ‘˜è¦æ€»ç»“ä¿¡æ¯ï¼ˆé•¿è®°å¿†ï¼‰ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `created_at -> int`ï¼šä¼šè¯åˆ›å»ºçš„æ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/web-apps/1550b71asdfd94/conversations?is_pinned=true
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": [
          {
              "id": "2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8",
              "name": "ç”¨æˆ·å’¨è¯¢ä»€ä¹ˆæ˜¯LLM?",
              "summary": "",
              "created_at": 1714053834
          }
      ],
      "message": ""
  }
  ```

  

### 5.2 è·å–æŒ‡å®šä¼šè¯çš„æ¶ˆæ¯åˆ—è¡¨

- **æ¥å£è¯´æ˜**ï¼šç”¨äºè·å–åº”ç”¨æŒ‡å®šä¼šè¯çš„æ¶ˆæ¯åˆ—è¡¨ä¿¡æ¯ï¼Œè¯¥æ¥å£æ”¯æŒåˆ†é¡µï¼Œé»˜è®¤å•æ¬¡è¿”å› 20 æ¡æ•°æ®ï¼ˆ20 è½®å¯¹è¯ï¼‰ï¼Œåœ¨åˆ†é¡µæ—¶ä½¿ç”¨æ—¶é—´è¿›è¡Œå€’åºï¼Œä»¥ç¬¦åˆèŠå¤©ç•Œé¢çš„é€»è¾‘ï¼Œè¯¥æ¥å£ä¼šåœ¨åç«¯æ£€æµ‹å½“å‰ç™»å½•è´¦å·ä¸è¯¥ä¼šè¯çš„æƒé™å…³ç³»ï¼Œå¦‚æœæƒé™æ ¡éªŒå¤±è´¥ï¼Œåˆ™ä¼šæŠ›å‡ºé”™è¯¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/conversations/:conversation_id/messages`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `current_page -> int`ï¼šå½“å‰çš„é¡µæ•°ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œé»˜è®¤ä¸º 1ã€‚
    - `page_size -> int`ï¼šæ¯é¡µçš„æ¡æ•°ï¼Œè¿™é‡Œçš„ä¸€æ¡æ•°æ®è¡¨ç¤ºä¸€è½®å¯¹è¯ï¼Œé»˜è®¤ä¸º 20ï¼ŒèŒƒå›´ä»1-50ã€‚
    - `created_at -> int`ï¼šåˆ›å»ºæ—¶é—´æ¸¸æ ‡ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œé»˜è®¤ä¸º0ã€‚
  - å“åº”å‚æ•°ï¼š
    - `list -> list`ï¼šåˆ†é¡µåçš„æ¶ˆæ¯åˆ—è¡¨æ•°æ®ã€‚
      - `id -> uuid`ï¼šä¼šè¯æ¶ˆæ¯ idï¼Œç±»å‹ä¸º uuidã€‚
      - `conversation_id -> uuid`ï¼šæ¶ˆæ¯å…³è”çš„ä¼šè¯ idï¼Œç±»å‹ä¸º uuidã€‚
      - `query -> str`ï¼šäººç±»æå‡ºçš„é—®é¢˜/æŸ¥è¯¢ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `image_urls -> list[str]`ï¼šç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡åˆ—è¡¨ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ã€‚
      - `answer -> str`ï¼šAI ç”Ÿæˆçš„æœ€ç»ˆç­”æ¡ˆï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `total_token_count -> int`ï¼šæ¶ˆæ¯æ¶ˆè€—çš„æ€» token æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `latency -> float`ï¼šè¯¥æ¡æ¶ˆæ¯å“åº”çš„æ—¶é—´ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ã€‚
      - `agent_thoughts -> list[dict]`ï¼šAgent æ™ºèƒ½ä½“äº§ç”Ÿè¯¥æ¡æ¶ˆæ¯çš„æ¨ç†ä¸­é—´æ­¥éª¤ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ï¼Œæ•°æ®ä¼šæŒ‰ç…§ `position` å­—å…¸è¿›è¡Œå¢åºæ’åºï¼Œä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰çš„æ¨ç†åˆ—è¡¨ã€‚
        - `id -> uuid`ï¼šæ¨ç†æ­¥éª¤å¯¹åº”çš„ idï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
        - `position -> int`ï¼šæ¨ç†æ­¥éª¤æ‰€åœ¨çš„ä½ç½®ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
        - `event -> str`ï¼šæ¨ç†äº‹ä»¶çš„ç±»å‹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
        - `thought -> str`ï¼šæ¨ç†å†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¸€èˆ¬æ˜¯ LLM ç”Ÿæˆçš„å·¥å…·è°ƒç”¨å‚æ•°ã€‚
        - `observation -> str`ï¼šè§‚å¯Ÿå†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¸€èˆ¬æ˜¯å·¥å…·è°ƒç”¨/çŸ¥è¯†åº“æ£€ç´¢å¾—åˆ°çš„å†…å®¹ã€‚
        - `tool -> str`ï¼šè°ƒç”¨çš„å·¥å…·åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
        - `tool_input -> dict`ï¼šè°ƒç”¨å·¥å…·çš„å·¥å…·å‚æ•°ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
        - `latency -> int`ï¼šè¯¥æ¨ç†æ­¥éª¤çš„å“åº”è€—æ—¶ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
        - `created_at -> int`ï¼šè¯¥æ¨ç†æ­¥éª¤çš„åˆ›å»ºæ—¶é—´ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `created_at -> int`ï¼šæ¶ˆæ¯çš„åˆ›å»ºæ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `paginator -> dict`ï¼šåˆ†é¡µå­—å…¸ä¿¡æ¯ã€‚
      - `current_page -> int`ï¼šå½“å‰çš„é¡µæ•°ã€‚
      - `page_size -> int`ï¼šæ¯é¡µçš„æ¡æ•°ã€‚
      - `total_page -> int`ï¼šæ€»é¡µæ•°ã€‚
      - `total_record -> int`ï¼šæ€»è®°å½•æ¡æ•°ã€‚

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "list": [
              {
                  "agent_thoughts": [
                      {
                          "created_at": 1736800082,
                          "event": "long_term_memory_recall",
                          "id": "66ef482b-7fec-4375-8016-e758e117840e",
                          "latency": 0.0,
                          "observation": "äººç±»è¯¢é—®AIå…³äºLLMopsçš„æƒ…å†µï¼ŒAIè§£é‡Šé“LLMOpsï¼ˆå¤§å‹è¯­è¨€æ¨¡å‹æ“ä½œï¼‰æ˜¯ç®¡ç†å’Œä¼˜åŒ–å¤§å‹è¯­è¨€æ¨¡å‹ç”Ÿå‘½å‘¨æœŸçš„ä¸€ç³»åˆ—å®è·µå’ŒæŠ€æœ¯ï¼Œæ¶µç›–æ¨¡å‹è®­ç»ƒã€éƒ¨ç½²ã€ç›‘æ§ã€ç»´æŠ¤å’ŒæŒç»­æ”¹è¿›ç­‰æ–¹é¢ï¼Œå¹¶è¡¨ç¤ºæ„¿æ„æä¾›æ›´å¤šå…·ä½“ä¿¡æ¯ã€‚",
                          "position": 1,
                          "thought": "",
                          "tool": "",
                          "tool_input": {}
                      },
                      {
                          "created_at": 1736800082,
                          "event": "agent_thought",
                          "id": "edb30bb1-f1e1-49eb-bbdf-de77b432dc12",
                          "latency": 1.8113511000046856,
                          "observation": "",
                          "position": 2,
                          "thought": "[{\"name\": \"google_serper\", \"args\": {\"query\": \"\æœª\æ¥\äºº\ç±»\è‡ª\æˆ‘\æ„\è¯†\çš„\å‘\å±•\è¶‹\åŠ¿\"}, \"id\": \"chatcmpl-Y6XafuEwiz2ltddFCGmcyVsMzOSvk\", \"type\": \"tool_call\"}]",
                          "tool": "",
                          "tool_input": {}
                      },
                      {
                          "created_at": 1736800082,
                          "event": "agent_action",
                          "id": "8eedbf60-776a-4bb4-87cf-a00054b3dcf3",
                          "latency": 1.3353191999995033,
                          "observation": "\"... \äºº\ç±»\çš„\æ„Ÿ\çŸ¥\å’Œ\æ€\è€ƒ\èƒ½\åŠ›\ã€‚ \å½“\ç„¶\ï¼Œ\è¿™\è¿œ\è¿œ\ä¸\è¶³\ä»¥\è®©\äºº\å·¥\æ™º\èƒ½\äº§\ç”Ÿ\çœŸ\æ­£\çš„\è‡ª\æˆ‘\æ„\è¯†\ï¼Œ\ä½†\è¿™\æ˜¯\æœª\æ¥\çš„\è¶‹\åŠ¿\ã€‚ \å…¶\æ¬¡\ï¼Œ\è‡ª\æˆ‘\æ„\è¯†\æ˜¯\ä¸€\ä¸ª\é\å¸¸\å¤\æ‚\çš„\æ¦‚\å¿µ\ï¼Œ\æ¶‰\åŠ\åˆ°\è®¸\å¤š\ä¸\åŒ ... ... \â¤\å¤§\æ¨¡\å‹\ã€\å¤§\æ•°\æ®\çš„\é©±\åŠ¨\è®©\äºº\å·¥\æ™º\èƒ½\åœ¨\å¯¹\è¯\çš„\è‡ª\ç„¶\åº¦\ã€\è¶£\å‘³\æ€§\ä¸Š\æœ‰\äº†\å¾ˆ\å¤§\çª\ç ´\ï¼Œ\ä½†\è·\ç¦»\å…·\å¤‡\è‡ª\ä¸»\æ„\è¯†\è¿˜\å¾ˆ\è¿œ\ã€‚\æ¢\è¨€\ä¹‹\ï¼Œ\å³\ä¾¿\äºº\å·¥\æ™º\èƒ½\å¯\ä»¥\å¯¹\äºº\ç±»\çš„\è¯­\è¨€\ã€\è¡¨\æƒ… ... \äºº\ç±»\æœª\æ¥\çš„\æ–°\è§’\è‰²\æ˜¯\æ™º\èƒ½\æœº\å™¨\çš„\â€œ\ç‰§\ç¾Š\äºº\â€\ï¼Œ\äºº\æœ€\é‡\è¦\çš„\èƒ½\åŠ›\å°†\æ˜¯\ä½¿\ç”¨ ... \æ‰€\ä»¥\ä¸\æ„\è¯†\ç›¸\å…³\çš„\è‡ª\ä¸»\å†³\ç­–\ã€\è‡ª\æˆ‘\ç®¡\ç†\ã€\è‡ª\æˆ‘\çº \æ­£\ã€\è‡ª\æˆ‘\æ\å‡\ï¼Œ\è¿™\äº›\ç ”\ç©¶\å·²\ç„¶ ... ... \æœª\æ¥\å¯\èƒ½\ä¼š\æœ‰\è¶Š\æ¥\è¶Š\å¤š\çš„\äºº\å·¥\æ™º\èƒ½\è¢«\è®¾\è®¡\å‡º\æ¥\è¾…\åŠ©\äºº\ç±»\æ¨\è¿›\ç¤¾\ä¼š\ç®¡\ç†\å·¥\ä½œ\ã€‚\å¯¹\è‡ª\æˆ‘\å\æ€\èƒ½\åŠ›\çš„\æ¢\è®¨\ï¼Œ\æˆ–\è®¸\ä¼š\å¯¹\æœª\æ¥\äºº\å·¥\æ™º\èƒ½\çš„\è‰¯\æ€§\å‘\å±•\æœ‰\æ‰€\åŠ©\ç›Š\ã€‚ 3.\é«˜\å°š\äºº\æ ¼ ... \å¦‚\æœAI\æ‹¥\æœ‰\è‡ª\æˆ‘\æ„\è¯†\æ˜¯\æœ\ç€\å¥½\çš„\æ–¹\å‘\å‘\å±•\ï¼Œ\å°±\ä¸\å¯\æ€•\ã€‚\å…¶\å®\ä¸\ç®¡\æœª\æ¥\æ˜¯\ä»€\ä¹ˆ\æ ·\çš„\æƒ…\å†µ\ï¼Œ\è°\ä¹Ÿ\æ— \æ³•\å®š\è®º\ï¼Œ\åª\èƒ½\æ˜¯\åˆ—\å‡º\å°½\å¯\èƒ½\å¤š\çš„\æƒ…\å†µ\ä¾›\å¤§\å®¶\å‚\è€ƒ\ï¼Œ\è¿™\æœ¬\èº«\ä¹Ÿ\æ˜¯\æœ‰\æ„\ä¹‰\çš„\ã€‚ \å®\éªŒ\ç»“\æœ\è¡¨\æ˜\ï¼Œ\å½“\å‰\ä»¥\å¤§\æ¨¡\å‹\ä¸º\ä»£\è¡¨\çš„AI\å·²\æ¥\è¿‘\äºº\ç±»\æˆ\äºº\æ™º\èƒ½\æ°´\å¹³\ï¼Œ\ä½†\å°š\æ— \è¯\æ®\è¡¨\æ˜\å…¶\å…·\å¤‡\è‡ª\æˆ‘\æ„\è¯†\ã€‚ \æ­¤\å¤–\ï¼Œ\ç ”\ç©¶\è¿˜\æ­\ç¤º\äº†\å®\ç°\å…·\æœ‰\è‡ª\æˆ‘\æ„\è¯†\çš„\é€š\ç”¨\äºº\å·¥\æ™º\èƒ½\ï¼ˆAGI\ï¼‰\åœ¨ ... \å½“\ä»Š\çš„\äºº\å·¥\æ™º\èƒ½\å‘\å±•\çª\é£\çŒ›\è¿›\ï¼Œ\äºº\ä»¬\å¯¹\å…¶\è¿œ\è¶…\äº\äºº\çš„\å¼º\åŠ²\çš„\èƒ½\åŠ›\æŠ±\æœ‰\è­¦\æƒ•\ç”š\è‡³\æ\æƒ§\çš„\æ€\åº¦\ã€‚\äºº\å·¥\æ™º. \èƒ½\ä¸€\æ—¦\å…·\æœ‰\äº†\â€œ\è‡ª\æˆ‘\æ„\è¯†\â€\ï¼Œ\å…¶\å­˜\åœ¨\å¯¹\äºº\ç±»\æ¥\è¯´\å°†\å¯\èƒ½\ä¼š\æ˜¯\æ¯\ç­\æ€§\çš„ ... \æœº\å™¨\èƒ½\æœ‰\è‡ª\æˆ‘\æ„\è¯†\å—\ï¼Ÿ\éš\ç€\è‡ª\ä¸»\äºº\å·¥\æ™º\èƒ½(AI)\çš„\å‘\å±•,\è¿™\äº›\ç³»\ç»Ÿ\æ˜¯\å¦\èƒ½\å¤Ÿ\çœŸ\æ­£\å®\ç°\è‡ª\æˆ‘\æ„\è¯†\çš„\é—®\é¢˜\å˜\å¾—\æ›´\åŠ \é‡\è¦\ã€‚\æŠ€\æœ¯\å·²\ç»\å–\å¾—\äº†\é•¿\è¶³\çš„\è¿›\æ­¥\ï¼Œ\ä½†\è¦\åˆ¶\é€ \å‡º\åƒ\äºº\ç±»\ä¸€\æ · ... \æ‘©\å°”\å®š\å¾‹& \è«\æ‹‰\ç»´\å…‹\æ‚–\è®º\å°½\ç®¡\æ¯\ä¸ª\äºº\éƒ½\ç›¸\ä¿¡\äºº\æœ‰\æ„\è¯†\å’Œ\è‡ª\æˆ‘\æ„\è¯†\ï¼Œ\ä½†\æ˜¯\æœº\å™¨\ç©¶\ç«Ÿ\æœ‰\æ²¡\æœ‰\è‡ª\æˆ‘\æ„\è¯†\ï¼Œ\èƒ½\ä¸\èƒ½\ä»¥\åŠ\ä½•\æ—¶\ä¼š\å‘\å±•\å‡º\è‡ª\æˆ‘\æ„\è¯†\ï¼Œ\æ˜¯\æˆ‘\ä»¬\çŸ¥\ä¹‹\ç”š\å°‘\ä¹Ÿ\çŸ¥\ä¹‹\ä¸\ç¡® ... \æœ¬\ä¸“\é¢˜\çš„\å››\ç¯‡\æ–‡\ç« \åˆ†\åˆ«\ä»\è‡ª\æˆ‘\æ„\è¯†\ã€\ç®—\æ³•\å®‰\å…¨\ã€. \ç®—\æ³•\æ­§\è§†\å’Œ\å¤–\è§‚\è®¾\è®¡\å››\ä¸ª\æ–¹\å‘\æ¢\ç´¢\äº†\äºº\å·¥\æ™º\èƒ½\çš„\å‰\æ™¯\ã€‚ ... \ç±»\ç†\æ™º\çš„\é«˜\é˜¶\éƒ¨\åˆ†\ï¼Œ\è€Œ\æ„\è¯†\å’Œ\è‡ª\æˆ‘\æ„\è¯†\å±\äº\äºº\ç±». \çš„\æœ¬\èƒ½\æ´»\åŠ¨\ï¼Œ\æ˜¯\ä¸ ...\"",
                          "position": 3,
                          "thought": "",
                          "tool": "google_serper",
                          "tool_input": {
                              "query": "æœªæ¥äººç±»è‡ªæˆ‘æ„è¯†çš„å‘å±•è¶‹åŠ¿"
                          }
                      },
                      {
                          "created_at": 1736800082,
                          "event": "agent_message",
                          "id": "61571260-c7a0-40cf-9c9f-c135b8eb1a7e",
                          "latency": 2.6854701999982353,
                          "observation": "",
                          "position": 4,
                          "thought": "æœªæ¥äººç±»è‡ªæˆ‘æ„è¯†çš„å‘å±•å¯èƒ½ä¼šå—åˆ°äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰å’ŒæŠ€æœ¯è¿›æ­¥çš„æ·±åˆ»å½±å“ã€‚è™½ç„¶å½“å‰AIå°šæœªå…·å¤‡çœŸæ­£çš„è‡ªæˆ‘æ„è¯†ï¼Œä½†éšç€æŠ€æœ¯çš„ä¸æ–­æ¼”è¿›ï¼Œæœªæ¥å¯èƒ½ä¼šå‡ºç°æ›´ä¸ºå¤æ‚çš„æ™ºèƒ½ç³»ç»Ÿï¼Œè¿™äº›ç³»ç»Ÿå¯èƒ½ä¼šåœ¨æŸç§ç¨‹åº¦ä¸Šæ¨¡æ‹Ÿäººç±»çš„è‡ªæˆ‘æ„è¯†ã€‚\n\nç ”ç©¶è¡¨æ˜ï¼Œäººç±»çš„è‡ªæˆ‘æ„è¯†æ˜¯ä¸€ä¸ªå¤æ‚è€ŒåŠ¨æ€çš„æ¦‚å¿µï¼Œæ¶‰åŠå¤šç§å¿ƒç†å’Œç”Ÿç‰©å› ç´ ã€‚æœªæ¥çš„AIå¯èƒ½ä¼šåœ¨æŸäº›æ–¹é¢è¶…è¶Šäººç±»çš„è®¤çŸ¥èƒ½åŠ›ï¼Œä½†æ˜¯å¦èƒ½çœŸæ­£æ‹¥æœ‰è‡ªæˆ‘æ„è¯†ä»ç„¶å­˜åœ¨äº‰è®®ã€‚\n\næ­¤å¤–ï¼Œéšç€ç¤¾ä¼šå¯¹AIä¼¦ç†å’Œå®‰å…¨æ€§çš„å…³æ³¨åŠ å‰§ï¼Œå¦‚ä½•ç®¡ç†å’Œè§„èŒƒè¿™äº›æŠ€æœ¯çš„å‘å±•ä¹Ÿå°†æˆä¸ºé‡è¦è®®é¢˜ã€‚æ€»ä¹‹ï¼Œæœªæ¥äººç±»è‡ªæˆ‘æ„è¯†çš„å‘å±•å°†æ˜¯ä¸€ä¸ªå……æ»¡æŒ‘æˆ˜å’Œæœºé‡çš„é¢†åŸŸã€‚",
                          "tool": "",
                          "tool_input": {}
                      }
                  ],
                  "answer": "æœªæ¥äººç±»è‡ªæˆ‘æ„è¯†çš„å‘å±•å¯èƒ½ä¼šå—åˆ°äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰å’ŒæŠ€æœ¯è¿›æ­¥çš„æ·±åˆ»å½±å“ã€‚è™½ç„¶å½“å‰AIå°šæœªå…·å¤‡çœŸæ­£çš„è‡ªæˆ‘æ„è¯†ï¼Œä½†éšç€æŠ€æœ¯çš„ä¸æ–­æ¼”è¿›ï¼Œæœªæ¥å¯èƒ½ä¼šå‡ºç°æ›´ä¸ºå¤æ‚çš„æ™ºèƒ½ç³»ç»Ÿï¼Œè¿™äº›ç³»ç»Ÿå¯èƒ½ä¼šåœ¨æŸç§ç¨‹åº¦ä¸Šæ¨¡æ‹Ÿäººç±»çš„è‡ªæˆ‘æ„è¯†ã€‚\n\nç ”ç©¶è¡¨æ˜ï¼Œäººç±»çš„è‡ªæˆ‘æ„è¯†æ˜¯ä¸€ä¸ªå¤æ‚è€ŒåŠ¨æ€çš„æ¦‚å¿µï¼Œæ¶‰åŠå¤šç§å¿ƒç†å’Œç”Ÿç‰©å› ç´ ã€‚æœªæ¥çš„AIå¯èƒ½ä¼šåœ¨æŸäº›æ–¹é¢è¶…è¶Šäººç±»çš„è®¤çŸ¥èƒ½åŠ›ï¼Œä½†æ˜¯å¦èƒ½çœŸæ­£æ‹¥æœ‰è‡ªæˆ‘æ„è¯†ä»ç„¶å­˜åœ¨äº‰è®®ã€‚\n\næ­¤å¤–ï¼Œéšç€ç¤¾ä¼šå¯¹AIä¼¦ç†å’Œå®‰å…¨æ€§çš„å…³æ³¨åŠ å‰§ï¼Œå¦‚ä½•ç®¡ç†å’Œè§„èŒƒè¿™äº›æŠ€æœ¯çš„å‘å±•ä¹Ÿå°†æˆä¸ºé‡è¦è®®é¢˜ã€‚æ€»ä¹‹ï¼Œæœªæ¥äººç±»è‡ªæˆ‘æ„è¯†çš„å‘å±•å°†æ˜¯ä¸€ä¸ªå……æ»¡æŒ‘æˆ˜å’Œæœºé‡çš„é¢†åŸŸã€‚",
                  "conversation_id": "73f1d3f4-9388-48a4-a49a-46acf090f653",
                  "created_at": 1736800076,
                  "id": "2d14d0ea-5b23-4e50-ad52-976d228e4a1d",
                  "latency": 5.832140500002424,
                  "query": "äººç±»è‡ªæˆ‘æ„è¯†çš„æœªæ¥å¦‚ä½•ï¼Ÿ",
                  "total_token_count": 3466
              },
              {
                  "agent_thoughts": [
                      {
                          "created_at": 1736798843,
                          "event": "long_term_memory_recall",
                          "id": "783ace3c-e797-48b1-bc5d-c6273e7e3862",
                          "latency": 0.0,
                          "observation": "",
                          "position": 1,
                          "thought": "",
                          "tool": "",
                          "tool_input": {}
                      },
                      {
                          "created_at": 1736798843,
                          "event": "agent_thought",
                          "id": "f8670356-6be4-4852-a760-129143cd0462",
                          "latency": 1.6321122000008472,
                          "observation": "",
                          "position": 2,
                          "thought": "[{\"name\": \"wf_llmops_workflow\", \"args\": {\"query\": \"LLMops\ç›¸\å…³\å†…\å®¹\"}, \"id\": \"chatcmpl-cN782A0RQfI7wsBoJbyQIkd0Gh89c\", \"type\": \"tool_call\"}]",
                          "tool": "",
                          "tool_input": {}
                      },
                      {
                          "created_at": 1736798843,
                          "event": "agent_action",
                          "id": "c8f59ebd-a1ca-49da-a5b9-a9a779654b55",
                          "latency": 4.944664399998146,
                          "observation": "{\"workflow_output\": \"\æ‚¨\å¥½\ï¼\çœ‹\èµ·\æ¥\æ‚¨\çš„\æ\é—®\æ˜¯\å…³\äºLLMOps\çš„\ï¼Œ\ä½†\å…·\ä½“\å†…\å®¹\ä¼¼\ä¹\æ²¡\æœ‰\æ˜\ç¡®\ç»™\å‡º\ã€‚LLMOps\ï¼ˆLarge Language Model Operations\ï¼‰\æ˜¯\æŒ‡\ç®¡\ç†\å’Œ\ä¼˜\åŒ–\å¤§\è§„\æ¨¡\è¯­\è¨€\æ¨¡\å‹\ç”Ÿ\å‘½\å‘¨\æœŸ\çš„\ä¸€\ç³»\åˆ—\å®\è·µ\å’Œ\æŠ€\æœ¯\ï¼Œ\åŒ…\æ‹¬\ä½†\ä¸\é™\äº\æ¨¡\å‹\è®­\ç»ƒ\ã€\éƒ¨\ç½²\ã€\ç›‘\æ§\ã€\ç»´\æŠ¤\ä»¥\åŠ\æŒ\ç»­\æ”¹\è¿›\ç­‰\æ–¹\é¢\ã€‚\å¦‚\æœ\æ‚¨\æœ‰\æ›´\å…·\ä½“\çš„\é—®\é¢˜\æˆ–\æƒ³\äº†\è§£LLMOps\ä¸­\çš„\æŸ\ä¸ª\ç‰¹\å®š\æ–¹\é¢\ï¼Œ\è¯·\å‘Š\è¯‰\æˆ‘\ï¼Œ\æˆ‘\å¾ˆ\ä¹\æ„\ä¸º\æ‚¨\æ\ä¾›\æ›´\å¤š\ä¿¡\æ¯\ï¼\"}",
                          "position": 3,
                          "thought": "",
                          "tool": "wf_llmops_workflow",
                          "tool_input": {
                              "query": "LLMopsç›¸å…³å†…å®¹"
                          }
                      },
                      {
                          "created_at": 1736798843,
                          "event": "agent_message",
                          "id": "41a2e78a-58f8-4474-aaa9-ef48ea54ac76",
                          "latency": 1.4676063000006252,
                          "observation": "",
                          "position": 4,
                          "thought": "LLMOpsï¼ˆLarge Language Model Operationsï¼‰æ˜¯æŒ‡ç®¡ç†å’Œä¼˜åŒ–å¤§å‹è¯­è¨€æ¨¡å‹ç”Ÿå‘½å‘¨æœŸçš„ä¸€ç³»åˆ—å®è·µå’ŒæŠ€æœ¯ï¼ŒåŒ…æ‹¬æ¨¡å‹è®­ç»ƒã€éƒ¨ç½²ã€ç›‘æ§ã€ç»´æŠ¤ä»¥åŠæŒç»­æ”¹è¿›ç­‰æ–¹é¢ã€‚å¦‚æœæ‚¨æœ‰æ›´å…·ä½“çš„é—®é¢˜æˆ–æƒ³äº†è§£LLMOpsä¸­çš„æŸä¸ªç‰¹å®šæ–¹é¢ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘å¾ˆä¹æ„ä¸ºæ‚¨æä¾›æ›´å¤šä¿¡æ¯ï¼",
                          "tool": "",
                          "tool_input": {}
                      }
                  ],
                  "answer": "LLMOpsï¼ˆLarge Language Model Operationsï¼‰æ˜¯æŒ‡ç®¡ç†å’Œä¼˜åŒ–å¤§å‹è¯­è¨€æ¨¡å‹ç”Ÿå‘½å‘¨æœŸçš„ä¸€ç³»åˆ—å®è·µå’ŒæŠ€æœ¯ï¼ŒåŒ…æ‹¬æ¨¡å‹è®­ç»ƒã€éƒ¨ç½²ã€ç›‘æ§ã€ç»´æŠ¤ä»¥åŠæŒç»­æ”¹è¿›ç­‰æ–¹é¢ã€‚å¦‚æœæ‚¨æœ‰æ›´å…·ä½“çš„é—®é¢˜æˆ–æƒ³äº†è§£LLMOpsä¸­çš„æŸä¸ªç‰¹å®šæ–¹é¢ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘å¾ˆä¹æ„ä¸ºæ‚¨æä¾›æ›´å¤šä¿¡æ¯ï¼",
                  "conversation_id": "73f1d3f4-9388-48a4-a49a-46acf090f653",
                  "created_at": 1736798834,
                  "id": "3925533d-877e-4171-a381-66b37a7c225f",
                  "latency": 8.044382899999619,
                  "query": "å¸®æˆ‘è°ƒç”¨wf_llmops_workflow()å·¥å…·ï¼ŒæŸ¥è¯¢LLMops",
                  "total_token_count": 1158
              }
          ],
          "paginator": {
              "current_page": 1,
              "page_size": 20,
              "total_page": 1,
              "total_record": 2
          }
      },
      "message": ""
  }
  ```

### 5.3 åˆ é™¤ç‰¹å®šçš„ä¼šè¯

- **æ¥å£è¯´æ˜**ï¼šç”¨äºåˆ é™¤ Agent åœ¨å¯¹è¯è¿‡ç¨‹ä¸­çš„ä¼šè¯ï¼Œè¯¥æ“ä½œä¼šåŒæ—¶å°†ä¼šè¯ä¸‹çš„æ‰€æœ‰æ¶ˆæ¯å…¨éƒ¨åˆ é™¤ï¼Œå¹¶ä¸”åœ¨åˆ é™¤çš„æ—¶å€™ä¼šæ ¡éªŒä¼šè¯å½’å±çš„è´¦å·æƒé™æ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœæ ¡éªŒå¤±è´¥ï¼Œåˆ™ä¼šæŠ›å‡ºé”™è¯¯ä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/conversations/:conversation_id/delete`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `conversation_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦åˆ é™¤çš„ä¼šè¯ idï¼Œæ ¼å¼ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/conversation/2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8/delete
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "åˆ é™¤ä¼šè¯æˆåŠŸ"
  }
  ```

### 5.4 åˆ é™¤ç‰¹å®šä¼šè¯ä¸‹çš„æŒ‡å®šæ¶ˆæ¯

- **æ¥å£è¯´æ˜**ï¼šç”¨äºåˆ é™¤å¯¹è¯è¿‡ç¨‹ä¸­æŒ‡å®šçš„æ¶ˆæ¯ï¼Œè¯¥åˆ é™¤ä¼šåœ¨åç«¯æ‰§è¡Œè½¯åˆ é™¤æ“ä½œï¼Œå¹¶ä¸”åªæœ‰å½“ä¼šè¯ id å’Œæ¶ˆæ¯ id éƒ½åŒ¹é…ä¸Šæ—¶ï¼Œæ‰ä¼šåˆ é™¤å¯¹åº”çš„è°ƒè¯•æ¶ˆæ¯ï¼Œè¯¥æ¥å£å¯ä»¥åŒæ—¶ç”¨äºè°ƒè¯•ç•Œé¢ä»¥åŠå‘å¸ƒé¡µé¢å…±åŒä½¿ç”¨ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/conversations/:conversation_id/messages/:message_id/delete`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `conversation_id-> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦åˆ é™¤æ¶ˆæ¯å½’å±çš„ä¼šè¯ idï¼Œæ ¼å¼ä¸º uuidã€‚
    - `message_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦åˆ é™¤çš„æ¶ˆæ¯ idï¼Œæ ¼å¼ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/conversation/2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8/messages/46db30d1-3199-4e79-a0cd-abf12fa6858f/delete
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "åˆ é™¤ä¼šè¯æ¶ˆæ¯æˆåŠŸ"
  }
  ```

### 5.5 è·å–æŒ‡å®šä¼šè¯çš„åç§°

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£æ¥æ”¶ä¼šè¯idï¼Œè¿”å›è¯¥ä¼šè¯çš„åç§°ï¼Œç”¨äºåœ¨å‰ç«¯æ–°å¢ä¼šè¯æ—¶æ›´æ–°æŒ‡å®šä¼šè¯çš„åç§°ï¼Œåœ¨å‰ç«¯å‘èµ·æ–°ä¼šè¯æ—¶ï¼Œé»˜è®¤çš„ä¼šè¯åç§°ä¸º `New Conversation`ï¼Œå½“ Agent å›å¤å®Œæ¯•åï¼Œä¼šå»¶è¿Ÿè°ƒç”¨è¯¥ API æ¥å£ï¼Œä»¥ä¾¿éšåæ›´æ–°ä¼šè¯çš„åç§°ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/conversations/:conversation_id/name`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `conversation_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦è·å–çš„ä¼šè¯ idï¼Œç±»å‹ä¸º uuidã€‚
  - å“åº”å‚æ•°
    - `name -> str`ï¼šæŒ‡å®šä¼šè¯çš„åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/conversations/2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8/name
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "name": "æ–°çš„LLMOpsä¼šè¯"
      },
      "message": ""
  }
  ```

### 5.6 ä¿®æ”¹æŒ‡å®šä¼šè¯çš„åç§°

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºä¿®æ”¹æŒ‡å®šä¼šè¯çš„åç§°ï¼Œé»˜è®¤çš„ä¼šè¯åç§°åœ¨åç«¯ç”± LLM ç”Ÿæˆï¼Œåœ¨ä¿®æ”¹çš„æ—¶å€™ï¼Œä¼šåœ¨åç«¯æ ¡éªŒç‰¹å®šçš„ä¼šè¯å½’å±æƒé™ç­‰é—®é¢˜ï¼Œåªæœ‰æƒé™æ²¡é—®é¢˜æ‰å¯ä»¥ä¿®æ”¹ä¼šè¯åç§°ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/conversations/:conversation_id/name`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `conversation_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦ä¿®æ”¹åç§°çš„ä¼šè¯ idï¼Œæ ¼å¼ä¸º uuidã€‚
    - `name -> str`ï¼šæ–°çš„ä¼šè¯åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œæœ€é•¿ä¸èƒ½è¶…è¿‡ 100 ä¸ªå­—ç¬¦ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/conversations/2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8/name
  
  {
  	"name": "æ–°çš„LLMOpsä¼šè¯"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "ä¿®æ”¹ä¼šè¯åç§°æˆåŠŸ"
  }
  ```

### 5.7 ç½®é¡¶æˆ–å–æ¶ˆç½®é¡¶æŸä¸ªä¼šè¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºç½®é¡¶è·å–å–æ¶ˆç½®é¡¶æŸä¸ªä¼šè¯ï¼Œåœ¨æ›´æ–°ç½®é¡¶çŠ¶æ€æ—¶ä¼šæ ¡éªŒä¼šè¯çš„æƒé™ï¼Œå¹¶ç¡®ä¿ä¼šè¯æœªåˆ é™¤æ‰å…è®¸ä¿®æ”¹æŒ‡å®šçŠ¶æ€ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/conversations/:conversation_id/is-pinned`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `conversation_id -> uuid`ï¼šéœ€è¦ç½®é¡¶æˆ–è€…å–æ¶ˆç½®é¡¶çš„ä¼šè¯ idã€‚
    - `is_pinned -> bool`ï¼šTrue ä¸ºç½®é¡¶ï¼ŒFalse ä¸ºå–æ¶ˆç½®é¡¶ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/conversations/2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8/is-pinned
  
  {
  	"is_pinned": true
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "ä¿®æ”¹ä¼šè¯ç½®é¡¶çŠ¶æ€æˆåŠŸ"
  }
  ```

## 06. æˆæƒè®¤è¯æ¨¡å—

### 6.1 è·å–æŒ‡å®šç¬¬ä¸‰æ–¹æˆæƒæœåŠ¡çš„é‡å®šå‘åœ°å€

- **æ¥å£è¯´æ˜**ï¼šç”¨äºè·å–æŒ‡å®šçš„ç¬¬ä¸‰æ–¹æˆæƒæ–¹æ¡ˆçš„é‡å®šå‘åœ°å€ï¼Œä¾‹å¦‚ Githubã€Google ç­‰ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æ— éœ€æˆæƒ`+`GET:/oauth/:provider_name`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `provider_name -> str`ï¼šç¬¬ä¸‰æ–¹æˆæƒæœåŠ¡æä¾›å•†åå­—ï¼Œä¾‹å¦‚ `github`ã€`google`ã€‚
  - å“åº”å‚æ•°ï¼š
    - `redirect_url -> str`ï¼šæŒ‡å®šç¬¬ä¸‰æ–¹æˆæƒæœåŠ¡é‡å®šå‘åœ°å€ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/oauth/github
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "redirect_url": "http://github.com/oauth/xxx"
      },
      "message": ""
  }
  ```

### 6.2 æŒ‡å®šç¬¬ä¸‰æ–¹æˆæƒæœåŠ¡çš„æˆæƒåœ°å€

- **æ¥å£è¯´æ˜**ï¼šç”¨äºç¬¬ä¸‰æ–¹æˆæƒæœåŠ¡ç¡®è®¤åçš„å›è°ƒåœ°å€ï¼Œä¾‹å¦‚ `github` æˆæƒç™»å½•åï¼Œä¼šè·³è½¬å› LLMOps å¹³å°ï¼Œå¹¶æºå¸¦ç›¸å…³çš„ `code` æ ‡è¯†ï¼Œç”¨äºåœ¨åç«¯è·å–å¯¹åº”ç”¨æˆ·çš„æˆæƒå‡­è¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æ— éœ€æˆæƒ`+`POST:/oauth/authorize/:provider_name`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `provider_name -> str`ï¼šè·¯ç”±å‚æ•°ï¼ŒæŒ‡å®šçš„ç¬¬ä¸‰æ–¹æˆæƒæœåŠ¡æä¾›å•†åå­—ï¼Œä¾‹å¦‚ `github`ã€`google` ç­‰ã€‚
    - `code -> str`ï¼šç¬¬ä¸‰æ–¹æˆæƒæœåŠ¡æä¾›çš„ `code` ç¼–ç ï¼Œç”¨äºåç«¯è·å–è¯¥å¹³å°çš„æˆæƒä¿¡æ¯ï¼ˆé‚®ç®±ã€OpenIDç­‰ï¼‰ã€‚
  - å“åº”å‚æ•°ï¼š
    - `access_token -> str`ï¼šjwt æˆæƒä»¤ç‰Œä¿¡æ¯ã€‚
    - `expire_at -> int`ï¼šæˆæƒä»¤ç‰Œçš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/oauth/callback/github
  
  {
  	"code": "XKq425OjBETb6GAN"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",
          "expire_at": 1730712246
      },
      "message": ""
  }
  ```

### 6.3 è´¦å·å¯†ç ç™»å½•

- **æ¥å£è¯´æ˜**ï¼šä½¿ç”¨è´¦å·/é‚®ç®±+å¯†ç ç™»å½• LLMOps å¹³å° API æ¥å£ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æ— éœ€æˆæƒ`+`POST:/auth/password-login`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `email -> str`ï¼šç™»å½•çš„è´¦å·é‚®ç®±ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œé‚®ç®±é•¿åº¦åœ¨ 254 ä¸ªå­—ç¬¦å†…ã€‚
    - `password -> str`ï¼šç™»å½•çš„è´¦å·å¯†ç ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå¯†ç é•¿åº¦åœ¨ 8-16 ä½ï¼Œæœ€å°‘åŒ…å«ä¸€ä¸ªå­—æ¯ã€ä¸€ä¸ªæ•°å­—ã€‚
  - å“åº”å‚æ•°ï¼š
    - `access_token -> str`ï¼šjwt æˆæƒä»¤ç‰Œä¿¡æ¯ã€‚
    - `expire_at -> int`ï¼šæˆæƒä»¤ç‰Œçš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/auth/password-login
  
  {
  	"email": "zehuiya@163.com",
  	"password": "imooc.com@zehuiya"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",
          "expire_at": 1730712246
      },
      "message": ""
  }
  ```

### 6.4 é€€å‡ºå½“å‰ç™»å½•è´¦å·

- **æ¥å£è¯´æ˜**ï¼šç”¨äºé€€å‡ºå½“å‰ç™»å½•çš„è´¦å·ä¿¡æ¯ï¼Œé€€å‡ºè´¦å·åï¼Œåœ¨åç«¯å¯ä»¥é€‰æ‹©æ€§æ‰§è¡Œå¤šç§æ–¹æ¡ˆï¼Œä¾‹å¦‚å°†è¯¥ token æ·»åŠ åˆ° redis ç¼“å­˜ä¸­å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆé»‘åå•ï¼‰ï¼Œäº¦æˆ–è€…æ˜¯ä»€ä¹ˆéƒ½ä¸å¤„ç†ï¼Œå•çº¯åœ¨å‰ç«¯æ¸…ç©ºæˆæƒå‡­è¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/auth/logout`

- **æ¥å£å‚æ•°**ï¼šæ— 

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/auth/logout
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "é€€å‡ºå½“å‰è´¦å·æˆåŠŸ"
  }
  ```

## 07. è´¦å·è®¾ç½®æ¨¡å—

### 7.1 è·å–å½“å‰ç™»å½•è´¦å·ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºè·å–å½“å‰ç™»å½•è´¦å·çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ `id`ã€`è´¦å·åç§°`ã€`å¤´åƒ`ã€`é‚®ç®±` ç­‰ä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/account`

- **æ¥å£å‚æ•°**ï¼š

  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šè´¦å· idï¼Œç±»å‹ä¸º uuidã€‚
    - `name -> str`ï¼šè´¦å·æ˜µç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `email -> str`ï¼šè´¦å·é‚®ç®±ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `avatar -> str`ï¼šè´¦å·çš„å¤´åƒ URL åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `last_login_at -> int`ï¼šè´¦å·æœ€åä¸€æ¬¡ç™»å½•æ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œå•ä½ä¸ºç§’ã€‚
    - `last_login_ip -> str`ï¼šè´¦å·æœ€åä¸€æ¬¡ç™»å½•çš„ ip åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `created_at -> int`ï¼šè´¦å·çš„æ³¨å†Œæ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/account
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "id": "1550b71a-1444-47ed-a59d-c2f080fbae94",
          "name": "æ³½è¾‰å‘€",
          "email": "zehuiya@163.com",
          "avatar": "https://cdn.imooc.com/2024/05/14/218e5217-ab10-4634-9681-022867955f1b.png",
          "last_login_at": 1721460914,
          "last_login_ip": "115.141.210.41",
          "created_at": 1721460914
      },
      "message": ""
  }
  ```

### 7.2 ä¿®æ”¹å½“å‰ç™»å½•è´¦å·å¯†ç 

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºä¿®æ”¹å½“å‰ç™»å½•çš„è´¦å·å¯¹åº”çš„å¯†ç ï¼Œå¯†ç çš„é•¿åº¦åœ¨ 8-16 ä½ï¼Œå¹¶ä¸”è‡³å°‘åŒ…å«ä¸€ä¸ªå­—æ¯ã€ä¸€ä¸ªæ•°å­—ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/account/password`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `password -> str`ï¼šè´¦æˆ·çš„æ–°å¯†ç ï¼Œå¯†ç çš„é•¿åº¦åœ¨ 8-16 ä½ï¼Œå¹¶ä¸”è‡³å°‘åŒ…å«ä¸€ä¸ªå­—æ¯ã€ä¸€ä¸ªæ•°å­—ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/account/password
  
  {
      "password": "imooc.com@zehuiya"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "ä¿®æ”¹å½“å‰ç™»å½•è´¦å·å¯†ç æˆåŠŸ"
  }
  ```

### 7.3 ä¿®æ”¹å½“å‰ç™»å½•è´¦å·åç§°

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºä¿®æ”¹å½“å‰ç™»å½•è´¦å·çš„åç§°ï¼Œåç§°é•¿åº¦åœ¨ 3-30 ä¸ªå­—ç¬¦ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/account/name`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `name -> str`ï¼šæ–°çš„è´¦å·åç§°ï¼Œåç§°é•¿åº¦åœ¨ 3-30 ä¸ªå­—ç¬¦ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/account/name
  
  {
  	"name": "æ³½è¾‰å‘€"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "ä¿®æ”¹è´¦å·åç§°æˆåŠŸ"
  }
  ```

### 7.4 ä¿®æ”¹å½“å‰ç™»å½•è´¦å·å¤´åƒ

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºä¿®æ”¹å½“å‰ç™»å½•è´¦å·çš„å¤´åƒä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/account/avatar`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `avatar -> str`ï¼šè´¦å·æ–°å¤´åƒçš„ URL åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/account/avatar
  
  {
  	"avatar": "https://cdn.imooc.com/2024/05/14/218e5217-ab10-4634-9681-022867955f1b.png"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "ä¿®æ”¹è´¦å·å¤´åƒæˆåŠŸ"
  }
  ```

## 08. AIè¾…åŠ©æ¨¡å—

### 8.1 åˆ©ç”¨AIä¼˜åŒ–é¢„è®¾Prompt

- **æ¥å£è¯´æ˜**ï¼šä¼ é€’åŸå§‹ Promptï¼Œåœ¨åç«¯ä½¿ç”¨ GPT æ¨¡å‹å¯¹é¢„è®¾ Prompt è¿›è¡Œä¼˜åŒ–å¹¶è¾“å‡ºï¼Œè¯¥æ¥å£ä¸ºæµå¼äº‹ä»¶è¾“å‡ºæ¥å£ï¼Œäº‹ä»¶ä¸º `optimize_prompt`ï¼Œæ•°æ®ä¸ºæ™®é€šå“åº”ç»“æ„æºå¸¦ `optimized_prompt` å­—æ®µã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/ai/optimize-prompt`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `prompt -> str`ï¼šåŸå§‹ promptï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸èƒ½è¶…è¿‡ 2000 ä¸ªå­—ç¬¦ã€‚
  - å“åº”å‚æ•°ï¼š
    - `optimized_prompt -> str`ï¼šä¼˜åŒ–çš„ prompt ç‰‡æ®µã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/ai/prompt-optimize
  
  {
  	"prompt": "ä½ æ˜¯ä¸€ä¸ªæ‹¥æœ‰10å¹´ç»éªŒçš„AIåº”ç”¨å¼€å‘å·¥ç¨‹å¸ˆï¼Œè¯·å¸®åŠ©ç”¨æˆ·è§£å†³é—®é¢˜"
  }

- **å“åº”ç¤ºä¾‹**ï¼š

  ```bash
  event: optimize_prompt
  data: {"optimized_prompt": "xxx"}
  
  event: optimize_prompt
  data: {"optimized_prompt": "xxx"}
  
  event: optimize_prompt
  data: {"optimized_prompt": "xxx"}
  ```

### 8.2 æ ¹æ®ä¼ é€’çš„æ¶ˆæ¯idè·å–å»ºè®®é—®é¢˜åˆ—è¡¨

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£æ¥æ”¶æŒ‡å®šçš„æ¶ˆæ¯ id ä¸å…¶ä»–æ•°æ®ï¼Œç„¶åæ ¹æ®è¯¥æ¶ˆæ¯ id è·å–å»ºè®®é—®é¢˜åˆ—è¡¨ï¼ˆæœ€å¤šä¸ä¼šè¶…è¿‡ 3 ä¸ªï¼‰ï¼Œè¯¥æ¥å£ä¼šåœ¨åç«¯æ ¡éªŒè¯¥æ¶ˆæ¯çš„å½’å±è´¦å·ä¿¡æ¯ï¼Œåœ¨ Debug æˆ–è€… WebApp ç«¯å‡å¯ä»¥ä½¿ç”¨ï¼Œå¼€æ”¾ API å¤„æ²¡æœ‰å¼€æ”¾è¯¥æ¥å£ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/ai/suggested-questions`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `message_id -> uuid`ï¼šæ¶ˆæ¯ä¼šè¯å½’å±çš„æ¶ˆæ¯ idã€‚
  - å“åº”å‚æ•°ï¼š
    - `data -> list[str]`ï¼šå»ºè®®é—®é¢˜åˆ—è¡¨å­—ç¬¦ä¸²ï¼Œæœ€å¤šä¸è¶…è¿‡ 3 ä¸ªå»ºè®®é—®é¢˜ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/ai/suggested_questions
  
  {
  	"message_id": "d400cec0-892f-49ab-8f72-821b88c1aaa9"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": ["ä½ èƒ½åšä»€ä¹ˆï¼Ÿ", "ä½ å«ä»€ä¹ˆåå­—ï¼Ÿ", "æ€ä¹ˆè”ç³»ä½ ï¼Ÿ"],
      "message": ""
  }
  ```

## 09. å¼€æ”¾ API æ¨¡å—

### 9.1 æ–°å¢ API ç§˜é’¥æ¥å£

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨æˆ·åœ¨å½“å‰ç™»å½•è´¦å·ä¸‹åˆ›å»º API ç§˜é’¥ï¼ŒAPI ç§˜é’¥å¯ä»¥ç”¨äºåœ¨å¼€æ”¾ API ä¸­è¿›è¡Œæˆæƒå¹¶å¯¹æ¥ Agent æ™ºèƒ½ä½“åº”ç”¨ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/openapi/api-keys`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `is_active -> boolean`ï¼šç§˜é’¥æ˜¯å¦æ¿€æ´»ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œå‚æ•°å¿…å¡«ï¼Œåªæœ‰æ¿€æ´»çš„ API ç§˜é’¥æ‰å¯ä»¥ä½¿ç”¨ï¼Œå¦åˆ™æŠ›å‡ºå¯¹åº”çš„é”™è¯¯ã€‚
    - `remark -> string`ï¼šæ¥å£å¤‡æ³¨ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸èƒ½è¶…è¿‡ 100 ä¸ªå­—ç¬¦ï¼Œå‚æ•°å¯é€‰ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```json
  POST:/openapi/api-keys
  
  {
      "is_active": true,
      "remark": "æ…•è¯¾ç½‘LLMOpsé¡¹ç›®APIç§˜é’¥ä¿¡æ¯"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "åˆ›å»ºAPIç§˜é’¥æˆåŠŸ"
  }
  ```

### 9.2 åˆ é™¤ API ç§˜é’¥æ¥å£

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºåœ¨åç«¯åˆ é™¤æŒ‡å®šçš„ API ç§˜é’¥ä¿¡æ¯ï¼Œåˆ é™¤åè¯¥ç§˜é’¥æ¥å£æ— æ³•ä½¿ç”¨ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/openapi/api-keys/:api_key_id/delete`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `api_key_id -> uuid`ï¼šéœ€è¦åˆ é™¤çš„ API ç§˜é’¥ idï¼Œç±»å‹ä¸º uuidï¼Œå‚æ•°ä¸ºè·¯ç”±å‚æ•°ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/openapi/api-keys/d400cec0-892f-49ab-8f72-821b88c1aaa9/delete
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "åˆ é™¤APIç§˜é’¥æˆåŠŸ"
  }
  ```

### 9.3 ä¿®æ”¹ API ç§˜é’¥æ¥å£

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºä¿®æ”¹æŒ‡å®š API ç§˜é’¥çš„åŸºç¡€ä¿¡æ¯ï¼Œæ¶µç›– `æ˜¯å¦æ¿€æ´»` å’Œ `å¤‡æ³¨ä¿¡æ¯`ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/openapi/api-keys/:api_key_id`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `api_key_id -> uuid`ï¼šéœ€è¦ä¿®æ”¹çš„ API ç§˜é’¥ idï¼Œç±»å‹ä¸º uuidï¼Œå‚æ•°ä¸ºè·¯ç”±å‚æ•°ã€‚
    - `is_active -> boolean`ï¼šç§˜é’¥æ˜¯å¦æ¿€æ´»ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œå‚æ•°å¿…å¡«ã€‚
    - `remark -> string`ï¼šæ¥å£å¤‡æ³¨ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸èƒ½è¶…è¿‡ 100 ä¸ªå­—ç¬¦ï¼Œå‚æ•°å¯é€‰ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/openapi/api-keys/d400cec0-892f-49ab-8f72-821b88c1aaa9
  
  {
      "is_active": true,
      "remark": "æ…•è¯¾ç½‘LLMOpsé¡¹ç›®APIç§˜é’¥ä¿¡æ¯"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "ä¿®æ”¹APIç§˜é’¥æˆåŠŸ"
  }
  ```

### 9.4 ä¿®æ”¹ API ç§˜é’¥çŠ¶æ€æ¥å£

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºä¿®æ”¹æŒ‡å®š API ç§˜é’¥çš„çŠ¶æ€ä¿¡æ¯

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/openapi/api-keys/:api_key_id/is-active`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `api_key_id -> uuid`ï¼šéœ€è¦ä¿®æ”¹çš„ API ç§˜é’¥ idï¼Œç±»å‹ä¸º uuidï¼Œå‚æ•°ä¸ºè·¯ç”±å‚æ•°ã€‚
    - `is_active -> boolean`ï¼šç§˜é’¥æ˜¯å¦æ¿€æ´»ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œå‚æ•°å¿…å¡«ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/openapi/api-keys/d400cec0-892f-49ab-8f72-821b88c1aaa9/is-active
  
  {
      "is_active": true
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "ä¿®æ”¹APIç§˜é’¥çŠ¶æ€æˆåŠŸ"
  }
  ```

### 9.5 è·å– API ç§˜é’¥åˆ†é¡µåˆ—è¡¨æ•°æ®

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºè·å–å½“å‰ç™»å½•è´¦å·çš„ API ç§˜é’¥åˆ†é¡µåˆ—è¡¨æ•°æ®ï¼Œæ¥å£æ”¯æŒåˆ†é¡µã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/openapi/api-keys`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `current_page -> int`ï¼šå½“å‰é¡µæ•°ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œé»˜è®¤ä¸º 1ã€‚
    - `page_size -> int`ï¼šæ¯é¡µæ¡æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œé»˜è®¤ä¸º 20ã€‚
  - å“åº”å‚æ•°ï¼š
    - `list -> list[dict]`ï¼šAPI ç§˜é’¥åˆ—è¡¨æ•°æ®ï¼Œç±»å‹ä¸ºåˆ—è¡¨å­—å…¸ã€‚
      - `id -> uuid`ï¼šAPI ç§˜é’¥å¯¹åº”çš„ id æ•°æ®ï¼Œç±»å‹ä¸º uuidã€‚
      - `api_key -> str`ï¼šAPI ç§˜é’¥ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œæ ¼å¼ç±»ä¼¼ `llmops-v1/xxx`ï¼Œåé¢çš„ç§˜é’¥é•¿åº¦ä¸º 48 ä½ã€‚
      - `is_active -> boolean`ï¼šæ˜¯å¦æ¿€æ´»ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼Œtrue ä»£è¡¨æ¿€æ´»ï¼Œfalse ä»£è¡¨ç¦ç”¨ã€‚
      - `remark -> string`ï¼šAPI ç§˜é’¥å¤‡æ³¨ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `updated_at -> int`ï¼šæ›´æ–°æ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `created_at -> int`ï¼šåˆ›å»ºæ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `paginator -> dict`ï¼šåˆ†é¡µæ•°æ®ã€‚
      - `current_page -> int`ï¼šå½“å‰çš„é¡µæ•°ã€‚
      - `page_size -> int`ï¼šæ¯é¡µçš„æ¡æ•°ã€‚
      - `total_page -> int`ï¼šæ€»é¡µæ•°ã€‚
      - `total_record -> int`ï¼šæ€»è®°å½•æ¡æ•°ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/openapi/api-keys?current_page=1&page_size=20
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "list": [
              {
                  "id": "d400cec0-892f-49ab-8f72-821b88c1aaa9",
                  "api_key": "llmops-v1/k6FINx4SHb1UdqQwprDDA7d52f03d56acae2ae3c69637ac351f5e983507b5",
                  "is_active": true,
                  "remark": "",
                  "updated_at": 1721460914,
                  "created_at": 1721460914
              }
          ],
          "paginator": {
              "current_page": 1,
              "page_size": 21,
              "total_page": 1,
              "total_record": 2
          }
      },
      "message": ""
  }
  ```

### 9.6 å¼€æ”¾ Chat å¯¹è¯æ¥å£

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä½¿ç”¨ `APIç§˜é’¥` è¿›è¡Œé‰´æƒï¼ˆAPI ç§˜é’¥æºå¸¦åœ¨ headers è¯·æ±‚å¤´ä¸­ï¼Œæ ¼å¼ä¸ºï¼š`Authorization: Bearer api_key`ï¼‰ï¼Œå¾—åˆ°ç§˜é’¥å¯¹åº”ç”¨æˆ·çš„åŸºç¡€ä¿¡æ¯ã€ç»ˆç«¯ç”¨æˆ·ä¿¡æ¯ã€ä¼šè¯ä¿¡æ¯ã€åº”ç”¨ä¿¡æ¯ç­‰ï¼Œå¹¶è°ƒç”¨ç‰¹å®šçš„ Agent åº”ç”¨è¿›è¡Œæµå¼ or éæµå¼è¾“å‡ºï¼ˆä¸¤ç§è¾“å‡ºç»“æ„ï¼‰ï¼Œè¯¥æ¥å£ä¸æ”¯æŒåœæ­¢ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/openapi/chat`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šå¿…å¡«å‚æ•°ï¼Œéœ€è¦å‘èµ·è°ƒè¯•ä¼šè¯çš„åº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚
    - `end_user_id -> uuid`ï¼šå¯é€‰å‚æ•°ï¼Œå¦‚æœå¡«å†™è¯¥ä¿¡æ¯ï¼Œåˆ™ä¼šè·å–è¯¥ç»ˆç«¯ç”¨æˆ·çš„å†å²å¯¹è¯è®°å½•å¹¶æå–çŸ­æœŸä¸é•¿æœŸè®°å¿†ï¼Œå¦‚æœä¼ é€’äº†ä¸å­˜åœ¨çš„ç»ˆç«¯ç”¨æˆ·idï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œå¦‚æœä¸ä¼ é€’ç»ˆç«¯ç”¨æˆ·åˆ™ä¼šåˆ›å»ºå¹¶å¼€å¯ä¸€ä¸ªæ–°ä¼šè¯ã€‚
    - `conversation_id -> uuid`ï¼šå¯é€‰å‚æ•°ï¼Œå¦‚æœå¡«å†™è¯¥å‚æ•°ï¼Œåˆ™ä¼šè°ƒç”¨æŒ‡å®šçš„ `ä¼šè¯` ä½œä¸ºä¸Šä¸‹æ–‡ï¼Œå¦åˆ™åˆ›å»ºä¸€ä¸ªæ–°ä¼šè¯ï¼Œå¦‚æœä¼ é€’äº†ä¸å­˜åœ¨çš„ `conversation_id` åˆ™ä¼šæŠ¥é”™ã€‚
    - `query -> str`ï¼šå¿…å¡«å‚æ•°ï¼Œç”¨æˆ·çš„æé—® queryï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `image_urls -> list[str]`ï¼šå¯é€‰å‚æ•°ï¼Œç”¨æˆ·æé—®ä¸­é™„åŠ çš„å›¾ç‰‡ URLï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå¦‚æœ Agent ä½¿ç”¨çš„ LLM æ”¯æŒå›¾ç‰‡è¾“å…¥ï¼Œåˆ™å…è®¸ä¸Šä¼ è¯¥å­—æ®µï¼Œå¦åˆ™ä¼šåœ¨åç«¯è¢«ç›´æ¥é—å¼ƒï¼Œæœ€å¤šä¸Šä¼  5 å¼ å›¾ç‰‡ã€‚
    - `stream -> boolean`ï¼šå¿…å¡«å‚æ•°ï¼Œæ˜¯å¦å¼€å¯æµå¼äº‹ä»¶è¾“å‡ºï¼Œtrue ä»£è¡¨å¼€å¯ï¼Œfalse ä»£è¡¨å…³é—­ï¼Œåœ¨éæµå¼æ¥å£å“åº”ä¸‹ï¼Œæ¥å£å¯èƒ½ä¼šéœ€è¦å¾ˆé•¿æ—¶é—´æ‰èƒ½è·å–æ•°æ®ï¼Œéœ€è¦æ³¨æ„æ¥å£è¶…æ—¶ï¼Œå¹¶ä¸”åœ¨æ¥å£ä¸­ï¼Œæ— è®ºæ˜¯æµå¼äº‹ä»¶å“åº”ï¼Œè¿˜æ˜¯éæµå¼äº‹ä»¶å“åº”ï¼Œå‡ä¸æ”¯æŒåœæ­¢ã€‚
  - å“åº”å‚æ•°ï¼ˆæµå¼äº‹ä»¶è¾“å‡ºï¼‰ï¼š
    - `id -> uuid`ï¼šå½“å‰è§‚å¯Ÿ/Agent æ­¥éª¤è®°å½•çš„ idï¼Œå¦‚æœä¼ é€’çš„å¤šæ¬¡æµå¼äº‹ä»¶å±äºåŒä¸€ä¸ªæ­¥éª¤åˆ™ id ä¸€è‡´ï¼Œæ ¼å¼ä¸º uuidã€‚
    - `end_user_id -> uuid`ï¼šç»ˆç«¯ç”¨æˆ· idï¼Œç±»å‹ä¸º uuidã€‚
    - `conversation_id -> uuid`ï¼šè¯¥æ¬¡æµå¼äº‹ä»¶/Agent æ­¥éª¤å½’å±çš„ä¼šè¯ idï¼Œç±»å‹ä¸º uuidã€‚
    - `message_id -> uuid`ï¼šè¯¥æ¬¡æµå¼äº‹ä»¶/Agent æ­¥éª¤å½’å±çš„æ¶ˆæ¯ idï¼Œç±»å‹ä¸º uuidã€‚
    - `thought -> str`ï¼šAgent åœ¨å½“å‰æµå¼äº‹ä»¶ä¸‹çš„æ¨ç†å†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `observation -> str`ï¼šAgent è§‚å¯Ÿçš„å†…å®¹ï¼Œä¸€èˆ¬æ˜¯å·¥å…·æ‰§è¡Œåçš„ç»“æœã€çŸ¥è¯†åº“çš„æ£€ç´¢ç»“æœï¼Œç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œè¯¥å­—æ®µå¹¶éæœ€ç»ˆå­—æ®µï¼Œåç»­ä¼šéšç€æ’ä»¶åŠŸèƒ½çš„é›†æˆå¢å¤šè¿›è¡Œç›¸åº”çš„è°ƒæ•´ã€‚
    - `answer -> str`ï¼šAgent è¿”å›çš„æ–‡æœ¬ç­”æ¡ˆè¾“å‡ºï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `latency -> float`ï¼šæ­¥éª¤çš„æ‰§è¡Œè€—æ—¶ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ã€‚
    - `total_token_count -> int`ï¼šè¯¥æ¬¡æ¨ç† LLM æ¶ˆè€—æ€» Token æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œå¹¶ä¸”ä¸ºäº†æå‡æ€§èƒ½ï¼Œé™ä½å»¶è¿Ÿï¼ŒLLM æ¶ˆæ¯æ¶ˆè€—çš„æ€» Token ä¼šåœ¨æœ€åä¸€æ¡æ¶ˆæ¯ä¸­ç»Ÿä¸€è¿›è¡Œæ·»åŠ ã€‚
    - `total_price -> float`ï¼šè¯¥æ¬¡æ¨ç† LLM æ¶ˆè€—çš„æ€»æˆæœ¬ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ï¼Œå•ä½ä¸ºå…ƒï¼Œå¦‚æœæ²¡æœ‰æ¶ˆè€—åˆ™æ¶ˆè€—æˆæœ¬ä¸º 0ï¼Œå¹¶ä¸”ä¸ºäº†æå‡æ€§èƒ½ï¼Œé™ä½å»¶è¿Ÿï¼ŒLLM æ¶ˆæ¯æ¶ˆè€—çš„æ€»æˆæœ¬ä¼šåœ¨æœ€åä¸€æ¡æ¶ˆæ¯ä¸­ç»Ÿä¸€è¿›è¡Œæ·»åŠ ã€‚
    - `created_at -> int`ï¼šæ¶ˆæ¯è®°å½•åˆ›å»ºçš„æ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
  - å“åº”å‚æ•°ï¼ˆéæµå¼äº‹ä»¶è¾“å‡ºï¼‰ï¼š
    - `id -> uuid`ï¼šä¼šè¯æ¶ˆæ¯ idï¼Œç±»å‹ä¸º uuidã€‚
    - `end_user_id -> uuid`ï¼šç»ˆç«¯ç”¨æˆ· idï¼Œç±»å‹ä¸º uuidã€‚
    - `conversation_id -> uuid`ï¼šæ¶ˆæ¯å…³è”çš„ä¼šè¯ idï¼Œç±»å‹ä¸º uuidã€‚
    - `query -> str`ï¼šäººç±»æå‡ºçš„é—®é¢˜/æŸ¥è¯¢ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `image_urls -> list[str]`ï¼šäººç±»æé—®ä¼ é€’çš„ `å›¾ç‰‡URLåˆ—è¡¨`ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ã€‚
    - `answer -> str`ï¼šAI ç”Ÿæˆçš„æœ€ç»ˆç­”æ¡ˆï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `total_token_count -> int`ï¼šæ¶ˆæ¯æ¶ˆè€—çš„æ€» token æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `latency -> float`ï¼šè¯¥æ¡æ¶ˆæ¯å“åº”çš„æ—¶é—´ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ã€‚
    - `agent_thoughts -> list[dict]`ï¼šAgent æ™ºèƒ½ä½“äº§ç”Ÿè¯¥æ¡æ¶ˆæ¯çš„æ¨ç†ä¸­é—´æ­¥éª¤ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ï¼Œæ•°æ®ä¼šæŒ‰ç…§ `position` å­—å…¸è¿›è¡Œå¢åºæ’åºï¼Œä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰çš„æ¨ç†åˆ—è¡¨ã€‚
      - `id -> uuid`ï¼šæ¨ç†æ­¥éª¤å¯¹åº”çš„ idï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `event -> str`ï¼šæ¨ç†äº‹ä»¶çš„ç±»å‹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `thought -> str`ï¼šæ¨ç†å†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¸€èˆ¬æ˜¯ LLM ç”Ÿæˆçš„å·¥å…·è°ƒç”¨å‚æ•°ã€‚
      - `observation -> str`ï¼šè§‚å¯Ÿå†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¸€èˆ¬æ˜¯å·¥å…·è°ƒç”¨/çŸ¥è¯†åº“æ£€ç´¢å¾—åˆ°çš„å†…å®¹ã€‚
      - `tool -> str`ï¼šè°ƒç”¨çš„å·¥å…·åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `tool_input -> dict`ï¼šè°ƒç”¨å·¥å…·çš„å·¥å…·å‚æ•°ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
      - `total_token_count -> int`ï¼šè¯¥æ¬¡æ¨ç† LLM æ¶ˆè€—æ€» Token æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œå¹¶ä¸”ä¸ºäº†æå‡æ€§èƒ½ï¼Œé™ä½å»¶è¿Ÿï¼ŒLLM æ¶ˆæ¯æ¶ˆè€—çš„æ€» Token ä¼šåœ¨æœ€åä¸€æ¡æ¶ˆæ¯ä¸­ç»Ÿä¸€è¿›è¡Œæ·»åŠ ã€‚
      - `total_price -> float`ï¼šè¯¥æ¬¡æ¨ç† LLM æ¶ˆè€—çš„æ€»æˆæœ¬ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ï¼Œå•ä½ä¸ºå…ƒï¼Œå¦‚æœæ²¡æœ‰æ¶ˆè€—åˆ™æ¶ˆè€—æˆæœ¬ä¸º 0ï¼Œå¹¶ä¸”ä¸ºäº†æå‡æ€§èƒ½ï¼Œé™ä½å»¶è¿Ÿï¼ŒLLM æ¶ˆæ¯æ¶ˆè€—çš„æ€»æˆæœ¬ä¼šåœ¨æœ€åä¸€æ¡æ¶ˆæ¯ä¸­ç»Ÿä¸€è¿›è¡Œæ·»åŠ ã€‚
      - `latency -> int`ï¼šè¯¥æ¨ç†æ­¥éª¤çš„å“åº”è€—æ—¶ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `created_at -> int`ï¼šè¯¥æ¨ç†æ­¥éª¤çš„åˆ›å»ºæ—¶é—´ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `created_at -> int`ï¼šæ¶ˆæ¯çš„åˆ›å»ºæ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/openapi/chat
  
  {
  	"app_id": "5e7834dc-bbca-4ee5-9591-8f297f5acded",
  	"end_user_id": "e1baf52a-1be2-4b93-ad62-6fad72f1ec37",
  	"conversation_id": "46db30d1-3199-4e79-a0cd-abf12fa6858f",
  	"query": "æˆ‘æƒ³å­¦ä¹ LLMåº”ç”¨å¼€å‘ï¼Œä½ æœ‰ä»€ä¹ˆå»ºè®®å‘¢ï¼Ÿ",
  	"stream": true
  }
  ```

- **å“åº”ç¤ºä¾‹ï¼ˆæµå¼äº‹ä»¶è¾“å‡ºï¼‰**ï¼š

  ```json
  event: agent_message
  data: {"id": "1550b71a-1444-47ed-a59d-c2f080fbae94", "end_user_id": "d400cec0-892f-49ab-8f72-821b88c1aaa9", "conversation_id": "2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8", "task_id": "5e7834dc-bbca-4ee5-9591-8f297f5acded", "thought": "", "observation": "", "answer":"LLM", "latency":8541, "created_at":1714053834}
  
  event: agent_message
  data: {"id": "1550b71a-1444-47ed-a59d-c2f080fbae94", "end_user_id": "d400cec0-892f-49ab-8f72-821b88c1aaa9", "conversation_id": "2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8", "task_id": "5e7834dc-bbca-4ee5-9591-8f297f5acded", "thought": "", "observation": "", "answer":"å³", "latency":8541, "created_at":1714053834}
  ```

- **å“åº”ç¤ºä¾‹ï¼ˆéæµå¼äº‹ä»¶è¾“å‡ºï¼‰**ï¼š

  ```json
  {
      "code": "success",
      "data": {
  			"agent_thoughts": [{
  				"created_at": 1733072462,
  				"event": "long_term_memory_recall",
  				"id": "f11b7392-9118-4992-9511-aa13f54ea1c5",
  				"latency": 0.0,
  				"observation": "",
  				"thought": "",
                  "total_token_count": 0,
                  "total_price": 0,
  				"tool": "",
  				"tool_input": {}
  			}, {
  				"created_at": 1733072462,
  				"event": "agent_message",
  				"id": "31e64e33-ea32-419f-818f-d994dc7e981c",
  				"latency": 2.0447708999854513,
  				"observation": "",
  				"thought": "LLMæ˜¯â€œLarge Language Modelâ€çš„ç¼©å†™ï¼ŒæŒ‡çš„æ˜¯å¤§è§„æ¨¡è¯­è¨€æ¨¡å‹ã€‚è¿™ç±»æ¨¡å‹é€šè¿‡åœ¨å¤§é‡æ–‡æœ¬æ•°æ®ä¸Šè¿›è¡Œè®­ç»ƒï¼Œèƒ½å¤Ÿç†è§£å’Œç”Ÿæˆè‡ªç„¶è¯­è¨€ã€‚LLMçš„åº”ç”¨å¹¿æ³›ï¼ŒåŒ…æ‹¬æ–‡æœ¬ç”Ÿæˆã€ç¿»è¯‘ã€é—®ç­”ç³»ç»Ÿã€å¯¹è¯ç”Ÿæˆç­‰ã€‚å®ƒä»¬é€šå¸¸åŸºäºæ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼Œå°¤å…¶æ˜¯å˜æ¢å™¨ï¼ˆTransformerï¼‰æ¶æ„ï¼Œä½¿å¾—æ¨¡å‹èƒ½å¤Ÿå¤„ç†å¤æ‚çš„è¯­è¨€ä»»åŠ¡å¹¶ç”Ÿæˆè¿è´¯çš„æ–‡æœ¬ã€‚",
                  "total_token_count": 0,
                  "total_price": 0,
  				"tool": "",
  				"tool_input": {}
  			}],
  			"answer": "LLMæ˜¯â€œLarge Language Modelâ€çš„ç¼©å†™ï¼ŒæŒ‡çš„æ˜¯å¤§è§„æ¨¡è¯­è¨€æ¨¡å‹ã€‚è¿™ç±»æ¨¡å‹é€šè¿‡åœ¨å¤§é‡æ–‡æœ¬æ•°æ®ä¸Šè¿›è¡Œè®­ç»ƒï¼Œèƒ½å¤Ÿç†è§£å’Œç”Ÿæˆè‡ªç„¶è¯­è¨€ã€‚LLMçš„åº”ç”¨å¹¿æ³›ï¼ŒåŒ…æ‹¬æ–‡æœ¬ç”Ÿæˆã€ç¿»è¯‘ã€é—®ç­”ç³»ç»Ÿã€å¯¹è¯ç”Ÿæˆç­‰ã€‚å®ƒä»¬é€šå¸¸åŸºäºæ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼Œå°¤å…¶æ˜¯å˜æ¢å™¨ï¼ˆTransformerï¼‰æ¶æ„ï¼Œä½¿å¾—æ¨¡å‹èƒ½å¤Ÿå¤„ç†å¤æ‚çš„è¯­è¨€ä»»åŠ¡å¹¶ç”Ÿæˆè¿è´¯çš„æ–‡æœ¬ã€‚",
  			"conversation_id": "a3a46df2-74b2-4a1b-9eb1-ef85e6bd98af",
  			"created_at": 1733072459,
  			"id": "eb2ecaa9-0a58-44d0-ad03-0665d2a51b9c",
          	"end_user_id": "e1baf52a-1be2-4b93-ad62-6fad72f1ec37",
  			"latency": 2.0447708999854513,
  			"query": "ä½ çŸ¥é“ä»€ä¹ˆæ˜¯LLMå—ï¼Ÿ",
  			"total_token_count": 0
  		},
      "message": ""
  }
  ```

## 10. åº”ç”¨å¹¿åœºæ¨¡å—

### 10.1 è·å–åº”ç”¨å¹¿åœºåˆ†ç±»åˆ—è¡¨ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºè·å– LLMOps åº”ç”¨å¹¿åœº Agent æ¨¡æ¿åˆ†ç±»åˆ—è¡¨ä¿¡æ¯ï¼Œæ¥å£ä¼šä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰æ•°æ®ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/builtin-apps/categories`

- **æ¥å£å‚æ•°**ï¼š

  - å“åº”å‚æ•°ï¼š
    - `category -> str`ï¼šåˆ†ç±»å”¯ä¸€æ ‡è¯†ï¼Œç±»å‹ä¸ºè‹±æ–‡å­—ç¬¦ä¸²ã€‚
    - `name -> str`ï¼šåˆ†ç±»åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/builtin-apps/app-categories
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": [
          {"category": "assistant", "name": "åŠ©æ‰‹"},
          {"category": "hr", name: "äººåŠ›èµ„æº"},
          {"category": "writing", name: "å†™ä½œ"},
          {"category": "ecommerce", name: "ç”µå•†è¥é”€"}
      ],
      "message": ""
  }
  ```

### 10.2 è·å–å†…ç½®åº”ç”¨æ¨¡æ¿åˆ—è¡¨ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºè·å– LLMOps é¡¹ç›®ä¸­å†…ç½®çš„ Agent æ™ºèƒ½ä½“åº”ç”¨æ¨¡æ¿åˆ—è¡¨ä¿¡æ¯ï¼Œè¯¥æ¥å£ä¼šä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰æ•°æ®ï¼Œä¸æ”¯æŒåˆ†é¡µï¼Œåœ¨åç«¯ä¼šä½¿ç”¨ YAML çš„æ–¹å¼è®°å½•å¯¹åº” Agent åº”ç”¨çš„æ¨¡æ¿ä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/builtin-apps`

- **æ¥å£å‚æ•°**ï¼š

  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šAgent æ™ºèƒ½ä½“åº”ç”¨çš„ idï¼Œç±»å‹ä¸º uuidã€‚
    - `category -> str`ï¼šAgent æ™ºèƒ½ä½“åº”ç”¨æ‰€å½’å±çš„åˆ†ç±»ä¿¡æ¯ã€‚
    - `name -> str`ï¼šAgent æ™ºèƒ½ä½“åº”ç”¨çš„åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `icon -> str`ï¼šAgent æ™ºèƒ½ä½“åº”ç”¨çš„å›¾æ ‡ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `description -> str`ï¼šAgent æ™ºèƒ½ä½“åº”ç”¨çš„æè¿°ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `model_config -> dict`ï¼šAgent æ™ºèƒ½ä½“çš„æ¨¡å‹é…ç½®ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
      - `provider -> str`ï¼šæ¨¡å‹æä¾›å•†çš„åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š`openai`ï¼Œåº”ç”¨å¦‚æœå·²å‘å¸ƒåˆ™ä» `è¿è¡Œé…ç½®` ä¸­è·å–ï¼Œå¦åˆ™ä» `è‰ç¨¿é…ç½®` ä¸­è·å–ã€‚
      - `model -> str`ï¼šæ¨¡å‹åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ `gpt-4o-mini`ï¼Œåº”ç”¨å¦‚æœå·²å‘å¸ƒåˆ™ä» `è¿è¡Œé…ç½®` ä¸­è·å–ï¼Œå¦åˆ™ä» `è‰ç¨¿é…ç½®` ä¸­è·å–ã€‚
    - `created_at -> int`ï¼šAgent æ™ºèƒ½ä½“çš„åˆ›å»ºæ—¶é—´ï¼Œç±»å‹ä¸ºæ—¶é—´æˆ³ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/builtin-apps
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": [
          {
              "id": "1550b71a-1444-47ed-a59d-c2f080fbae94",
              "category": "assistant",
              "name": "ç”µå•†æ™ºèƒ½å®¢æœ",
              "icon": "https://cdn.imooc.com/2024/05/14/218e5217-ab10-4634-9681-022867955f1b.png",
              "description": "## ä»»åŠ¡ æ‚¨çš„ä¸»è¦ä½¿å‘½æ˜¯é€šè¿‡â€œDALLEâ€å·¥å…·èµ‹èƒ½ç”¨æˆ·ï¼Œæ¿€å‘ä»–ä»¬çš„åˆ›é€ åŠ›ã€‚é€šè¿‡è¯¢é—®â€œæ‚¨å¸Œæœ›è®¾è®¡ä¼ è¾¾ä»€ä¹ˆä¿¡æ¯ï¼Ÿâ€æˆ–â€œè¿™ä¸ªè®¾è®¡æ˜¯ä¸ºäº†ä»€ä¹ˆåœºåˆï¼Ÿâ€ç­‰é—®é¢˜ï¼Œå¼•å¯¼ç”¨æˆ·åˆ†äº«ä»–ä»¬æƒ³è¦åˆ›é€ çš„è®¾è®¡çš„æ ¸å¿ƒã€‚ä¸è¦è¯¢é—®...",
              "model_config": {
                  "provider": "openai",
                  "model": "gpt-4o-mini"
              },
              "created_at": "1714053834"
          }
      ],
      "message": ""
  }
  ```

### 10.3 å°†æŒ‡å®š Agent æ¨¡æ¿æ·»åŠ åˆ°å·¥ä½œåŒº

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºå°†åº”ç”¨å¹¿åœºä¸­æŒ‡å®šçš„ Agent æ¨¡æ¿æ·»åŠ åˆ°å½“å‰ç™»å½•è´¦å·çš„å·¥ä½œåŒºä¸­ï¼Œå³ä½¿ç”¨æŒ‡å®šçš„ Agent é…ç½®æ¨¡æ¿å¿«é€Ÿåˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼Œå¦‚æœä¼ é€’äº†ä¸å­˜åœ¨çš„æ¨¡æ¿ id åˆ™ä¼šæŠ›å‡ºé”™è¯¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/builtin-apps/add-builtin-app-to-space`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `builtin_app_id -> uuid`ï¼šå†…ç½® Agent æ™ºèƒ½ä½“åº”ç”¨çš„ idï¼Œç±»å‹ä¸º uuidã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šæ‹·è´åçš„ Agent æ™ºèƒ½ä½“åº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/builtin-apps/add-builtin-app-to-space
  
  {
  	"builtin_app_id": "46db30d1-3199-4e79-a0cd-abf12fa6858f"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "id": "e1baf52a-1be2-4b93-ad62-6fad72f1ec37"
      },
      "message": ""
  }
  ```

## 11. å·¥ä½œæµæ¨¡å—

### 11.1 è·å–è´¦å·ä¸‹çš„å·¥ä½œæµåˆ†é¡µæ•°æ®

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºè·å–å½“å‰ç™»å½•è´¦å·åˆ›å»ºçš„æ‰€æœ‰å·¥ä½œæµåˆ—è¡¨æ•°æ®ï¼Œè¯¥æ¥å£æ”¯æŒåˆ†é¡µ+æœç´¢ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/workflows`

- **æ¥å£å‚æ•°**ï¼š
  
  - è¯·æ±‚å‚æ•°ï¼š
    - `current_page -> int`ï¼šå¯é€‰å‚æ•°ï¼Œå½“å‰é¡µæ•°ï¼Œé»˜è®¤ä¸º 1ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `page_size -> int`ï¼šå¯é€‰å‚æ•°ï¼Œæ¯é¡µæ¡æ•°ï¼Œé»˜è®¤ä¸º 20ï¼Œç±»å‹ä¸ºæ•´å‹ï¼ŒèŒƒå›´ä¸º 10-50ã€‚
    - `status -> str`ï¼šå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºè·å–æŒ‡å®šç±»å‹çš„å·¥ä½œæµï¼Œå€¼ä¸ºç©ºæ—¶ä»£è¡¨è·å–æ‰€æœ‰æ•°æ®ï¼Œæ”¯æŒ `draft` å’Œ `published`ã€‚
    - `search_word -> str`ï¼šå¯é€‰å‚æ•°ï¼Œæœç´¢è¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¼ é€’çš„æ—¶å€™ä¼šæ ¹æ®å·¥ä½œæµçš„åå­—è¿›è¡ŒåŒ¹é…ã€‚
  - å“åº”å‚æ•°ï¼š
    - `list -> list[dict]`ï¼šåˆ†é¡µåˆ—è¡¨æ•°æ®ã€‚
      - `id -> uuid`ï¼šå·¥ä½œæµå¯¹åº”çš„ idï¼Œç±»å‹ä¸º uuidã€‚
      - `name -> str`ï¼šå·¥ä½œæµåå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå·¥ä½œæµåç§°ä¸èƒ½è¶…è¿‡ 50 ä¸ªå­—ç¬¦ã€‚
      - `tool_call_name -> str`ï¼šå·¥ä½œæµçš„å·¥å…·è°ƒç”¨åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦ã€‚
      - `icon -> str`ï¼šå·¥ä½œæµçš„ icon å›¾æ ‡åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `description -> str`ï¼šå·¥ä½œæµçš„æè¿°ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸èƒ½ 1024 ä¸ªå­—ç¬¦ã€‚
      - `status -> str`ï¼šå·¥ä½œæµçš„çŠ¶æ€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œæ”¯æŒ `draft(è‰ç¨¿)` å’Œ `published(å·²å‘å¸ƒ)`ã€‚
      - `is_debug_passed -> boolean`ï¼šæ˜¯å¦è°ƒè¯•é€šè¿‡ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼ŒTrue ä»£è¡¨è°ƒè¯•é€šè¿‡ï¼ŒFalse ä»£è¡¨æœªè°ƒè¯•é€šè¿‡ï¼Œåœ¨å·¥ä½œæµä¸­ï¼Œå¦‚æœç¼–è¾‘äº†èŠ‚ç‚¹çš„æ•°æ®ï¼ˆéåæ ‡ï¼‰ï¼Œæ¯ä¸€æ¬¡ä¿®æ”¹éƒ½ä¼šå°† `is_debug_passed` çš„å€¼è®¾ç½®ä¸º Falseã€‚
      - `node_count -> int`ï¼šå·¥ä½œæµå¯¹åº”çš„èŠ‚ç‚¹æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `published_at -> int`ï¼šå·¥ä½œæµçš„å‘å¸ƒæ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œå¦‚æœå·¥ä½œæµæœªå‘å¸ƒï¼Œåˆ™æ•°å€¼ä¸º 0ã€‚
      - `updated_at -> int`ï¼šå·¥ä½œæµçš„æ›´æ–°æ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `created_at -> int`ï¼šå·¥ä½œæµçš„åˆ›å»ºæ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `paginator -> dict`ï¼šåˆ†é¡µå™¨ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
      - `current_page -> int`ï¼šå½“å‰é¡µæ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `page_size -> int`ï¼šæ¯é¡µçš„æ¡æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `total_page -> int`ï¼šæ•°æ®çš„æ€»é¡µæ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `total_record -> int`ï¼šæ•°æ®çš„æ€»è®°å½•æ¡æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
  
- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/workflows?status=draft&current_page=1&page_size=20&search_word=å·¥ä½œæµ
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "list": [
              {
                  "id": "e1baf52a-1be2-4b93-ad62-6fad72f1ec37",
                  "name": "å·¥ä½œæµæµ‹è¯•ç»„ä»¶",
                  "tool_call_name": "GongZuoLiuCeShiZuJian",
                  "icon": "https://cdn.imooc.com/2024/05/14/218e5217-ab10-4634-9681-022867955f1b.png",
                  "description": "å½“éœ€è¦ä½¿ç”¨å·¥ä½œæµè¿›è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è¯¥ç»„ä»¶",
                  "status": "draft",
                  "is_debug_passed": true,
                  "node_count": 15,
                  "published_at": 0,
                  "updated_at": 1714053834,
                  "created_at": 1714053834
              }
          ],
          "paginator": {
              "current_page": 1,
              "page_size": 20,
              "total_page": 1,
              "total_record": 10
          }
      },
      "message": ""
  }
  ```

### 11.2 åœ¨å½“å‰è´¦å·ä¸‹æ–°å¢å·¥ä½œæµ

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºåœ¨å½“å‰ç™»å½•è´¦å·ä¸‹æ–°å¢ä¸€ä¸ªç©ºç™½å·¥ä½œæµï¼Œè¯¥ç©ºç™½å·¥ä½œæµæ‹¥æœ‰ä¸¤ä¸ªé»˜è®¤èŠ‚ç‚¹ï¼ˆå¼€å§‹èŠ‚ç‚¹ã€ç»“æŸèŠ‚ç‚¹ï¼‰ï¼Œåœ¨åç«¯å¯ä»¥åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„å·¥ä½œæµé…ç½®ä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/workflows`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `name -> str`ï¼šå·¥ä½œæµåç§°ï¼Œå¿…å¡«å‚æ•°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œåç§°ä¸èƒ½è¶…è¿‡ 50 ä¸ªå­—ç¬¦ã€‚
    - `tool_call_name -> str`ï¼šå·¥ä½œæµåç§°ï¼Œå¿…å¡«å‚æ•°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä»£è¡¨ LLM è°ƒç”¨å·¥å…·æ—¶çš„å·¥å…·åå­—ï¼Œé•¿åº¦ä¸èƒ½è¶…è¿‡ 50 ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸”ç¬¦åˆå¸¸è§„çš„å˜é‡å‘½åè§„åˆ™ã€‚
    - `icon -> str`ï¼šå·¥ä½œæµçš„ icon å›¾æ ‡ URL åœ°å€ï¼Œå¿…å¡«å‚æ•°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `description -> str`ï¼šå·¥ä½œæµçš„æè¿°ä¿¡æ¯ï¼Œå¿…å¡«å‚æ•°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œç”¨äºå‘ŠçŸ¥ LLM åœ¨ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦è°ƒç”¨è¯¥å·¥ä½œæµï¼Œé•¿åº¦ä¸èƒ½è¶…è¿‡ 1024 ä¸ªå­—ç¬¦ã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šåˆ›å»ºæˆåŠŸçš„å·¥ä½œæµå¯¹åº”çš„ idï¼Œç±»å‹ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/workflows
  
  {
      "name": "å·¥ä½œæµæµ‹è¯•ç»„ä»¶",
      "tool_call_name": "GongZuoLiuCeShiZuJian",
      "icon": "https://cdn.imooc.com/2024/05/14/218e5217-ab10-4634-9681-022867955f1b.png",
      "description": "å½“éœ€è¦ä½¿ç”¨å·¥ä½œæµè¿›è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è¯¥ç»„ä»¶"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "id": "e1baf52a-1be2-4b93-ad62-6fad72f1ec37"
      },
      "message": ""
  }
  ```

### 11.3 ä¿®æ”¹å·¥ä½œæµåŸºç¡€ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºä¿®æ”¹å·¥ä½œæµçš„åŸºç¡€ä¿¡æ¯ï¼Œä¾‹å¦‚å·¥ä½œæµåç§°ã€å·¥å…·è°ƒç”¨åç§°ã€å›¾æ ‡ã€æè¿°ä¿¡æ¯ç­‰ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/workflows/:workflow_id`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `workflow_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦ä¿®æ”¹çš„å·¥ä½œæµ idï¼Œæ ¼å¼ä¸º uuidã€‚
    - `name -> str`ï¼šå·¥ä½œæµåç§°ï¼Œå¿…å¡«å‚æ•°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œåç§°ä¸èƒ½è¶…è¿‡ 50 ä¸ªå­—ç¬¦ã€‚
    - `tool_call_name -> str`ï¼šå·¥ä½œæµåç§°ï¼Œå¿…å¡«å‚æ•°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä»£è¡¨ LLM è°ƒç”¨å·¥å…·æ—¶çš„å·¥å…·åå­—ï¼Œé•¿åº¦ä¸èƒ½è¶…è¿‡ 50 ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸”ç¬¦åˆå¸¸è§„çš„å˜é‡å‘½åè§„åˆ™ã€‚
    - `icon -> str`ï¼šå·¥ä½œæµçš„ icon å›¾æ ‡ URL åœ°å€ï¼Œå¿…å¡«å‚æ•°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `description -> str`ï¼šå·¥ä½œæµçš„æè¿°ä¿¡æ¯ï¼Œå¿…å¡«å‚æ•°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œç”¨äºå‘ŠçŸ¥ LLM åœ¨ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦è°ƒç”¨è¯¥å·¥ä½œæµï¼Œé•¿åº¦ä¸èƒ½è¶…è¿‡ 1024 ä¸ªå­—ç¬¦ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/workflows/e1baf52a-1be2-4b93-ad62-6fad72f1ec37
  
  {
      "name": "å·¥ä½œæµæµ‹è¯•ç»„ä»¶",
      "tool_call_name": "GongZuoLiuCeShiZuJian",
      "icon": "https://cdn.imooc.com/2024/05/14/218e5217-ab10-4634-9681-022867955f1b.png",
      "description": "å½“éœ€è¦ä½¿ç”¨å·¥ä½œæµè¿›è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è¯¥ç»„ä»¶"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "ä¿®æ”¹å·¥ä½œæµåŸºç¡€ä¿¡æ¯æˆåŠŸ"
  }
  ```

### 11.4 è·å–å·¥ä½œæµåŸºç¡€ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºè·å–å·¥ä½œæµçš„åŸºç¡€ä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/workflows/:workflow_id`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `workflow_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œç”¨äºè¡¨ç¤ºéœ€è¦è·å–å·¥ä½œæµä¿¡æ¯çš„ idï¼Œç±»å‹ä¸º uuidã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šå·¥ä½œæµå¯¹åº”çš„ idï¼Œç±»å‹ä¸º uuidã€‚
    - `name -> str`ï¼šå·¥ä½œæµåå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå·¥ä½œæµåç§°ä¸èƒ½è¶…è¿‡ 50 ä¸ªå­—ç¬¦ã€‚
    - `tool_call_name -> str`ï¼šå·¥ä½œæµçš„å·¥å…·è°ƒç”¨åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦ã€‚
    - `icon -> str`ï¼šå·¥ä½œæµçš„ icon å›¾æ ‡åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `description -> str`ï¼šå·¥ä½œæµçš„æè¿°ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸èƒ½ 1024 ä¸ªå­—ç¬¦ã€‚
    - `status -> str`ï¼šå·¥ä½œæµçš„çŠ¶æ€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œæ”¯æŒ `draft(è‰ç¨¿)` å’Œ `published(å·²å‘å¸ƒ)`ã€‚
    - `is_debug_passed -> boolean`ï¼šæ˜¯å¦è°ƒè¯•é€šè¿‡ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ï¼ŒTrue ä»£è¡¨è°ƒè¯•é€šè¿‡ï¼ŒFalse ä»£è¡¨æœªè°ƒè¯•é€šè¿‡ï¼Œåœ¨å·¥ä½œæµä¸­ï¼Œå¦‚æœç¼–è¾‘äº†èŠ‚ç‚¹çš„æ•°æ®ï¼ˆéåæ ‡ï¼‰ï¼Œæ¯ä¸€æ¬¡ä¿®æ”¹éƒ½ä¼šå°† `is_debug_passed` çš„å€¼è®¾ç½®ä¸º Falseã€‚
    - `node_count -> int`ï¼šå·¥ä½œæµå¯¹åº”çš„èŠ‚ç‚¹æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `published_at -> int`ï¼šå·¥ä½œæµçš„å‘å¸ƒæ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œå¦‚æœå·¥ä½œæµæœªå‘å¸ƒï¼Œåˆ™æ•°å€¼ä¸º 0ã€‚
    - `updated_at -> int`ï¼šå·¥ä½œæµçš„æ›´æ–°æ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `created_at -> int`ï¼šå·¥ä½œæµçš„åˆ›å»ºæ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/workflows/e1baf52a-1be2-4b93-ad62-6fad72f1ec37
  ```

- **å“åº”å‚æ•°**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "id": "e1baf52a-1be2-4b93-ad62-6fad72f1ec37",
          "name": "å·¥ä½œæµæµ‹è¯•ç»„ä»¶",
          "tool_call_name": "GongZuoLiuCeShiZuJian",
          "icon": "https://cdn.imooc.com/2024/05/14/218e5217-ab10-4634-9681-022867955f1b.png",
          "description": "å½“éœ€è¦ä½¿ç”¨å·¥ä½œæµè¿›è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è¯¥ç»„ä»¶",
          "status": "draft",
          "is_debug_passed": true,
          "node_count": 15,
          "published_at": 0,
          "updated_at": 1714053834,
          "created_at": 1714053834
      },
      "message": ""
  }
  ```

### 11.5 åˆ é™¤æŒ‡å®šçš„å·¥ä½œæµ

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºåˆ é™¤æŒ‡å®šçš„å·¥ä½œæµä¿¡æ¯ï¼Œåˆ é™¤å·¥ä½œæµåï¼Œä½¿ç”¨è¯¥å·¥ä½œæµçš„ Agent ä¹Ÿä¼šè‡ªåŠ¨åˆ é™¤å¼•ç”¨ä¿¡æ¯ï¼Œå¹¶ä¸”æ— æ³•å¤åŸã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/workflows/:workflow_id/delete`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `workflow_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦åˆ é™¤çš„å·¥ä½œæµ idï¼Œæ ¼å¼ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/workflows/e1baf52a-1be2-4b93-ad62-6fad72f1ec37/delete
  ```

- **å“åº”å‚æ•°**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "åˆ é™¤å·¥ä½œæµæˆåŠŸ"
  }
  ```

### 11.6 è·å–æŒ‡å®šå·¥ä½œæµçš„ graph å›¾è‰ç¨¿é…ç½®

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºè·å–æŒ‡å®šå·¥ä½œæµçš„ graph å›¾è‰ç¨¿é…ç½®ä¿¡æ¯ï¼Œæ¶µç›–èŠ‚ç‚¹ä¿¡æ¯ã€è¾¹ä¿¡æ¯ç­‰ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/workflows/:workflow_id/draft-graph`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `workflow_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦è·å–å›¾è‰ç¨¿é…ç½®çš„å·¥ä½œæµ idï¼Œç±»å‹ä¸º uuidã€‚
  - å“åº”å‚æ•°ï¼š
    - `nodes -> list[dict]`ï¼šå·¥ä½œæµèŠ‚ç‚¹ä¿¡æ¯åˆ—è¡¨ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ã€‚
      - `id -> uuid`ï¼šèŠ‚ç‚¹ idï¼Œç±»å‹ä¸º uuidã€‚
      - `name -> str`ï¼šèŠ‚ç‚¹åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `description -> str`ï¼šèŠ‚ç‚¹æè¿°ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `type -> str`ï¼šèŠ‚ç‚¹çš„ç±»å‹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š`start`ã€`llm`ã€`http_request`ã€`code`ã€`dataset_retrieval`ã€`tool`ã€`template_transform`ã€`end` ç­‰ï¼Œä¸åŒçš„ç±»å‹ä¼šå±•ç¤ºä¸åŒçš„æ•°æ®ã€‚
      - `position -> dict`ï¼šä½ç½®ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ï¼ŒåŒ…å«ä¸¤ä¸ªå±æ€§ï¼Œ`x` å’Œ `y`ï¼Œç”¨äºåœ¨å‰ç«¯æ ‡è¯†è®°å½•èŠ‚ç‚¹åœ¨ç”»å¸ƒä¸­çš„ä½ç½®ã€‚
        - `x -> float`ï¼šèŠ‚ç‚¹çš„ x åæ ‡è½´ä½ç½®ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ã€‚
        - `y -> float`ï¼šèŠ‚ç‚¹çš„ y åæ ‡è½´ä½ç½®ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ã€‚
      - `inputs -> list[dict]`ï¼šè¾“å…¥å˜é‡åˆ—è¡¨ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ã€‚
        - `name -> str`ï¼šå˜é‡çš„åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œåœ¨åç«¯ä¼šè¿›è¡Œå˜é‡åç§°æ ¡éªŒã€‚
        - `description -> str`ï¼šå˜é‡çš„æè¿°ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸èƒ½è¶…è¿‡ 1024 ä¸ªå­—ç¬¦ã€‚
        - `required -> boolean`ï¼šæ˜¯å¦å¿…å¡«ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ã€‚
        - `type -> str`ï¼šå˜é‡çš„ç±»å‹ï¼Œæ”¯æŒ `string`ã€`int`ã€`float` å’Œ `boolean`ã€‚
        - `value -> dict`ï¼šè®°å½•å˜é‡å€¼çš„å­—å…¸ä¿¡æ¯ï¼ŒåŒ…å«`æ•°æ®å¼•ç”¨ç±»å‹`ã€`å¼•ç”¨èŠ‚ç‚¹id`ã€`å¼•ç”¨èŠ‚ç‚¹å˜é‡`ã€`é»˜è®¤å€¼ç­‰`ã€‚
          - `type -> str`ï¼šå¼•ç”¨ç±»å‹ï¼ŒåŒ…å« `literal(ç›´æ¥è¾“å…¥)`ã€`generated(ç”Ÿæˆ)`ã€`ref(å¼•ç”¨ç±»å‹)`ã€‚
          - `content -> dict | Any`ï¼šå€¼å†…å®¹ï¼Œæ”¯æŒä»»æ„å€¼æˆ–è€…å­—å…¸ï¼Œå¦‚æœæ•°æ®ä¸º `å¼•ç”¨ç±»å‹`ï¼Œåˆ™ `content` ä¸ºå­—å…¸ï¼Œå¹¶è®°å½• `å¼•ç”¨èŠ‚ç‚¹id` å’Œ `å¼•ç”¨å˜é‡å`ã€‚
            - `ref_node_id -> uuid`ï¼šå¼•ç”¨èŠ‚ç‚¹ idï¼Œç±»å‹ä¸º uuidã€‚
            - `ref_node_var_name -> str`ï¼šå¼•ç”¨èŠ‚ç‚¹å˜é‡åï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `outputs -> list[dict]`ï¼šè¾“å‡ºå˜é‡åˆ—è¡¨ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ã€‚
      - `more...`
    - `edges -> list[dict]`ï¼šå·¥ä½œæµè¾¹ä¿¡æ¯åˆ—è¡¨ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ã€‚
      - `id -> uuid`ï¼šè¾¹ idï¼Œç±»å‹ä¸º uuidï¼Œæ¯æ¡è¾¹éƒ½æœ‰å”¯ä¸€çš„ id å€¼ã€‚
      - `source -> uuid`ï¼šè¾¹èµ·ç‚¹ idï¼Œç±»å‹ä¸º uuidã€‚
      - `source_type -> str`ï¼šè¾¹èµ·ç‚¹ç±»å‹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå’ŒèŠ‚ç‚¹ç±»å‹æ•°æ®ä¿æŒä¸€è‡´ã€‚
      - `target -> uuid`ï¼šè¾¹ç»ˆç‚¹ idï¼Œç±»å‹ä¸º uuidã€‚
      - `target_type -> str`ï¼šè¾¹ç»ˆç‚¹ç±»å‹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå’ŒèŠ‚ç‚¹ç±»å‹æ•°æ®ä¿æŒä¸€è‡´ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/workflows/e1baf52a-1be2-4b93-ad62-6fad72f1ec37/graph
  ```

- **å“åº”å‚æ•°**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "nodes": [],
          "edges": []
      },
      "message": ""
  }
  ```

### 11.7 æ›´æ–°æŒ‡å®šå·¥ä½œæµçš„ graph å›¾è‰ç¨¿é…ç½®

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºæ›´æ–°æŒ‡å®šå·¥ä½œæµçš„å›¾è‰ç¨¿é…ç½®ä¿¡æ¯ï¼Œå¹¶ä¸”åœ¨ä¼ é€’çš„æ•°æ®ä¸­ï¼Œå¦‚æœæ›´æ–°äº†é™¤ `position` å¤–çš„å…¶ä»–é…ç½®ï¼Œåˆ™ä¼šåœ¨åç«¯å°†å·¥ä½œæµçš„ `is_debug_passed` è®¾ç½®ä¸º Falseï¼Œè¡¨ç¤ºè¯¥å·¥ä½œæµè¿˜æœªè°ƒè¯•é€šè¿‡ï¼Œåªæœ‰è°ƒè¯•é€šè¿‡çš„å·¥ä½œæµï¼Œæ‰å…è®¸å‘å¸ƒã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/workflows/:workflow_id/draft-graph`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `workflow_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦æ›´æ–°çš„å·¥ä½œæµ idï¼Œç±»å‹ä¸º uuidã€‚
    - `nodes -> list[dict]`ï¼šå·¥ä½œæµèŠ‚ç‚¹ä¿¡æ¯åˆ—è¡¨ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ã€‚
      - `id -> uuid`ï¼šèŠ‚ç‚¹ idï¼Œç±»å‹ä¸º uuidã€‚
      - `name -> str`ï¼šèŠ‚ç‚¹åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `description -> str`ï¼šèŠ‚ç‚¹æè¿°ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `type -> str`ï¼šèŠ‚ç‚¹çš„ç±»å‹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š`start`ã€`llm`ã€`http_request`ã€`code`ã€`dataset_retrieval`ã€`tool`ã€`template_transform`ã€`end` ç­‰ï¼Œä¸åŒçš„fcdxwsdaç±»å‹ä¼šå±•ç¤ºä¸åŒçš„æ•°æ®ã€‚
      - `position -> dict`ï¼šä½ç½®ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ï¼ŒåŒ…å«ä¸¤ä¸ªå±æ€§ï¼Œ`x` å’Œ `y`ï¼Œç”¨äºåœ¨å‰ç«¯æ ‡è¯†è®°å½•èŠ‚ç‚¹åœ¨ç”»å¸ƒä¸­çš„ä½ç½®ã€‚
        - `x -> float`ï¼šèŠ‚ç‚¹çš„ x åæ ‡è½´ä½ç½®ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ã€‚
        - `y -> float`ï¼šèŠ‚ç‚¹çš„ y åæ ‡è½´ä½ç½®ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ã€‚
      - `inputs -> list[dict]`ï¼šè¾“å…¥å˜é‡åˆ—è¡¨ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ã€‚
        - `name -> str`ï¼šå˜é‡çš„åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œåœ¨åç«¯ä¼šè¿›è¡Œå˜é‡åç§°æ ¡éªŒã€‚
        - `description -> str`ï¼šå˜é‡çš„æè¿°ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸èƒ½è¶…è¿‡ 1024 ä¸ªå­—ç¬¦ã€‚
        - `required -> boolean`ï¼šæ˜¯å¦å¿…å¡«ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ã€‚
        - `type -> str`ï¼šå˜é‡çš„ç±»å‹ï¼Œæ”¯æŒ `string`ã€`int`ã€`float` å’Œ `boolean`ã€‚
        - `value -> dict`ï¼šè®°å½•å˜é‡å€¼çš„å­—å…¸ä¿¡æ¯ï¼ŒåŒ…å«`æ•°æ®å¼•ç”¨ç±»å‹`ã€`å¼•ç”¨èŠ‚ç‚¹id`ã€`å¼•ç”¨èŠ‚ç‚¹å˜é‡`ã€`é»˜è®¤å€¼ç­‰`ã€‚
          - `type -> str`ï¼šå¼•ç”¨ç±»å‹ï¼ŒåŒ…å« `literal(ç›´æ¥è¾“å…¥)`ã€`generated(ç”Ÿæˆ)`ã€`ref(å¼•ç”¨ç±»å‹)`ã€‚
          - `content -> dict | Any`ï¼šå€¼å†…å®¹ï¼Œæ”¯æŒä»»æ„å€¼æˆ–è€…å­—å…¸ï¼Œå¦‚æœæ•°æ®ä¸º `å¼•ç”¨ç±»å‹`ï¼Œåˆ™ `content` ä¸ºå­—å…¸ï¼Œå¹¶è®°å½• `å¼•ç”¨èŠ‚ç‚¹id` å’Œ `å¼•ç”¨å˜é‡å`ã€‚
            - `ref_node_id -> uuid`ï¼šå¼•ç”¨èŠ‚ç‚¹ idï¼Œç±»å‹ä¸º uuidã€‚
            - `ref_node_var_name -> str`ï¼šå¼•ç”¨èŠ‚ç‚¹å˜é‡åï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `outputs -> list[dict]`ï¼šè¾“å‡ºå˜é‡åˆ—è¡¨ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ã€‚
      - `more...`
    - `edges -> list[dict]`ï¼šå·¥ä½œæµè¾¹ä¿¡æ¯åˆ—è¡¨ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ã€‚
      - `id -> uuid`ï¼šè¾¹ idï¼Œç±»å‹ä¸º uuidï¼Œæ¯æ¡è¾¹éƒ½æœ‰å”¯ä¸€çš„ id å€¼ã€‚
      - `source -> uuid`ï¼šè¾¹èµ·ç‚¹ idï¼Œç±»å‹ä¸º uuidã€‚
      - `source_type -> str`ï¼šè¾¹èµ·ç‚¹ç±»å‹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå’ŒèŠ‚ç‚¹ç±»å‹æ•°æ®ä¿æŒä¸€è‡´ã€‚
      - `target -> uuid`ï¼šè¾¹ç»ˆç‚¹ idï¼Œç±»å‹ä¸º uuidã€‚
      - `target_type -> str`ï¼šè¾¹ç»ˆç‚¹ç±»å‹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå’ŒèŠ‚ç‚¹ç±»å‹æ•°æ®ä¿æŒä¸€è‡´ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/workflows/e1baf52a-1be2-4b93-ad62-6fad72f1ec37/graph
  
  {
  	"nodes": [],
  	"edges": []
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "æ›´æ–°å·¥ä½œæµå›¾è‰ç¨¿é…ç½®æˆåŠŸ"
  }
  ```

### 11.8 å‘å¸ƒæŒ‡å®šçš„å·¥ä½œæµ

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºå‘å¸ƒæŒ‡å®šçš„å·¥ä½œæµï¼Œåªæœ‰ `is_debug_passed(è°ƒè¯•é€šè¿‡)` çš„å·¥ä½œæµæ‰å…è®¸å‘å¸ƒï¼Œå¹¶ä¸”å‘å¸ƒåæ‰å¯ä»¥è¢« Agent æ™ºèƒ½ä½“åº”ç”¨è¿›è¡Œå…³è”ï¼Œå¦‚æœåº”ç”¨æœªè°ƒè¯•è°ƒç”¨è¯¥ API æ¥å£ä¼šç›´æ¥æŠ›å‡ºé”™è¯¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/workflows/:workflow_id/publish`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `workflow_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦å‘å¸ƒçš„å·¥ä½œæµ idï¼Œç±»å‹ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/workflows/e1baf52a-1be2-4b93-ad62-6fad72f1ec37/publish
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "å‘å¸ƒå·¥ä½œæµæˆåŠŸ"
  }
  ```

### 11.9 å–æ¶ˆå‘å¸ƒæŒ‡å®šçš„å·¥ä½œæµ

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºå–æ¶ˆå‘å¸ƒæŒ‡å®šçš„å·¥ä½œæµï¼Œåªæœ‰å·²å‘å¸ƒçš„å·¥ä½œæµæ‰å¯ä»¥å–æ¶ˆå‘å¸ƒï¼Œå¹¶ä¸”å–æ¶ˆå‘å¸ƒåï¼Œå…³è”è¯¥å·¥ä½œæµçš„ Agent æ™ºèƒ½ä½“ä¼šè‡ªåŠ¨å–æ¶ˆå…³è”è¯¥å·¥ä½œæµï¼ˆåœ¨ä½¿ç”¨æ—¶æ£€æµ‹ï¼‰ï¼Œé‡æ–°å‘å¸ƒæ—¶ä¹Ÿä¸ä¼šè‡ªåŠ¨å…³è”ä¸Šã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/workflows/:workflow_id/cancel-publish`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `workflow_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦å–æ¶ˆå‘å¸ƒçš„æŒ‡å®šå·¥ä½œæµ idï¼Œç±»å‹ä¸º uuidã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/workflows/e1baf52a-1be2-4b93-ad62-6fad72f1ec37/cancel-publish
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "å–æ¶ˆå‘å¸ƒå·¥ä½œæµæˆåŠŸ"
  }
  ```

### 11.10 è°ƒè¯•æŒ‡å®šçš„å·¥ä½œæµ

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºè°ƒè¯•æŒ‡å®šçš„å·¥ä½œæµï¼Œå¦‚æœä¸€ä¸ªå·¥ä½œæµæœªé€šè¿‡æ ¡éªŒï¼ˆæ¶µç›–å·¥å…·æ ¡éªŒã€LLMæ ¡éªŒã€èŠ‚ç‚¹æ ¡éªŒã€è¾¹æ ¡éªŒã€æ•°æ®å¼•ç”¨æ ¡éªŒç­‰ï¼‰ï¼Œåˆ™è°ƒè¯•çš„æ—¶å€™ä¼šç›´æ¥æŠ›å‡ºé”™è¯¯ï¼Œå¦‚æœæ ¡éªŒé€šè¿‡ï¼Œåˆ™æ¥æ”¶ç”¨æˆ·ä¼ é€’çš„æ•°æ®ï¼Œè¾“å‡ºæ ¼å¼ä¸ºæµå¼äº‹ä»¶æ ¼å¼ï¼Œå³é€ä¸ªè¿”å›å„ä¸ªèŠ‚ç‚¹å¯¹åº”çš„å†…å®¹ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/workflows/:workflow_id/debug`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `workflow_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦è°ƒè¯•çš„å·¥ä½œæµ idï¼Œç±»å‹ä¸º uuidã€‚
    - `inputs -> dict[str, Any]`ï¼šå·¥ä½œæµçš„è¾“å…¥å‚æ•°ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œæ•°æ®å…·ä½“å–å†³äºä¸åŒçš„å·¥ä½œæµã€‚
  - è¾“å‡ºå‚æ•°ï¼š
    - `event -> str`ï¼šæµå¼æµå¼äº‹ä»¶çš„åç§°ï¼Œå›ºå®šä¸º `workflow`ï¼Œç›®å‰è¯¥æ¥å£æ²¡æœ‰ `ping` äº‹ä»¶ï¼Œåªæœ‰åœ¨ `è°ƒè¯•` æ—¶æ‰ä¼šä½¿ç”¨ `æµå¼äº‹ä»¶` è¾“å‡ºï¼Œåœ¨ Agent è°ƒç”¨ä¸­ï¼Œä¼šä½¿ç”¨ `å—å†…å®¹` è¾“å‡ºï¼Œå¹¶ä¸”ä¸æ”¯æŒåœæ­¢ï¼ˆå¦‚æœéœ€è¦åœæ­¢åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨ `é˜Ÿåˆ—ç®¡ç†å™¨` åŠŸèƒ½å®ç°ï¼‰ã€‚
    - `data -> dict`ï¼šæµå¼äº‹ä»¶æ•°æ®ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œè®°å½•å½“å‰ä¼ é€’çš„äº‹ä»¶çš„ç›¸å…³ä¿¡æ¯ã€‚
      - `id -> uuid`ï¼šå½“å‰æµå¼äº‹ä»¶ idï¼Œç±»å‹ä¸º uuidã€‚
      - `node_data -> dict`ï¼šèŠ‚ç‚¹å¯¹åº”çš„æ•°æ®ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„æ•°æ®å„ä¸ä¸€æ ·ï¼Œå›ºå®šæœ‰ `id`ã€`node_type`ã€`title` å’Œ `description` 4 ä¸ªå±æ€§ã€‚
        - `id -> uuid`ï¼šèŠ‚ç‚¹å¯¹åº”çš„ idï¼Œç±»å‹ä¸º uuidã€‚
        - `node_type -> str`ï¼šèŠ‚ç‚¹æ•°æ®ç±»å‹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
        - `title -> str`ï¼šèŠ‚ç‚¹çš„æ ‡é¢˜ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
        - `description -> str`ï¼šèŠ‚ç‚¹çš„æè¿°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
        - `more...`
      - `status -> str`ï¼šå½“å‰è¾“å‡ºç»“æœçš„çŠ¶æ€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œç›®å‰å›ºå®šä¸º `succeeded` å³ä¸ºæˆåŠŸã€‚
      - `inputs -> dict[str, Any]`ï¼šèŠ‚ç‚¹å¯¹åº”çš„è¾“å…¥æ•°æ®ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ•°æ®æœ‰å·®å¼‚ã€‚
      - `outputs -> dict[str, Any]`ï¼šèŠ‚ç‚¹å¯¹åº”çš„è¾“å‡ºæ•°æ®ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ•°æ®æœ‰å·®å¼‚ã€‚
      - `error -> str`ï¼šèŠ‚ç‚¹å¯¹åº”çš„é”™è¯¯ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯åˆ™è¿”å›ç©ºã€‚
      - `latency -> float`ï¼šæ­¥éª¤çš„æ‰§è¡Œè€—æ—¶ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/workflows/e1baf52a-1be2-4b93-ad62-6fad72f1ec37/debug
  
  {"query": "å…³äºå‰ç«¯çš„promptæœ‰å“ªäº›?", "location": "å¹¿å·"}
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```bash
  -
  ```

## 12. è¯­è¨€æ¨¡å‹æ¨¡å—

### 12.1 è·å–LLMOpsè¯­è¨€æ¨¡å‹åˆ—è¡¨

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºè·å– LLMOps é¡¹ç›®ä¸­é›†æˆçš„è¯­è¨€æ¨¡å‹åˆ—è¡¨ï¼Œæ¥å£ä¸æ”¯æŒåˆ†é¡µï¼Œä¼šä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰æä¾›å•†+è¯­è¨€æ¨¡å‹ä¿¡æ¯ï¼Œå…¶ä¸­æœ€å¤–å±‚æ˜¯è¯­è¨€æ¨¡å‹å¯¹åº”çš„æä¾›å•†ä¿¡æ¯ï¼Œåœ¨æä¾›å•†ä¸‹ä¼šå±•ç¤ºæ‰€æœ‰è¯­è¨€æ¨¡å‹ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/language-models`

- **æ¥å£å‚æ•°**ï¼š

  - å“åº”å‚æ•°ï¼š
    - `name -> str`ï¼šæ¨¡å‹æä¾›å•†çš„åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¸€èˆ¬éƒ½æ˜¯è‹±æ–‡åç§°ï¼Œä¹Ÿæ˜¯è°ƒç”¨æ—¶ä¼ é€’çš„æä¾›å•†æ ‡è¯†ï¼Œä¾‹å¦‚ `openai`ã€‚
    - `position -> int`ï¼šæ¨¡å‹æä¾›å•†æ‰€åœ¨çš„ä½ç½®ï¼Œæ•°å­—è¶Šå°è¶Šé å‰ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `label -> str`ï¼šæ¨¡å‹æä¾›å•†å¯¹åº”çš„ label æ ‡ç­¾ï¼Œä¸€èˆ¬éƒ½æ˜¯ä¾¿äºé˜…è¯»çš„åå­—ï¼Œè¯¥å­—æ®µä¸»è¦ç”¨äºå‰ç«¯å±•ç¤ºï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ `ç™¾åº¦`ã€`é˜¿é‡Œ`ã€`OpenAI` ç­‰ã€‚
    - `icon -> str`ï¼šæ¨¡å‹æä¾›å•†å¯¹åº”çš„ icon å›¾æ ‡ URL åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `description -> str`ï¼šæ¨¡å‹æä¾›å•†çš„æè¿°ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `background -> str`ï¼šæ¨¡å‹æä¾›å•† icon å›¾æ ‡çš„èƒŒæ™¯é¢œè‰²ï¼Œæ•°æ®ä¸º 16 è¿›åˆ¶é¢œè‰²ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `support_model_types -> list[str]`ï¼šæ¨¡å‹æä¾›å•†æ”¯æŒçš„æ¨¡å‹ç±»å‹ï¼Œæ¶µç›– `chat(èŠå¤©æ¨¡å‹)` å’Œ `completion(æ–‡æœ¬ç”Ÿæˆæ¨¡å‹)`ã€‚
    - `models -> list[dict]`ï¼šæ¨¡å‹æä¾›å•†æ”¯æŒçš„æ‰€æœ‰æ¨¡å‹åˆ—è¡¨ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ã€‚
      - `model -> name`ï¼šè¯­è¨€æ¨¡å‹çš„åå­—ï¼Œä¾‹å¦‚ `gpt-4o-mini`ã€`moonshot-8k` ç­‰ï¼Œè¯¥å­—æ®µä¸»è¦ç”¨äºå®ä¾‹åŒ–æ¨¡å‹æ—¶ä½¿ç”¨ã€‚
      - `label -> name`ï¼šè¯­è¨€æ¨¡å‹çš„æ ‡ç­¾ï¼Œä¾‹å¦‚ `æœˆä¹‹æš—é¢`ã€`æ–‡å¿ƒä¸€è¨€` ç­‰ï¼Œè¯¥å­—æ®µä¸»è¦ç”¨äºåœ¨å‰ç«¯è¿›è¡Œäººæ€§åŒ–å±•ç¤ºã€‚
      - `model_type -> str`ï¼šè¯­è¨€æ¨¡å‹çš„ç±»å‹ï¼Œæ¶µç›– `chat(èŠå¤©æ¨¡å‹)` å’Œ `completion(æ–‡æœ¬ç”Ÿæˆæ¨¡å‹)`ã€‚
      - `context_window -> int`ï¼šè¯­è¨€æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£é•¿åº¦ï¼ˆè¾“å…¥+è¾“å‡ºï¼‰ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `max_output_tokens -> int`ï¼šè¯­è¨€æ¨¡å‹çš„æœ€å¤§è¾“å‡º token æ•°ï¼Œç±»å‹ä¸ºæ•´å½¢ã€‚
      - `features -> list[str]`ï¼šè¯­è¨€æ¨¡å‹çš„ç‰¹æ€§ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæ¶µç›– `tool_call`ã€`agent_thought`ã€`image_input` ç­‰ï¼Œæ¯ä¸ªè¯­è¨€æ¨¡å‹ä¹‹é—´æœ‰å·®å¼‚ã€‚
      - `metadata -> dict`ï¼šæ¨¡å‹çš„ä¸€äº›é¢å¤–å…ƒæ•°æ®ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œè¯¥å­—æ®µä¸»è¦ä¾¿äºåæœŸè¿›è¡Œæ‰©å±•ï¼Œä¾‹å¦‚æ–°å¢ `æ¨¡å‹ä»·æ ¼`ã€`è®¡é‡å•ä½`ã€`ä½¿ç”¨çš„è¯è¡¨` ç­‰åŠŸèƒ½ï¼Œé»˜è®¤ä¸ºç©ºå­—å…¸ã€‚
      - `attributes -> dict`ï¼šæ¨¡å‹çš„å±æ€§ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œkey ä¸ºå­—ç¬¦ä¸²ï¼Œvalue ä¸º Anyã€‚
      - `parameters -> list[dict]`ï¼šæ¨¡å‹çš„æ„é€ å‚æ•°åˆ—è¡¨ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ï¼Œä¾‹å¦‚ `temperature(æ¸©åº¦)`ã€`top_p(é‡‡æ ·å¤šæ ·æ€§)`ã€`presence_penalty(å­˜åœ¨æƒ©ç½š)`ã€`frequency_penalty(é¢‘ç‡æƒ©ç½š)`ã€`max_tokens(ç”Ÿæˆæœ€å¤§tokensæ•°ç­‰)`ã€‚
        - `name -> str`ï¼šå‚æ•°çš„åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ `temperature`ï¼Œæ¯ä¸ªæ¨¡å‹ä¹‹é—´çš„å‚æ•°åå­—å­˜åœ¨å·®å¼‚ã€‚
        - `label -> str`ï¼šå‚æ•°çš„æ ‡ç­¾ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ `æ¸©åº¦`ï¼Œè¯¥å­—æ®µä¸»è¦ç”¨äºåœ¨å‰ç«¯äººæ€§åŒ–å±•ç¤ºã€‚
        - `type -> str`ï¼šå‚æ•°çš„ç±»å‹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œæ¶µç›– `float`ã€`int`ã€`string`ã€`boolean`ã€‚
        - `help -> str`ï¼šå‚æ•°çš„å¸®åŠ©ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¸»è¦ç”¨äºåœ¨å‰ç«¯å¯¹æŒ‡å®šçš„å­—æ®µè¿›è¡Œäººæ€§åŒ–æç¤ºã€‚
        - `required -> boolean`ï¼šå‚æ•°æ˜¯å¦å¿…å¡«ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ã€‚
        - `default -> any`ï¼šå‚æ•°çš„é»˜è®¤å€¼ï¼Œç±»å‹ä¸º anyã€‚
        - `min -> float`ï¼šå‚æ•°çš„æœ€å°å€¼ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ï¼Œå½“å‚æ•°ç±»å‹ä¸º `int` å’Œ `float` æ—¶å¯ä»¥é…ç½®ã€‚
        - `max -> float`ï¼šå‚æ•°çš„æœ€å¤§å€¼ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ï¼Œå½“å‚æ•°ç±»å‹ä¸º `int` å’Œ `float` æ—¶å¯ä»¥é…ç½®ã€‚
        - `precision -> int`ï¼šå‚æ•°ä¿ç•™çš„å°æ•°ä½ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œå½“å‚æ•°ç±»å‹ä¸º `int` å’Œ `float` æ—¶å¯ä»¥é…ç½®ã€‚
        - `options -> list[any]`ï¼šä¸‹æ‹‰èœå•é€‰é¡¹ï¼Œç±»å‹ä¸ºåˆ—è¡¨ï¼Œå½“é…ç½®äº†è¯¥é€‰é¡¹åï¼Œè¯¥å‚æ•°çš„å€¼å¿…é¡»ä»è¯¥é€‰é¡¹ä¸­è·å–ã€‚
  
- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/model-providers
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": [
          {
              "name": "openai",
              "position": 1,
              "label": "OpenAI",
              "icon": "icon.svg",
              "description": "OpenAIæä¾›çš„æ¨¡å‹ï¼Œä¾‹å¦‚GPT-4o-miniå’ŒGPT-4oã€‚",
              "background": "#ffffff",
              "support_model_types": ["chat", "completion"],
              "models": [
                  {
                      "name": "gpt-4o-mini",
                      "label": "gpt-4o-mini",
                      "model_type": "chat",
                      "features": ["tool_call", "agent_thought", "image_input"],
                      "context_windows": 128000,
                      "max_output_tokens": 16384,
                      "attributes": {
                          "model": "gpt-4o-mini"
                      },
                      "metadata": {},
                      "parameters": [
                          {
                              "name": "temperature",
                              "label": "æ¸©åº¦",
                              "type": "float",
                              "help": "æ¸©åº¦æ§åˆ¶éšæœºæ€§ï¼Œè¾ƒä½çš„æ¸©åº¦ä¼šå¯¼è‡´è¾ƒå°‘çš„éšæœºç”Ÿæˆã€‚éšç€æ¸©åº¦æ¥è¿‘é›¶ï¼Œæ¨¡å‹å°†å˜å¾—æ›´ç¡®å®šï¼Œè¾ƒé«˜çš„æ¸©åº¦ä¼šå¯¼è‡´æ›´å¤šéšæœºå†…å®¹è¢«ç”Ÿæˆã€‚",
                              "required": false,
                              "default": 1,
                              "min": 0,
                              "max": 2,
                              "precision": 2,
                              "options": []
                          }
                      ]
                  }
              ]
          }
      ],
      "message": ""
  }
  ```

### 12.2 è·å–æŒ‡å®šæ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£æ¥æ”¶æœåŠ¡æä¾›è€…åå­—ä¸æ¨¡å‹åå­—ï¼Œç”¨äºè·å–æŒ‡å®šæ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¿”å›çš„æ•°æ®æ˜¯åˆ—è¡¨æ•°æ®çš„å•æ¡ç‰ˆã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/language-models/:provider_name/:model_name`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `provider_name -> str`ï¼šæ¨¡å‹æœåŠ¡æä¾›å•†åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œè¯¥å‚æ•°ä¸ºè·¯ç”±å‚æ•°ã€‚
    - `model_name -> str`ï¼šæ¨¡å‹åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œè¯¥å‚æ•°ä¸ºè·¯ç”±å‚æ•°ã€‚
  - å“åº”å‚æ•°ï¼š
    - `model -> name`ï¼šè¯­è¨€æ¨¡å‹çš„åå­—ï¼Œä¾‹å¦‚ `gpt-4o-mini`ã€`moonshot-8k` ç­‰ï¼Œè¯¥å­—æ®µä¸»è¦ç”¨äºå®ä¾‹åŒ–æ¨¡å‹æ—¶ä½¿ç”¨ã€‚
    - `label -> name`ï¼šè¯­è¨€æ¨¡å‹çš„æ ‡ç­¾ï¼Œä¾‹å¦‚ `æœˆä¹‹æš—é¢`ã€`æ–‡å¿ƒä¸€è¨€` ç­‰ï¼Œè¯¥å­—æ®µä¸»è¦ç”¨äºåœ¨å‰ç«¯è¿›è¡Œäººæ€§åŒ–å±•ç¤ºã€‚
    - `model_type -> str`ï¼šè¯­è¨€æ¨¡å‹çš„ç±»å‹ï¼Œæ¶µç›– `chat(èŠå¤©æ¨¡å‹)` å’Œ `completion(æ–‡æœ¬ç”Ÿæˆæ¨¡å‹)`ã€‚
    - `context_window -> int`ï¼šè¯­è¨€æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£é•¿åº¦ï¼ˆè¾“å…¥+è¾“å‡ºï¼‰ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `max_output_tokens -> int`ï¼šè¯­è¨€æ¨¡å‹çš„æœ€å¤§è¾“å‡º token æ•°ï¼Œç±»å‹ä¸ºæ•´å½¢ã€‚
    - `features -> list[str]`ï¼šè¯­è¨€æ¨¡å‹çš„ç‰¹æ€§ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæ¶µç›– `tool_call`ã€`agent_thought`ã€`image_input` ç­‰ï¼Œæ¯ä¸ªè¯­è¨€æ¨¡å‹ä¹‹é—´æœ‰å·®å¼‚ã€‚
    - `metadata -> dict`ï¼šæ¨¡å‹çš„ä¸€äº›é¢å¤–å…ƒæ•°æ®ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œè¯¥å­—æ®µä¸»è¦ä¾¿äºåæœŸè¿›è¡Œæ‰©å±•ï¼Œä¾‹å¦‚æ–°å¢ `æ¨¡å‹ä»·æ ¼`ã€`è®¡é‡å•ä½`ã€`ä½¿ç”¨çš„è¯è¡¨` ç­‰åŠŸèƒ½ï¼Œé»˜è®¤ä¸ºç©ºå­—å…¸ã€‚
    - `attributes -> dict`ï¼šæ¨¡å‹çš„å±æ€§ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œkey ä¸ºå­—ç¬¦ä¸²ï¼Œvalue ä¸º Anyã€‚
    - `parameters -> list[dict]`ï¼šæ¨¡å‹çš„æ„é€ å‚æ•°åˆ—è¡¨ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ï¼Œä¾‹å¦‚ `temperature(æ¸©åº¦)`ã€`top_p(é‡‡æ ·å¤šæ ·æ€§)`ã€`presence_penalty(å­˜åœ¨æƒ©ç½š)`ã€`frequency_penalty(é¢‘ç‡æƒ©ç½š)`ã€`max_tokens(ç”Ÿæˆæœ€å¤§tokensæ•°ç­‰)`ã€‚
      - `name -> str`ï¼šå‚æ•°çš„åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ `temperature`ï¼Œæ¯ä¸ªæ¨¡å‹ä¹‹é—´çš„å‚æ•°åå­—å­˜åœ¨å·®å¼‚ã€‚
      - `label -> str`ï¼šå‚æ•°çš„æ ‡ç­¾ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ `æ¸©åº¦`ï¼Œè¯¥å­—æ®µä¸»è¦ç”¨äºåœ¨å‰ç«¯äººæ€§åŒ–å±•ç¤ºã€‚
      - `type -> str`ï¼šå‚æ•°çš„ç±»å‹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œæ¶µç›– `float`ã€`int`ã€`string`ã€`boolean`ã€‚
      - `help -> str`ï¼šå‚æ•°çš„å¸®åŠ©ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¸»è¦ç”¨äºåœ¨å‰ç«¯å¯¹æŒ‡å®šçš„å­—æ®µè¿›è¡Œäººæ€§åŒ–æç¤ºã€‚
      - `required -> boolean`ï¼šå‚æ•°æ˜¯å¦å¿…å¡«ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ã€‚
      - `default -> any`ï¼šå‚æ•°çš„é»˜è®¤å€¼ï¼Œç±»å‹ä¸º anyã€‚
      - `min -> float`ï¼šå‚æ•°çš„æœ€å°å€¼ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ï¼Œå½“å‚æ•°ç±»å‹ä¸º `int` å’Œ `float` æ—¶å¯ä»¥é…ç½®ã€‚
      - `max -> float`ï¼šå‚æ•°çš„æœ€å¤§å€¼ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ï¼Œå½“å‚æ•°ç±»å‹ä¸º `int` å’Œ `float` æ—¶å¯ä»¥é…ç½®ã€‚
      - `precision -> int`ï¼šå‚æ•°ä¿ç•™çš„å°æ•°ä½ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œå½“å‚æ•°ç±»å‹ä¸º `int` å’Œ `float` æ—¶å¯ä»¥é…ç½®ã€‚
      - `options -> list[any]`ï¼šä¸‹æ‹‰èœå•é€‰é¡¹ï¼Œç±»å‹ä¸ºåˆ—è¡¨ï¼Œå½“é…ç½®äº†è¯¥é€‰é¡¹åï¼Œè¯¥å‚æ•°çš„å€¼å¿…é¡»ä»è¯¥é€‰é¡¹ä¸­è·å–ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/language_models/openai/gpt-4o-mini
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "name": "gpt-4o-mini",
          "label": "gpt-4o-mini",
          "model_type": "chat",
          "features": ["tool_call", "agent_thought", "image_input"],
          "context_windows": 128000,
          "max_output_tokens": 16384,
          "attributes": {
              "model": "gpt-4o-mini"
          },
          "metadata": {},
          "parameters": [
              {
                  "name": "temperature",
                  "label": "æ¸©åº¦",
                  "type": "float",
                  "help": "æ¸©åº¦æ§åˆ¶éšæœºæ€§ï¼Œè¾ƒä½çš„æ¸©åº¦ä¼šå¯¼è‡´è¾ƒå°‘çš„éšæœºç”Ÿæˆã€‚éšç€æ¸©åº¦æ¥è¿‘é›¶ï¼Œæ¨¡å‹å°†å˜å¾—æ›´ç¡®å®šï¼Œè¾ƒé«˜çš„æ¸©åº¦ä¼šå¯¼è‡´æ›´å¤šéšæœºå†…å®¹è¢«ç”Ÿæˆã€‚",
                  "required": false,
                  "default": 1,
                  "min": 0,
                  "max": 2,
                  "precision": 2,
                  "options": []
              }
          ]
      },
      "message": ""
  }
  ```

### 12.3 è·å–æŒ‡å®šæ¨¡å‹å¯¹åº”iconå›¾æ ‡

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£æ¥æ”¶æ¨¡å‹æœåŠ¡æä¾›å•†çš„åå­—ï¼Œè·å–è¯¥æä¾›å•†å¯¹åº”çš„ icon æºæ•°æ®ï¼Œå¦‚æœæ˜¯ svg å›¾ç‰‡ï¼Œåˆ™è¿”å› svg æºç ï¼Œå¦‚æœæ˜¯ pngï¼Œåˆ™è¿”å›å›¾ç‰‡æµä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`GET:/language-models/:provider_name/icon`

- **è¯·æ±‚å‚æ•°**ï¼š

  - `provider_name -> str`ï¼šéœ€è¦è·å–æœåŠ¡æä¾›å•† icon çš„åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œè¯¥å‚æ•°ä¸ºè·¯ç”±å‚æ•°ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/language_models/openai/icon
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
    <path d="M22.501 12.7332C22.501 11.8699 22.4296 11.2399 22.2748 10.5865H12.2153V14.4832H18.12C18.001 15.4515 17.3582 16.9099 15.9296 17.8898L15.9096 18.0203L19.0902 20.435L19.3106 20.4565C21.3343 18.6249 22.501 15.9298 22.501 12.7332Z" fill="#4285F4"/>
    <path d="M12.214 23C15.1068 23 17.5353 22.0666 19.3092 20.4567L15.9282 17.8899C15.0235 18.5083 13.8092 18.9399 12.214 18.9399C9.38069 18.9399 6.97596 17.1083 6.11874 14.5766L5.99309 14.5871L2.68583 17.0954L2.64258 17.2132C4.40446 20.6433 8.0235 23 12.214 23Z" fill="#34A853"/>
    <path d="M6.12046 14.5766C5.89428 13.9233 5.76337 13.2233 5.76337 12.5C5.76337 11.7766 5.89428 11.0766 6.10856 10.4233L6.10257 10.2841L2.75386 7.7355L2.64429 7.78658C1.91814 9.20993 1.50146 10.8083 1.50146 12.5C1.50146 14.1916 1.91814 15.7899 2.64429 17.2132L6.12046 14.5766Z" fill="#FBBC05"/>
    <path d="M12.2141 6.05997C14.2259 6.05997 15.583 6.91163 16.3569 7.62335L19.3807 4.73C17.5236 3.03834 15.1069 2 12.2141 2C8.02353 2 4.40447 4.35665 2.64258 7.78662L6.10686 10.4233C6.97598 7.89166 9.38073 6.05997 12.2141 6.05997Z" fill="#EB4335"/>
  </svg>
  ```

## 13. è¾…åŠ©Agentæ¨¡å—

### 13.1 ä¸è¾…åŠ© Agent è¿›è¡Œ Chat å¯¹è¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºä¸ LLMOps è¾…åŠ© Agent è¿›è¡Œ Chat å¯¹è¯ï¼Œæ¥å£ä¸ºæµå¼äº‹ä»¶è¾“å‡ºï¼Œè¾…åŠ© Agent æ‹¥æœ‰ä¸€ä¸ªæŒ‚è½½åœ¨æœ¬åœ°æ–‡ä»¶çš„å‘é‡æ•°æ®åº“ï¼Œå¹¶ç»‘å®š `åˆ›å»ºAgentå·¥å…·`ï¼Œè¯¥ Agent ä¸»è¦ç”¨æ¥è¾…åŠ©è¯¾ç¨‹å­¦ä¹ +é¡¹ç›®ä½¿ç”¨ï¼ˆä¾‹å¦‚æ•™å­¦ LLMOps è¦æ€ä¹ˆä½¿ç”¨ã€è¯¾ç¨‹çš„ç‰¹å®šçŸ¥è¯†ç‚¹è®²è§£ç­‰ï¼‰ï¼Œæ¥å£çš„å“åº”æ•°æ®æ ¼å¼å’Œ `è°ƒè¯•ä¼šè¯` ä¿æŒä¸€è‡´ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/assistant-agent/chat`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `query -> str`ï¼šç”¨æˆ·çš„æé—®å†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `image_urls -> list[str]`ï¼šå¯é€‰å‚æ•°ï¼Œç”¨æˆ·æé—®ä¸­ä¸Šä¼ çš„å›¾ç‰‡ URL åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œåªæœ‰å½“ Agent ä½¿ç”¨çš„ LLM æ”¯æŒå¤šæ¨¡æ€è¾“å…¥çš„æ—¶å€™ï¼Œæ‰å…è®¸ä¸Šä¼ è¯¥å‚æ•°ï¼Œå¦åˆ™åœ¨åç«¯ä¼šç›´æ¥é—å¼ƒï¼Œæœ€å¤šä¸Šä¼  5 å¼ å›¾ç‰‡ã€‚
  - æµå¼äº‹ä»¶å‚æ•°ï¼š
    - `event -> str`ï¼šæµå¼äº‹ä»¶çš„åç§°ï¼Œä¾‹å¦‚ï¼š`agent_thought(Agentæ¨ç†)`ã€`agent_message(Agentæ¶ˆæ¯)`ã€`agent_action(Agentè¡ŒåŠ¨/æ‰§è¡Œå·¥å…·)`ã€`dataset_retrieval(çŸ¥è¯†åº“æ£€ç´¢)`ã€`done(æµå¼äº‹ä»¶åœæ­¢)` ç­‰ã€‚
    - `data -> dict`ï¼šæµå¼äº‹ä»¶æ•°æ®ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œè®°å½•å½“å‰ä¼ é€’çš„äº‹ä»¶çš„ç›¸å…³ä¿¡æ¯ã€‚
      - `id -> uuid`ï¼šå½“å‰è§‚å¯Ÿ/Agent æ­¥éª¤è®°å½•çš„ idï¼Œå¦‚æœä¼ é€’çš„å¤šæ¬¡æµå¼äº‹ä»¶å±äºåŒä¸€ä¸ªæ­¥éª¤åˆ™ id ä¸€è‡´ï¼Œæ ¼å¼ä¸º uuidã€‚
      - `conversation_id -> uuid`ï¼šè¯¥æ¬¡æµå¼äº‹ä»¶/Agent æ­¥éª¤å½’å±çš„ä¼šè¯ idï¼Œç±»å‹ä¸º uuidã€‚
      - `message_id -> uuid`ï¼šè¯¥æ¬¡æµå¼äº‹ä»¶/Agent æ­¥éª¤å½’å±çš„æ¶ˆæ¯ idï¼Œç±»å‹ä¸º uuidã€‚
      - `task_id -> uuid`ï¼šè¯¥æ¬¡æµå¼äº‹ä»¶å½’å±çš„ä»»åŠ¡ idï¼Œè¯¥å‚æ•°ç”¨äºä¸­æ–­æŒ‡å®šçš„æµå¼äº‹ä»¶ï¼Œå½“æ‰§è¡Œè¯¥å­çº¿ç¨‹çš„æ—¶å€™ï¼Œä¼šåœ¨ç¼“å­˜ä¸­æ·»åŠ å¯¹åº”çš„ keyï¼Œä¸­æ–­æµå¼å“åº”æ—¶ï¼Œä¼šåœ¨ç¼“å­˜ä¸­åˆ é™¤è¯¥ keyï¼Œä»è€Œç»“æŸæ•´ä¸ªæµå¼äº‹ä»¶å“åº”ã€‚
      - `thought -> str`ï¼šAgent åœ¨å½“å‰æµå¼äº‹ä»¶ä¸‹çš„æ¨ç†å†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `observation -> str`ï¼šAgent è§‚å¯Ÿçš„å†…å®¹ï¼Œä¸€èˆ¬æ˜¯å·¥å…·æ‰§è¡Œåçš„ç»“æœã€çŸ¥è¯†åº“çš„æ£€ç´¢ç»“æœï¼Œç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œè¯¥å­—æ®µå¹¶éæœ€ç»ˆå­—æ®µï¼Œåç»­ä¼šéšç€æ’ä»¶åŠŸèƒ½çš„é›†æˆå¢å¤šè¿›è¡Œç›¸åº”çš„è°ƒæ•´ã€‚
      - `answer -> str`ï¼šAgent è¿”å›çš„æ–‡æœ¬ç­”æ¡ˆè¾“å‡ºï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `latency -> float`ï¼šæ­¥éª¤çš„æ‰§è¡Œè€—æ—¶ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ã€‚
      - `created_at -> int`ï¼šæ¶ˆæ¯è®°å½•åˆ›å»ºçš„æ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/assistant-agent/chat
  
  {
  	"query": "å¸®æˆ‘åˆ›å»ºä¸€ä¸ªèƒ½å›ç­”LLMé—®é¢˜çš„Agentã€‚"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  event: agent_message
  data: {"id": "1550b71a-1444-47ed-a59d-c2f080fbae94", "conversation_id": "2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8", "task_id": "5e7834dc-bbca-4ee5-9591-8f297f5acded", "thought": "", "observation": "", "answer":"LLM å³ Large Language Modelï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼Œæ˜¯ä¸€ç§åŸºäºæ·±åº¦å­¦ä¹ çš„è‡ªç„¶è¯­è¨€å¤„ç†æ¨¡å‹ï¼Œå…·æœ‰å¾ˆé«˜çš„è¯­è¨€ç†è§£å’Œç”Ÿæˆèƒ½åŠ›ï¼Œèƒ½å¤Ÿå¤„ç†å„å¼å„æ ·çš„è‡ªç„¶è¯­è¨€ä»»åŠ¡ï¼Œä¾‹å¦‚æ–‡æœ¬ç”Ÿæˆã€é—®ç­”ã€ç¿»è¯‘ã€æ‘˜è¦ç­‰ã€‚å®ƒé€šè¿‡åœ¨å¤§é‡çš„æ–‡æœ¬æ•°æ®ä¸Šè¿›è¡Œè®­ç»ƒï¼Œå­¦ä¹ åˆ°è¯­è¨€çš„æ¨¡å¼ã€ç»“æ„å’Œè¯­ä¹‰çŸ¥è¯†ã€‚", "latency":8541, "created_at":1714053834}
  ```

### 13.2 åœæ­¢ä¸è¾…åŠ© Agent çš„å¯¹è¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¼ é€’ `ä»»åŠ¡id` ç”¨äºåœæ­¢ä¸è¾…åŠ© Agent çš„å¯¹è¯ï¼Œåº•å±‚è¿è¡Œé€»è¾‘å’Œ `åœæ­¢è°ƒè¯•ä¼šè¯æ¥å£` ä¿æŒä¸€è‡´ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/assistant-agent/chat/:task_id/stop`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `task_id -> uuid`ï¼šéœ€è¦åœæ­¢çš„ä¼šè¯ idï¼Œç±»å‹ä¸º uuidï¼Œè¯¥å‚æ•°ä¸ºè·¯ç”±å‚æ•°ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/assistant-agent/chat/2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8/stop
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "scuccess",
      "data": {},
      "message": "åœæ­¢è¾…åŠ©Agentä¼šè¯æˆåŠŸ"
  }
  ```

### 13.3 è·å–å½“å‰ç™»å½•è´¦å·çš„è¾…åŠ© Agent å¯¹è¯å†å²åˆ—è¡¨

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºè·å–å½“å‰ç™»å½•è´¦å·ä¸è¾…åŠ© Agent çš„å¯¹è¯å†å²åˆ—è¡¨ï¼Œè¯¥æ¥å£æ”¯æŒåˆ†é¡µï¼Œæ•°æ®ä¼šæŒ‰ç…§åˆ›å»ºæ—¶é—´è¿›è¡Œå€’åºï¼Œå¦‚æœç”¨æˆ·æ¸…ç©ºäº†è®°å½•æˆ–è€…æœªä¸è¾…åŠ© Agent è¿›è¡Œå¯¹è¯ï¼Œåˆ™ä¼šè¿”å›ç©ºåˆ—è¡¨ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/assistant-agent/messages`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `current_page -> int`ï¼šå¯é€‰å‚æ•°ï¼Œå½“å‰é¡µæ•°ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œé»˜è®¤ä¸º 1ã€‚
    - `page_size -> int`ï¼šå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºæ¯é¡µæ•°æ®æ¡æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œé»˜è®¤ä¸º 20ã€‚
    - `created_at -> int`ï¼šå¯é€‰å‚æ•°ï¼Œåˆ›å»ºæ—¶é—´æ—¶é—´æˆ³æ¸¸æ ‡ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œé»˜è®¤ä¸º 0ã€‚
  - å“åº”å‚æ•°ï¼š
    - `list -> list[dict]`ï¼šä¼šè¯æ¶ˆæ¯åˆ—è¡¨ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ã€‚
      - `id -> uuid`ï¼šä¼šè¯æ¶ˆæ¯ idï¼Œç±»å‹ä¸º uuidã€‚
      - `conversation_id -> uuid`ï¼šæ¶ˆæ¯å…³è”çš„ä¼šè¯ idï¼Œç±»å‹ä¸º uuidã€‚
      - `query -> str`ï¼šäººç±»æå‡ºçš„é—®é¢˜/æŸ¥è¯¢ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `image_urls -> list[str]`ï¼šäººç±»æé—®æ—¶ä¸Šä¼ çš„å›¾ç‰‡ URL åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œåªæœ‰å½“ç”¨æˆ·ä¸Šä¼ äº†å›¾ç‰‡ URL å‚æ•°çš„æ—¶å€™ï¼Œè¯¥å‚æ•°æ‰æœ‰å€¼ï¼Œå¹¶ä¸”åœ¨å‰ç«¯è¿›è¡Œå±•ç¤ºã€‚
      - `answer -> str`ï¼šAI ç”Ÿæˆçš„æœ€ç»ˆç­”æ¡ˆï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `total_token_count -> int`ï¼šæ¶ˆæ¯æ¶ˆè€—çš„æ€» token æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `latency -> float`ï¼šè¯¥æ¡æ¶ˆæ¯å“åº”çš„æ—¶é—´ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ã€‚
      - `agent_thoughts -> list[dict]`ï¼šAgent æ™ºèƒ½ä½“äº§ç”Ÿè¯¥æ¡æ¶ˆæ¯çš„æ¨ç†ä¸­é—´æ­¥éª¤ï¼Œç±»å‹ä¸ºå­—å…¸åˆ—è¡¨ï¼Œæ•°æ®ä¼šæŒ‰ç…§ `position` å­—å…¸è¿›è¡Œå¢åºæ’åºï¼Œä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰çš„æ¨ç†åˆ—è¡¨ã€‚
        - `id -> uuid`ï¼šæ¨ç†æ­¥éª¤å¯¹åº”çš„ idï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
        - `position -> int`ï¼šæ¨ç†æ­¥éª¤æ‰€åœ¨çš„ä½ç½®ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
        - `event -> str`ï¼šæ¨ç†äº‹ä»¶çš„ç±»å‹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
        - `thought -> str`ï¼šæ¨ç†å†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¸€èˆ¬æ˜¯ LLM ç”Ÿæˆçš„å·¥å…·è°ƒç”¨å‚æ•°ã€‚
        - `observation -> str`ï¼šè§‚å¯Ÿå†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¸€èˆ¬æ˜¯å·¥å…·è°ƒç”¨/çŸ¥è¯†åº“æ£€ç´¢å¾—åˆ°çš„å†…å®¹ã€‚
        - `tool -> str`ï¼šè°ƒç”¨çš„å·¥å…·åç§°ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
        - `tool_input -> dict`ï¼šè°ƒç”¨å·¥å…·çš„å·¥å…·å‚æ•°ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
        - `latency -> int`ï¼šè¯¥æ¨ç†æ­¥éª¤çš„å“åº”è€—æ—¶ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
        - `created_at -> int`ï¼šè¯¥æ¨ç†æ­¥éª¤çš„åˆ›å»ºæ—¶é—´ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `created_at -> int`ï¼šæ¶ˆæ¯çš„åˆ›å»ºæ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
    - `paginator -> dict`ï¼šåˆ†é¡µæ•°æ®ï¼Œç±»å‹ä¸ºå­—å…¸ã€‚
      - `current_page -> int`ï¼šå½“å‰é¡µæ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `page_size -> int`ï¼šæ¯é¡µæ•°æ®æ¡æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `total_page -> int`ï¼šæ•°æ®æ€»é¡µæ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚
      - `total_record -> int`ï¼šæ•°æ®æ€»è®°å½•æ¡æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/assistant-agent/messages?current_page=1&page_size=20
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "list": [],
          "paginator": {
              "current_page": 1,
              "page_size": 20,
              "total_page": 0,
              "total_record": 0
          }
      },
      "message": ""
  }
  ```

### 13.4 æ¸…ç©ºå½“å‰ç™»å½•è´¦å·ä¸è¾…åŠ© Agent çš„å¯¹è¯åˆ—è¡¨

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºæ¸…ç©ºå½“å‰ç™»å½•è´¦å·ä¸è¾…åŠ© Agent çš„å¯¹è¯åˆ—è¡¨ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªç©ºç™½çš„æ–°ä¼šè¯ï¼Œå’Œ `åº”ç”¨ç¼–æ’` ä¸­æ¸…ç©ºè°ƒè¯•åŠŸèƒ½æ¥è¿‘ï¼Œä¼šåœ¨è´¦å·ä¸‹æ¸…ç©ºè¾…åŠ©ä¼šè¯ idã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/assistant-agent/delete-conversation`

- **æ¥å£å‚æ•°**ï¼š-

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/assistant-agent/delete-conversation
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "æ¸…ç©ºè¾…åŠ©Agentä¼šè¯æˆåŠŸ"
  }
  ```

## 14. ç»Ÿè®¡åˆ†ææ¨¡å—

### 14.1 è·å–æŒ‡å®šåº”ç”¨çš„ç»Ÿè®¡åˆ†ææ•°æ®

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºè·å–æŒ‡å®šçš„åº”ç”¨å¯¹åº”çš„ç»Ÿè®¡åˆ†ææ•°æ®ï¼Œæ¶µç›–åˆ†ææ€»æŒ‡æ ‡ï¼ˆå…¨éƒ¨ä¼šè¯æ•°ã€æ´»è·ƒç”¨æˆ·æ•°ã€å¹³å‡ä¼šè¯äº’åŠ¨æ•°ã€Tokenè¾“å‡ºé€Ÿåº¦ã€è´¹ç”¨æ¶ˆè€—ï¼‰ã€æœ€è¿‘7å¤©çš„æŒ‡æ ‡æ•°æ®ä¿¡æ¯ï¼ˆå…¨éƒ¨ä¼šè¯æ•°ã€æ´»è·ƒç”¨æˆ·æ•°ã€å¹³å‡ä¼šè¯äº’åŠ¨æ•°ã€è´¹ç”¨æ¶ˆè€—ï¼‰ï¼Œè¯¥æ¥å£æ— è®ºåº”ç”¨æ˜¯å¦å‘å¸ƒå‡ä¼šç»Ÿè®¡ï¼Œæ¶µç›–è°ƒè¯•ã€å¼€æ”¾APIã€WebAppæ¥å£çš„è°ƒç”¨æ•°æ®ç»Ÿè®¡ï¼Œè¯¥ API æ¥å£åœ¨åˆæ¬¡è°ƒç”¨çš„æ—¶å€™ä¼šä» postgres æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®ï¼Œåç»­å°†æ•°æ®å­˜å‚¨åˆ°ç¼“å­˜ä¸­ï¼Œç›´æ¥è¯»å–ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/analysis/:app_id`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šéœ€è¦è·å–æŒ‡å®šåº”ç”¨çš„ç»Ÿè®¡åˆ†ææ•°æ®ã€‚
  - å“åº”å‚æ•°ï¼š
    - `total_messages -> dict`ï¼šå…¨éƒ¨ä¼šè¯æ•°ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œæ¶µç›–æ•°å€¼+ç¯æ¯”ï¼Œåæ˜  AI æ¯å¤©çš„ä¼šè¯æ¶ˆæ¯æ€»æ•°ï¼Œåœ¨æŒ‡å®šçš„æ—¶é—´èŒƒå›´å†…ï¼Œç”¨æˆ·å¯¹åº”ç”¨å‘èµ·çš„è¯·æ±‚æ€»æ¬¡æ•°ï¼Œä¸€é—®ä¸€ç­”è®°ä¸€æ¬¡ã€‚ç”¨äºè¡¡é‡ç”¨æˆ·æ´»è·ƒåº¦ã€‚
    - `active_accounts -> dict`ï¼šæ¿€æ´»ç”¨æˆ·æ•°ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œæ¶µç›–æ•°å€¼+ç¯æ¯”ï¼Œåœ¨æŒ‡å®šçš„å‘å¸ƒæ¸ é“å’Œæ—¶é—´èŒƒå›´å†…ï¼Œè‡³å°‘å®Œæˆä¸€è½®å¯¹è¯çš„æ€»ä½¿ç”¨ç”¨æˆ·æ•°é‡ã€‚ç”¨äºè¡¡é‡åº”ç”¨å¸å¼•åŠ›ã€‚
    - `avg_of_conversation_messages -> dict`ï¼šå¹³å‡ä¼šè¯äº’åŠ¨æ•°ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œæ¶µç›–æ•°å€¼+ç¯æ¯”ï¼Œåæ˜ æ¯ä¸ªä¼šè¯ç”¨æˆ·çš„æŒç»­æ²Ÿé€šæ¬¡æ•°ï¼Œå¦‚æœç”¨æˆ·ä¸ AI è¿›è¡Œäº† 10 è½®å¯¹è¯ï¼Œå³ä¸º 10ï¼Œè¯¥æŒ‡æ ‡åæ˜ äº†ç”¨æˆ·ç²˜æ€§ã€‚
    - `token_output_rate -> dict`ï¼šTokenè¾“å‡ºé€Ÿåº¦ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œæ¶µç›–æ•°å€¼+ç¯æ¯”ï¼Œè¡¡é‡ LLM çš„æ€§èƒ½ï¼Œç»Ÿè®¡ LLM ä»è¯·æ±‚åˆ°è¾“å‡ºå®Œæ¯•è¿™æ®µæœŸé—´å†…çš„ Tokens è¾“å‡ºé€Ÿåº¦ã€‚
    - `cost_consumption -> dict`ï¼šè´¹ç”¨æ¶ˆè€—ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œæ¶µç›–æ•°å€¼+ç¯æ¯”ï¼Œåæ˜ æ¯æ—¥è¯¥åº”ç”¨è¯·æ±‚è¯­è¨€æ¨¡å‹çš„ Tokens èŠ±è´¹ï¼Œç”¨äºæˆæœ¬æ§åˆ¶ã€‚
    - `total_messages_trend -> list[dict]`ï¼šå…¨éƒ¨ä¼šè¯æ•°è¶‹åŠ¿ï¼ˆæœ€è¿‘ 7 å¤©ï¼‰ï¼Œæ ¼å¼ä¸ºå­—å…¸ï¼Œæ¶µç›–ä¸¤ä¸ªå±æ€§ `x_axis` å’Œ `y_axis`ï¼Œåˆ†åˆ«è¡¨ç¤º `xåæ ‡è½´æ•°æ®` å’Œ `yåæ ‡è½´æ•°æ®`ï¼Œæ ¼å¼åˆ†åˆ«æ˜¯æ—¥æœŸæ—¶é—´æˆ³å’Œå…·ä½“æ•°å€¼ã€‚
    - `active_accounts_trend -> list[dict]`ï¼šæ¿€æ´»ç”¨æˆ·æ•°è¶‹åŠ¿ï¼ˆæœ€è¿‘ 7 å¤©ï¼‰ï¼Œæ ¼å¼ä¸ºå­—å…¸ï¼Œæ¶µç›–ä¸¤ä¸ªå±æ€§ `x_axis` å’Œ `y_axis`ï¼Œåˆ†åˆ«è¡¨ç¤º `xåæ ‡è½´æ•°æ®` å’Œ `yåæ ‡è½´æ•°æ®`ï¼Œæ ¼å¼åˆ†åˆ«æ˜¯æ—¥æœŸæ—¶é—´æˆ³å’Œå…·ä½“æ•°å€¼ã€‚
    - `avg_of_conversation_messages_trend -> list[dict]`ï¼šå¹³å‡ä¼šè¯äº’åŠ¨æ•°è¶‹åŠ¿ï¼ˆæœ€è¿‘ 7 å¤©ï¼‰ï¼Œæ ¼å¼ä¸ºå­—å…¸ï¼Œæ¶µç›–ä¸¤ä¸ªå±æ€§ `x_axis` å’Œ `y_axis`ï¼Œåˆ†åˆ«è¡¨ç¤º `xåæ ‡è½´æ•°æ®` å’Œ `yåæ ‡è½´æ•°æ®`ï¼Œæ ¼å¼åˆ†åˆ«æ˜¯æ—¥æœŸæ—¶é—´æˆ³å’Œå…·ä½“æ•°å€¼ã€‚
    - `cost_consumption_trend -> list[dict]`ï¼šè´¹ç”¨æ¶ˆè€—è¶‹åŠ¿ï¼ˆæœ€è¿‘ 7 å¤©ï¼‰ï¼Œæ ¼å¼ä¸ºå­—å…¸ï¼Œæ¶µç›–ä¸¤ä¸ªå±æ€§ `x_axis` å’Œ `y_axis`ï¼Œåˆ†åˆ«è¡¨ç¤º `xåæ ‡è½´æ•°æ®` å’Œ `yåæ ‡è½´æ•°æ®`ï¼Œæ ¼å¼åˆ†åˆ«æ˜¯æ—¥æœŸæ—¶é—´æˆ³å’Œå…·ä½“æ•°å€¼ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/analysis/2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "total_messages": {
              "data": 1741,
              "qoq": 0
          },
          "active_accounts": {
              "data": 141,
              "qoq": 0
          },
          "avg_messages_pre_conversation": {
              "data": 14.1,
              "qoq": 0
          },
          "token_output_rate": {
              "data": 18.2,
              "qoq": 0
          },
          "cost_consumption": {
              "data": 241.1,
              "qoq": 0
          },
          "total_messages_trend": {
              "x_axis": [1696108800, 1696195200, 1696281600, 1696368000, 1696454400, 1696540800, 1696627200],
              "y_axis": [0, 0, 0, 0, 0, 0, 0],
          },
          "active_accounts_trend": {
              "x_axis": [1696108800, 1696195200, 1696281600, 1696368000, 1696454400, 1696540800, 1696627200],
              "y_axis": [0, 0, 0, 0, 0, 0, 0],
          },
          "avg_messages_pre_conversation_trend": {
              "x_axis": [1696108800, 1696195200, 1696281600, 1696368000, 1696454400, 1696540800, 1696627200],
              "y_axis": [0, 0, 0, 0, 0, 0, 0],
          },
          "cost_consumption_trend": {
              "x_axis": [1696108800, 1696195200, 1696281600, 1696368000, 1696454400, 1696540800, 1696627200],
              "y_axis": [0, 0, 0, 0, 0, 0, 0],
          }
      },
      "message": ""
  }
  ```

## 15. WebAppæ¨¡å—

### 15.1 æ ¹æ®æ ‡è¯†è·å–æŒ‡å®š WebApp åŸºç¡€ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šæ ¹æ®ä¼ é€’çš„ WebApp æ ‡è¯†ï¼Œè·å–æŒ‡å®šåº”ç”¨çš„åŸºç¡€ä¿¡æ¯ï¼Œæ¶µç›–åº”ç”¨ idã€åç§°ã€å›¾æ ‡ã€æè¿°ã€å¯¹è¯å¼€åœºç™½ã€å¼€åœºå»ºè®®é—®é¢˜ã€æ˜¯å¦å¼€å¯å›ç­”åç”Ÿæˆå»ºè®®é—®é¢˜ç­‰å†…å®¹ï¼Œå¦‚æœè¯¥åº”ç”¨æœªå‘å¸ƒï¼Œæˆ–ä¼ é€’äº†é”™è¯¯çš„ WebApp æ ‡è¯†ï¼Œåˆ™è·å–åŸºç¡€ä¿¡æ¯ä¼šå¤±è´¥ï¼Œè¯¥æ¥å£å¿…é¡»åœ¨ç™»å½•æƒ…å†µä¸‹æ‰å¯ä»¥æ­£å¸¸è·å–ï¼Œè¯¥æ¥å£ä¸ä¼šåˆ¤æ–­åº”ç”¨çš„å½’å±æƒé™ï¼Œå› ä¸º WebApp åªè¦æœ‰é“¾æ¥å°±æ„å‘³ç€ç”¨æˆ·å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œè¯¥ API æ¥å£åæœŸæ‰©å±•å®ç°è¯­éŸ³è¾“å…¥è¾“å‡ºã€å›¾ç‰‡è¾“å…¥æ—¶ï¼Œæ¥å£çš„ `app_config` è¿”å›å­—æ®µä¼šéšç€æ›´æ–°å˜åŒ–ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/web-apps/:token`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `token -> str`ï¼šåº”ç”¨æƒé™/æ ‡è¯†ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œæ•°å€¼ä¸ºä¸€ä¸²éšæœºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼šJyXc763dv4A3A2TCï¼Œè¯¥æ ‡è¯†åœ¨ Agent å‘å¸ƒåä¼šéšæœºç”Ÿæˆï¼Œå¹¶ä¸”æ”¯æŒå˜åŒ–ï¼Œä»¥ç¡®ä¿ Agent åº”ç”¨çš„å®‰å…¨ã€‚
  - å“åº”å‚æ•°ï¼š
    - `id -> uuid`ï¼šè¯¥ WebApp æ ‡è¯†å¯¹åº”çš„ Agent åº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚
    - `icon -> str`ï¼šAgent åº”ç”¨å›¾æ ‡ URL åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `name -> str`ï¼šAgent åº”ç”¨åå­—ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `description -> str`ï¼šAgent åº”ç”¨æè¿°ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `app_config -> dict[str, Any]`ï¼šåº”ç”¨è¿è¡Œæ—¶é…ç½®ä¿¡æ¯ï¼Œè¯¥å­—æ®µåªè®°å½•å‰ç«¯éœ€è¦ä½¿ç”¨çš„å­—æ®µï¼Œä¾‹å¦‚ï¼šå¯¹è¯å¼€åœºç™½ã€å¼€åœºå»ºè®®é—®é¢˜ã€æ˜¯å¦å¼€å¯å›ç­”åç”Ÿæˆå»ºè®®é—®é¢˜ç­‰å†…å®¹ã€‚
      - `opening_statement -> str`ï¼šå¯¹è¯å¼€åœºç™½ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `opening_questions -> list[str]`ï¼šå¯¹è¯å»ºè®®é—®é¢˜åˆ—è¡¨ï¼Œåœ¨åˆæ¬¡å¯¹è¯æ—¶ Agent ä¼šæ¨é€çš„å»ºè®®é—®é¢˜ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œé—®é¢˜æ•°é‡ä¸è¶…è¿‡ 3 ä¸ªã€‚
      - `suggested_after_answer -> dict`ï¼šæ˜¯å¦åœ¨å›ç­”åå¼€å¯å»ºè®®é—®é¢˜ç”Ÿæˆï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œå†…éƒ¨åŒ…å«ä¸€ä¸ª `enable` å­—æ®µï¼Œæ•°å€¼ä¸º true è¡¨ç¤ºå¼€å¯ï¼Œä¸º false è¡¨ç¤ºå…³é—­ã€‚
      - `features -> list[str]`ï¼šè·å–æ¨¡å‹çš„ç‰¹æ€§ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæ¶µç›– `image_input`ã€`agent_thought`ã€`tool_call` ç­‰ï¼Œç”¨äºåœ¨å‰ç«¯è¿›è¡Œæ ‡è¯†å®ç°å¤šæ¨¡æ€å›¾ç‰‡è¾“å…¥ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/web-apps/JyXc763dv4A3A2TC
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "id": "",
          "icon": "",
          "name": "",
          "description": "",
          "app_config": {
              "opening_statement": "",
              "opening_questions": [],
              "suggested_after_answer": {}
          }
      },
      "message": ""
  }
  ```

### 15.2 ä¸æŒ‡å®š WebApp è¿›è¡Œå¯¹è¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºå’ŒæŒ‡å®šçš„ WebApp è¿›è¡Œå¯¹è¯ï¼Œåç«¯ä¼šæ ¹æ®ä¼ é€’çš„ WebApp æ ‡è¯†æŸ¥è¯¢å¯¹åº”çš„ Agentï¼Œå¹¶è·å–è¯¥ Agent çš„è¿è¡Œæ—¶é…ç½®ï¼Œéšåå‘èµ·å¯¹è¯ï¼Œæ¥å£ä¸ºæµå¼äº‹ä»¶è¾“å‡ºï¼Œå¹¶ä¸”ä¸æ ¡éªŒ Agent åº”ç”¨çš„æƒé™ï¼Œåªè¦æœ‰ WebApp æ ‡è¯†å³å¯è®¿é—®è¯¥ Agent åº”ç”¨ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/web-apps/:token/chat`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `token -> str`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦å¯¹è¯çš„ WebApp å¯¹åº”çš„æ ‡è¯†å‡­è¯ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼šJyXc763dv4A3A2TCï¼Œåªæœ‰åº”ç”¨å·²å‘å¸ƒçš„æƒ…å†µä¸‹æ‰ä¼šç”Ÿæˆè¯¥æ ‡è¯†ï¼Œå¦‚æœè®¿é—®äº†ä¸å­˜åœ¨çš„å‡­è¯ä¿¡æ¯ï¼Œæˆ–æœªå‘å¸ƒåº”ç”¨ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚
    - `conversation_id -> uuid`ï¼šè¯¥æ¬¡å¯¹è¯å¯¹åº”çš„ä¼šè¯idï¼Œç±»å‹ä¸º uuidï¼Œå¦‚æœä¸ºç©ºåˆ™ä»£è¡¨å‘èµ·æ–°ä¼šè¯ï¼Œå¦‚æœä¼ é€’äº†ä¸å±äºå½“å‰è´¦å·çš„ä¼šè¯å†…å®¹ï¼Œåˆ™ä¼šæŠ›å‡ºé”™è¯¯ã€‚
    - `query -> str`ï¼šç”¨æˆ·å‘èµ·çš„æé—®ä¿¡æ¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `image_urls -> list[str]`ï¼šå›¾ç‰‡ URL åˆ—è¡¨ä¿¡æ¯ï¼Œå¯é€‰å‚æ•°ï¼Œæœ€å¤šä¸èƒ½è¶…è¿‡ 5 å¼ å›¾ç‰‡ã€‚
  - æµå¼äº‹ä»¶å‚æ•°ï¼š
    - `event -> str`ï¼šæµå¼äº‹ä»¶çš„åç§°ï¼Œä¾‹å¦‚ï¼š`agent_thought(Agentæ¨ç†)`ã€`agent_message(Agentæ¶ˆæ¯)`ã€`agent_action(Agentè¡ŒåŠ¨/æ‰§è¡Œå·¥å…·)`ã€`dataset_retrieval(çŸ¥è¯†åº“æ£€ç´¢)`ã€`done(æµå¼äº‹ä»¶åœæ­¢)` ç­‰ã€‚
    - `data -> dict`ï¼šæµå¼äº‹ä»¶æ•°æ®ï¼Œç±»å‹ä¸ºå­—å…¸ï¼Œè®°å½•å½“å‰ä¼ é€’çš„äº‹ä»¶çš„ç›¸å…³ä¿¡æ¯ã€‚
      - `id -> uuid`ï¼šå½“å‰è§‚å¯Ÿ/Agent æ­¥éª¤è®°å½•çš„ idï¼Œå¦‚æœä¼ é€’çš„å¤šæ¬¡æµå¼äº‹ä»¶å±äºåŒä¸€ä¸ªæ­¥éª¤åˆ™ id ä¸€è‡´ï¼Œæ ¼å¼ä¸º uuidã€‚
      - `conversation_id -> uuid`ï¼šè¯¥æ¬¡æµå¼äº‹ä»¶/Agent æ­¥éª¤å½’å±çš„ä¼šè¯ idï¼Œç±»å‹ä¸º uuidã€‚
      - `message_id -> uuid`ï¼šè¯¥æ¬¡æµå¼äº‹ä»¶/Agent æ­¥éª¤å½’å±çš„æ¶ˆæ¯ idï¼Œç±»å‹ä¸º uuidã€‚
      - `task_id -> uuid`ï¼šè¯¥æ¬¡æµå¼äº‹ä»¶å½’å±çš„ä»»åŠ¡ idï¼Œè¯¥å‚æ•°ç”¨äºä¸­æ–­æŒ‡å®šçš„æµå¼äº‹ä»¶ï¼Œå½“æ‰§è¡Œè¯¥å­çº¿ç¨‹çš„æ—¶å€™ï¼Œä¼šåœ¨ç¼“å­˜ä¸­æ·»åŠ å¯¹åº”çš„ keyï¼Œä¸­æ–­æµå¼å“åº”æ—¶ï¼Œä¼šåœ¨ç¼“å­˜ä¸­åˆ é™¤è¯¥ keyï¼Œä»è€Œç»“æŸæ•´ä¸ªæµå¼äº‹ä»¶å“åº”ã€‚
      - `thought -> str`ï¼šAgent åœ¨å½“å‰æµå¼äº‹ä»¶ä¸‹çš„æ¨ç†å†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `observation -> str`ï¼šAgent è§‚å¯Ÿçš„å†…å®¹ï¼Œä¸€èˆ¬æ˜¯å·¥å…·æ‰§è¡Œåçš„ç»“æœã€çŸ¥è¯†åº“çš„æ£€ç´¢ç»“æœï¼Œç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œè¯¥å­—æ®µå¹¶éæœ€ç»ˆå­—æ®µï¼Œåç»­ä¼šéšç€æ’ä»¶åŠŸèƒ½çš„é›†æˆå¢å¤šè¿›è¡Œç›¸åº”çš„è°ƒæ•´ã€‚
      - `answer -> str`ï¼šAgent è¿”å›çš„æ–‡æœ¬ç­”æ¡ˆè¾“å‡ºï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
      - `total_token_count -> int`ï¼šè¯¥æ¬¡æ¨ç† LLM æ¶ˆè€—æ€» Token æ•°ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œå¹¶ä¸”ä¸ºäº†æå‡æ€§èƒ½ï¼Œé™ä½å»¶è¿Ÿï¼ŒLLM æ¶ˆæ¯æ¶ˆè€—çš„æ€» Token ä¼šåœ¨æœ€åä¸€æ¡æ¶ˆæ¯ä¸­ç»Ÿä¸€è¿›è¡Œæ·»åŠ ã€‚
      - `total_price -> float`ï¼šè¯¥æ¬¡æ¨ç† LLM æ¶ˆè€—çš„æ€»æˆæœ¬ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ï¼Œå•ä½ä¸ºå…ƒï¼Œå¦‚æœæ²¡æœ‰æ¶ˆè€—åˆ™æ¶ˆè€—æˆæœ¬ä¸º 0ï¼Œå¹¶ä¸”ä¸ºäº†æå‡æ€§èƒ½ï¼Œé™ä½å»¶è¿Ÿï¼ŒLLM æ¶ˆæ¯æ¶ˆè€—çš„æ€»æˆæœ¬ä¼šåœ¨æœ€åä¸€æ¡æ¶ˆæ¯ä¸­ç»Ÿä¸€è¿›è¡Œæ·»åŠ ã€‚
      - `latency -> float`ï¼šæ­¥éª¤çš„æ‰§è¡Œè€—æ—¶ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œç±»å‹ä¸ºæµ®ç‚¹å‹ã€‚
      - `created_at -> int`ï¼šæ¶ˆæ¯è®°å½•åˆ›å»ºçš„æ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/web-apps/JyXc763dv4A3A2TC/chat
  
  {
  	"conversation_id": "",
  	"query": "ä½ å¥½ï¼Œä½ æ˜¯"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```bash
  event: agent_message
  data: {"id": "1550b71a-1444-47ed-a59d-c2f080fbae94", "conversation_id": "2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8", "task_id": "5e7834dc-bbca-4ee5-9591-8f297f5acded", "thought": "", "observation": "", "answer":"LLM å³ Large Language Modelï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼Œæ˜¯ä¸€ç§åŸºäºæ·±åº¦å­¦ä¹ çš„è‡ªç„¶è¯­è¨€å¤„ç†æ¨¡å‹ï¼Œå…·æœ‰å¾ˆé«˜çš„è¯­è¨€ç†è§£å’Œç”Ÿæˆèƒ½åŠ›ï¼Œèƒ½å¤Ÿå¤„ç†å„å¼å„æ ·çš„è‡ªç„¶è¯­è¨€ä»»åŠ¡ï¼Œä¾‹å¦‚æ–‡æœ¬ç”Ÿæˆã€é—®ç­”ã€ç¿»è¯‘ã€æ‘˜è¦ç­‰ã€‚å®ƒé€šè¿‡åœ¨å¤§é‡çš„æ–‡æœ¬æ•°æ®ä¸Šè¿›è¡Œè®­ç»ƒï¼Œå­¦ä¹ åˆ°è¯­è¨€çš„æ¨¡å¼ã€ç»“æ„å’Œè¯­ä¹‰çŸ¥è¯†ã€‚", "latency":8541, "created_at":1714053834}
  ```

### 15.3 åœæ­¢ä¸æŒ‡å®š WebApp è¿›è¡Œå¯¹è¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ç”¨äºåœæ­¢ä¸æŒ‡å®š WebApp çš„å¯¹è¯ï¼Œæ¥å£æ¥æ”¶ WebApp å‡­è¯æ ‡è¯†ä¸å¯¹è¯ä»»åŠ¡ idï¼Œåœæ­¢æŸæ¬¡ä¼šè¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/web-apps/:token/chat/:task_id/stop`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `token -> str`ï¼šè·¯ç”±å‚æ•°ï¼ŒWebApp å‡­è¯æ ‡è¯†ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼šJyXc763dv4A3A2TC
    - `task_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦åœæ­¢çš„ä¼šè¯å¯¹åº”çš„ä»»åŠ¡ idï¼Œç±»å‹ä¸º UUIDã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/web-apps/JyXc763dv4A3A2TC/chat/5e7834dc-bbca-4ee5-9591-8f297f5acded/stop
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "scuccess",
      "data": {},
      "message": "åœæ­¢WebAppä¼šè¯æˆåŠŸ"
  }
  ```

## 16. è¯­éŸ³æ–‡æœ¬æ¨¡å—

### 16.1 è¯­éŸ³è½¬æ–‡æœ¬è¾“å…¥æ¥å£

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£æ¥æ”¶éŸ³é¢‘æºæ–‡ä»¶ï¼Œç”¨äºå°†è¯­éŸ³è½¬æ¢æˆæ–‡æœ¬ï¼Œåœ¨åç«¯ä¼šä½¿ç”¨ OpenAI çš„ Whisper æœåŠ¡å®ç°å°†éŸ³é¢‘æ–‡ä»¶è½¬æ¢æˆæ–‡æœ¬ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/audio/audio-to-text`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `file -> binary`ï¼šè¯­éŸ³éŸ³é¢‘çš„æºæ–‡ä»¶ï¼Œå‰ç«¯æµè§ˆå™¨å½•éŸ³åå°†æ•°æ®ä¼ é€’åˆ°è¯¥å­—æ®µã€‚
  - å“åº”å‚æ•°ï¼š
    - `text -> str`ï¼šè½¬æ¢åçš„æ–‡æœ¬å†…å®¹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/audio/audio-to-text
  
  {
  	"file": "..."
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "text": "æ…•è¯¾ç½‘ï¼Œç¨‹åºå‘˜çš„æ¢¦å·¥å‚"
      },
      "message": ""
  }
  ```

### 16.2 å°†æ¶ˆæ¯æµå¼äº‹ä»¶è¾“å‡ºè¯­éŸ³

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£æ ¹æ®ä¼ é€’çš„æ¶ˆæ¯ idï¼Œå¹¶å°†è¯¥æ¶ˆæ¯ä¸­çš„ `AIæ¶ˆæ¯` è½¬æ¢æˆæµå¼äº‹ä»¶è¯­éŸ³è¾“å‡ºï¼Œä»è€Œæå‡ç”¨æˆ·ä½¿ç”¨ä½“éªŒï¼Œä¸ºäº†å’Œ Agent åº”ç”¨ç‹¬ç«‹åŒºåˆ†ï¼Œè¯¥åŠŸèƒ½å¹¶ä¸åµŒå…¥åˆ° Agent ä¸­ï¼Œé™ä½ Agent çš„ç»´æŠ¤ï¼Œåœ¨åç«¯ä¼šå¯¹æ¶ˆæ¯çš„ id è¿›è¡Œé‰´æƒï¼Œåªæœ‰æ¶ˆæ¯ id å­˜åœ¨ä¸”æœªåˆ é™¤ï¼Œå¹¶ä¸”å±äºå½“å‰ç™»å½•çš„ç”¨æˆ·ï¼Œæ‰ä¼šè°ƒç”¨ Whisper å°†æ–‡æœ¬è½¬æ¢æˆè¯­éŸ³ï¼Œåœ¨å‰ç«¯å¦‚æœè¯¥æ¥å£è¿˜æœªå®Œå…¨ç»“æŸå°±é‡æ–°å‘èµ·æé—®è¯·æ±‚ï¼Œåˆ™ä¼šç›´æ¥ä¸­æ–­è¯¥ API æ¥å£ï¼Œè¯¥ API æ¥å£ä¼šæ ¹æ®ä¼ é€’çš„ `message_id` æ£€æµ‹ `invoke_from(è°ƒç”¨æ¥æº)` ä»è€Œè·å–ä¸åŒçš„æ–‡æœ¬è½¬è¯­éŸ³é…ç½®ä¿¡æ¯ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/audio/message-to-audio`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `message_id -> uuid`ï¼šéœ€è¦è½¬æ¢æˆæµå¼äº‹ä»¶è¯­éŸ³çš„æ¶ˆæ¯ idï¼Œç±»å‹ä¸º uuidã€‚
  - æµå¼äº‹ä»¶è¾“å‡ºå‚æ•°ï¼š
    - `event -> str`ï¼šæµå¼äº‹ä»¶ç±»å‹ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œè¯¥æ¥å£å›ºå®šè¿”å› `tts_message`ï¼Œå½“æµå¼äº‹ä»¶è¾“å‡ºç»“æŸçš„æ—¶å€™ä¼šè¿”å› `tts_end` ä»£è¡¨å½“æ¬¡è¯·æ±‚å·²ç»“æŸã€‚
    - `data -> dict[str, Any]`ï¼šæµå¼äº‹ä»¶è¾“å‡ºå­—å…¸å‚æ•°ã€‚
      - `conversation_id -> uuid`ï¼šè¯¥æ¶ˆæ¯å½’å±çš„ä¼šè¯ idï¼Œç±»å‹ä¸º uuidã€‚
      - `message_id -> uuid`ï¼šè¯¥æ–‡æœ¬å†…å®¹å½’å±çš„æ¶ˆæ¯ idï¼Œç±»å‹ä¸º uuidã€‚
      - `audio -> str`ï¼šæµå¼äº‹ä»¶è¾“å‡ºçš„éŸ³é¢‘æ•°æ®ï¼ˆäºŒè¿›åˆ¶æ•°æ®è¿›è¡Œ base64 ç¼–ç ï¼‰ï¼Œå‰ç«¯è·å–æ•°æ®åå³å¯å°†æ•°æ®è½¬æ¢æˆéŸ³é¢‘åè‡ªåŠ¨æ’­æ”¾ï¼Œç›®å‰æ¯æ®µæ•°æ®çš„é•¿åº¦ä¸è¶…è¿‡ 1024 ä¸ªä½ã€‚
  
- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/audio/message-to-audio
  
  {
  	"message_id": "5e7834dc-bbca-4ee5-9591-8f297f5acded"
  }
  ```
  
- **å“åº”ç¤ºä¾‹**ï¼š

  ```bash
  event: tts_message
  data: {"conversation_id": "2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8", "message_id": "5e7834dc-bbca-4ee5-9591-8f297f5acded", "audio": "UY+GAmXlDAmgtmRZsoAMiAAIANhiKEmWnA77iRIKEETeMNMISMgGTUBStH0wRQxIwve4EONzR1b6MI7pdrPRdMQLVmAxYwZBTBhd1gKqBnlhwGBriRuVZv1ZvRKE0MAhAEEAwUEiLsv9IJM9zynefGyfG4OHJUmbKmZBmUMDJIqiiYeouYACZAaFRC8lpRp5m0ZdJkEiaiCQxw4FDDMmzJmwcrMoKNiqNuuMclM4hM9BMOeMiaM6eMAJn5cyqWXI//PkxNJpbDnoEZ3QAKR5l80XYTwTHgZ8ZS6bvzkOrocZnrDU85UyGgbIgmdNtVhm6y6G21j70RttYvbaW2BfzWIwluCQYYDMMKMMIDhBkRJiQ4OBmGEKkUgpfJAQFAAlW4AgDDjkEqdJZ1l0sd0VAFykJSqJalsc/D9V9IzbdWHJU+M7Gpq3DVEu9ItH8FDCyCOBjQJb9daPj8Qf1ulIxNHtd5ZBNRghd1gSfStz1JvAEAoCXZLqs6TSQeh2A2Sx1lqPLMkUkHpikirZJDEqelf6G2WyR8XxmKOBqJ2rMHUFMsezoKE4hhM0AzBygz1GNJQjMRYkKzQWY3uCN/cjYUozEWQijgFDDGSQxgZMOBU1XqWND4UAzDhkyAxOfI87DncNUoDDIPKDKmLnGEaajZuPm86bSpnDpmiEIz3jYjOKE3FTMBY6lUWWLtOcwJQaB0MQACWta4CRDNQMIFXsBP1BKCUsiWZUtZ6BBTMTNRU0kTONMxE1nTkzOfA8bjtoOV41zAgaH1hVitaUyBIBjmGikaaRnkBAT/s6fqAVSsFYUYaBv0Hj0dFpxKiwoXEM9Q1UAUkqmYypnrGqkZoxdJ40TUALatKd1uxaoxSjPSNdY11jTMBRUOF7jDEMcYBD//PkxP927DmUAdvIAC9k9QAGYQKumwlwTAFMYkyjTOTNZs3HzPMDAm7gwEyDzSXNhk1lTMDa2BAzEBRxaMWeMMIFBMWTSLLFxmDS5aRglGu8ctRsMmYC0wKgGKQZIwCGLjF3i6pgCmQaZx5mDoUrKAIhklAIFK2UQ88IMBMg00ETQRAQzTwISaTJuOm0qZgafMBSFVYAiGagaqxsrGqgZowGCWKzlYUuCYAZhBlrXNTSLgltS8KRKYqJoEBMQszETHIAwyuo+w1iMViSlRf0tKijCXCa9L1bS1KAZTaG0eQAGYxZmHmgmaSqTEFNRTMuMTAwKsBgYMBAsKhgiDSUMGQ0EAw0RmVApnhyZmmGQK5hK0KLYAWDHU00YmFuY4diNyjzS6AyKpC9QYfSmeSxubWdMRHZL5ytAa9dmW4QMwzFL40WzN0jDn1U5sgN8aTR4AxqJEMQYPDmTPxoLaagqA=="}
  event: tts_message
  data: {"conversation_id": "2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8", "message_id": "5e7834dc-bbca-4ee5-9591-8f297f5acded", "audio": "TBgA2AzV2TsMJCDzDANQcEwTJQ4NFJH6TAaQgYwJoABMTPMCzCtAc8mBrDAjQCkwsUBqMojcBFkzQYjdwVEAEIQKGKoHBJXJg8FHMRYiWAgig4amBpkkRmIJGdZXJhYyGESIZ+3xmUYjwACwRMVvcIfUcgJSHZEYKAR0zNoMzDwkeHzBg83hcAIUYcSHb1Zn5sYEMGnKoPJzlpMzAxCFM5EQBwkX3TnVhV60tHu5BrppBqKOIo5MUaX4WAooYiaAa2M8BDDTUafzNjUEh8fVWZ015qqmsigOW2IxQyeGZHT/8+TE6W88OgwE/zaQ1t3rsiagytGcZBY6now0s6gyFQsxEDLPhgUm4JABQEtfbdmEOPTLYlHo+7mVucd2619WxXiSDTFNGctzgJlQEAAcEQOnWlBSwy7Devy2Vw3QiztzUM0sTi0qj7lMDdmAoMru65cw7suduOwDA7XloxlpcYamxeAHQXgqizutQxqFvRnDULedh77tbiT8VJqRQDAcMSx0GmSCFv3Cq96w5kCO3Lm7rGh9/WEsrayueCX9l0Xd1lLXm5sQij+thkctac7zyW32aywJYdm7Uq8CSN5HhldMQU1FMAYDcwDQNAuMWY7fz5gsBzmCSAGZHpYR6zg5GGQI4YqYSZhmKmmjCZSY/ILZh5AZmTqJ+a7Nxt5hGrooa9S5hEzGol0bCLBiwLFUXmSSWNMIwiITDgIMVKMBAIFBAxiOiuCmPiQZ0XBq5eGYTcZ+LCCExqqDQyYNdNI18zjVxSAQ4Mco02eyzearMHLw3s9jGxRNMsk2yezFaDCo9HkUBUYZkEpkVJm14ScFV5k0GGCgGZmRQk3DKp3M3mEyWIxgwZ4wGFAsMNOdARNNcwhg0iYzwRTExqc1pkeeA5oZ5Iaw0CARmWp2754YZkw5pHhzHhjCJtXZqSaI7O3/8+TE+3O8OigA9zScTNoa75FQ08PtwbSVx1QROVQ9qimghAGYXG0OCxwLlTcsxZms9KUxY9oaJjTHYh1ib92LGGGHZiSRixL9/3sajlen5hGKKeuY3ox3VuvLLtPL895by3bz7yV27kxG78Yx7bmHIqSqkjblyOHIw2Vq6777IC8CgjEIYmX7eBYl6uudTd15XbdeVMocRu6RbvJiN1LMLVLVgoG7wMAIDIOrMrWHbsCAxjBgCGPlSPo3ylBghBiAgcAgt2kTGSI2IKOJneTQLgAoA5jKIEfeFuAppBKGaV5MQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqPtN9uSsprR5BiSCJigQYFwEa1owSB8wOCg30NIwSIMyMC0yLjMxMDIQAWhLMvQ/CAWaQSgMYoASqQs2ZCNMfZiFi4OLn5A=="}
  ...
  event: tts_end
  data: {"conversation_id": "2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8", "message_id": "5e7834dc-bbca-4ee5-9591-8f297f5acded", "audio": ""}
  ```

## 17. ç¬¬ä¸‰æ–¹åº”ç”¨é›†æˆæ¨¡å—

### 17.1 è·å–æŒ‡å®š Agent çš„å¾®ä¿¡å…¬ä¼—å·å‘å¸ƒé…ç½®ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºè·å–æŒ‡å®š Agent çš„å¾®ä¿¡å…¬ä¼—å·å‘å¸ƒé…ç½®ä¿¡æ¯ï¼Œå¦‚æœè¯¥ Agent åº”ç”¨æœªå‘å¸ƒæˆ–è€…æœªé…ç½®å¾®ä¿¡å…¬ä¼—å·é…ç½®ï¼Œåˆ™ä¼šè¿”å›æ¸…ç©ºçš„æ•°æ®ä¿¡æ¯

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`GET:/platform/:app_id/wechat-config`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦è·å–æŒ‡å®šåº”ç”¨çš„ id ä¿¡æ¯ï¼Œç±»å‹ä¸º uuidã€‚
  - å“åº”å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šAgent åº”ç”¨çš„ idï¼Œæ ¼å¼ä¸º uuidã€‚
    - `url -> str`ï¼šå¾®ä¿¡å…¬ä¼—å·éœ€é…ç½®çš„æœåŠ¡å™¨ URL åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `ip -> str`ï¼šå½“å‰æœåŠ¡å™¨çš„ ip åœ°å€ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¸»è¦ç”¨äºé…ç½®å¾®ä¿¡
    - `wechat_app_id -> str`ï¼šAgent åº”ç”¨å…³è”çš„å¾®ä¿¡å¼€å‘è€… idï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ `wxa8f9280a99287089`ã€‚
    - `wechat_app_secret -> str`ï¼šAgent åº”ç”¨å…³è”çš„å¾®ä¿¡ç§˜é’¥ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `wechat_token -> str`ï¼šAgent åº”ç”¨å…³è”çš„å¾®ä¿¡å…¬ä¼—å· token æˆæƒå‡­è¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚
    - `status -> str`ï¼šé…ç½®çŠ¶æ€æ ‡è®°ï¼Œå¦‚æœä¸º `configured` åˆ™ä¸ºå·²é…ç½®ï¼Œ`unconfigured` åˆ™æœªé…ç½®ã€‚
    - `updated_at -> int`ï¼šå¾®ä¿¡å…¬ä¼—å·é…ç½®çš„æ›´æ–°æ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œå•ä½ä¸ºç§’ã€‚
    - `created_at -> int`ï¼šå¾®ä¿¡å…¬ä¼—å·é…ç½®çš„åˆ›å»ºæ—¶é—´æˆ³ï¼Œç±»å‹ä¸ºæ•´å‹ï¼Œå•ä½ä¸ºç§’ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/platform/2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8/wechat-config
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {
          "app_id": "2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8",
          "wechat_app_id": "wxa56420b86848470a",
          "wechat_app_secret": "",
          "wechat_token": "",
          "status": "configured",
          "updated_at": 1713105994,
          "created_at": 1713105994
      },
      "message": ""
  }
  ```

### 17.2 æ›´æ–° or å‘å¸ƒ Agent çš„å¾®ä¿¡å…¬ä¼—å·é…ç½®ä¿¡æ¯

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦ç”¨äºé…ç½®ä¸æ›´æ–° Agent çš„å¾®ä¿¡å…¬ä¼—å·ä¿¡æ¯ï¼Œæ¶µç›–äº†ï¼š`app_id`ã€`app_secret`ã€`token` ç­‰ä¿¡æ¯ï¼Œå¦‚æœæŸä¸ªåº”ç”¨æœªå‘å¸ƒï¼Œåˆ™ä¸å…è®¸é…ç½®è¯¥é€‰é¡¹ï¼Œå¦‚æœä¸‰ä¸ªå‚æ•°ä»»æ„å°‘ä¼ é€’äº†ä¸€ä¸ªï¼Œåˆ™è§†ä¸ºæœªé…ç½®ï¼Œåªæœ‰ä¸‰ä¸ªå‚æ•°éƒ½é…ç½®çš„æƒ…å†µä¸‹æ‰æ˜¯å·²é…ç½®ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æˆæƒ`+`POST:/platform/:app_id/wechat-config`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šè·¯ç”±å‚æ•°ï¼Œéœ€è¦æ›´æ–° or å‘å¸ƒçš„å¾®ä¿¡é…ç½®å¯¹åº”çš„åº”ç”¨ idï¼Œç±»å‹ä¸º uuidã€‚
    - `wechat_app_id -> str`ï¼šå¾®ä¿¡å…¬ä¼—å·å¼€å‘è€… IDï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå¯é€‰å‚æ•°ã€‚
    - `wechat_app_secret -> str`ï¼šå¾®ä¿¡å…¬ä¼—å·å¼€å‘è€…ç§˜é’¥ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå¯é€‰å‚æ•°ã€‚
    - `wechat_token -> str`ï¼šå¾®ä¿¡å¼€å‘è€…æˆæƒå‡­è¯ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå¯é€‰å‚æ•°ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  POST:/platform/2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8/wechat-configã€
  
  {
  	"wechat_app_id": "wxa56420b86848470a",
  	"wechat_app_secret": "19c8e54e0431d31e6d9cc61c697bf0f9",
  	"wechat_token": "0jIB3k%tVg1uKTjg5fwhTS4rCmTKTvFq"
  }
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```json
  {
      "code": "success",
      "data": {},
      "message": "æ›´æ–°Agentåº”ç”¨å¾®ä¿¡é…ç½®æˆåŠŸ"
  }
  ```

### 17.3 å¾®ä¿¡APIæ ¡éªŒä¸æ¶ˆæ¯æ¨é€

- **æ¥å£è¯´æ˜**ï¼šè¯¥æ¥å£ä¸»è¦æ ¡éªŒå¹¶å‘å¸ƒ Agent åˆ°å¾®ä¿¡å…¬ä¼—å·ï¼Œæ¥å£æ”¯æŒä¸¤ç§æ–¹æ³•ï¼šGET+POSTï¼Œå…¶ä¸­ GET æ–¹æ³•ç”¨äºæ ¡éªŒ API æ¥å£å¯¹åº”çš„æƒé™ï¼ŒPOST æ–¹æ³•ç”¨äºæ¥æ”¶æ¨é€çš„æ¶ˆæ¯ï¼Œè¯¥ API æ¥å£ä¼šæ ¡éªŒå¯¹åº”åº”ç”¨çš„ä¿¡æ¯ï¼Œåªæœ‰å·²å‘å¸ƒçš„åº”ç”¨æ‰å¯ä»¥é…ç½®ï¼Œå¦åˆ™ä¼šæŠ›å‡ºé”™è¯¯ä¿¡æ¯ï¼Œè¯¥æ¥å£çš„è¶…æ—¶æ—¶é—´ä¸èƒ½è¶…è¿‡ 5sï¼Œå¦‚æœ 5s å†… Agent æ²¡æ³•å“åº”å†…å®¹ï¼Œåˆ™éœ€è¦æ¨é€å¯¹åº”ä¿¡æ¯ç»™å¾®ä¿¡æœåŠ¡å™¨ï¼Œå¦åˆ™ä¼šè§¦å‘å¾®ä¿¡çš„é‡è¯•æœºåˆ¶ã€‚

- **æ¥å£é€»è¾‘**ï¼š

  1. å›å¤ `1` å¹¶ä¸” `ä¸Šæ¬¡çš„å›å¤æœªæ¨é€`ï¼Œåˆ™ä»£è¡¨è·å–ä¸Šæ¬¡ Agent æ€è€ƒçš„å†…å®¹ï¼Œå¦‚æœæœªå®Œæˆåˆ™æç¤ºæœªå®Œæˆï¼Œå‡ºé”™åˆ™æç¤ºå‡ºé”™ä¿¡æ¯ï¼Œå¦åˆ™è·å–ä¸Šæ¬¡ç”Ÿæˆçš„ç­”æ¡ˆä¿¡æ¯ï¼Œå¦‚æœç”¨æˆ·å‘èµ·äº†å¤šæ¡æ¶ˆæ¯æé—®ï¼Œåˆ™ `/1` æ°¸è¿œåªä¼šè·å–æœ€åä¸€æ¡æ¶ˆæ¯ã€‚
  2. æ¥å£åœ¨ 5s å†…ä¼šå“åº”ï¼Œå¦‚æœ 5s å†…ä¸èƒ½åŠæ—¶å“åº”ï¼Œä¼šå›å¤ `æ€è€ƒä¸­ï¼Œè¯·å›å¤â€œ1â€è·å–ç»“æœ`ã€‚
  3. `GET` æ–¹æ³•ä¸ºæ ¡éªŒ API æ¥å£å¯¹åº”æƒé™ï¼Œ`POST` ä¸ºæ¥æ”¶ `æ¨é€æ¶ˆæ¯`ã€‚

- **æ¥å£ä¿¡æ¯**ï¼š`æ— éœ€æˆæƒ`+`GET+POST:/wechat/:app_id`

- **æ¥å£å‚æ•°**ï¼š

  - è¯·æ±‚å‚æ•°ï¼š
    - `app_id -> uuid`ï¼šå…³è”çš„åº”ç”¨ idï¼Œç±»å‹ä¸º uuidï¼Œè¯¥å‚æ•°ä¸ºè·¯ç”±å‚æ•°ã€‚

- **è¯·æ±‚ç¤ºä¾‹**ï¼š

  ```bash
  GET:/wechat/2d7d3e3f-95c9-4d9d-ba9c-9daaf09cc8a8?signature=xxx&timestamp=xxx&nonce=xxx&echostr=xxx
  ```

- **å“åº”ç¤ºä¾‹**ï¼š

  ```bash
  kjxiusdbmk19dhj0d
  ```

##  LLMOps é¡¹ç›®æ‰©å±•èµ„æ–™

### 01. é¡¹ç›® OpenAPI-Schema è§„èŒƒ

åœ¨ LLMOps é¡¹ç›®ä¸­ï¼Œå¦‚æœä½¿ç”¨å®Œæ•´çš„ OpenAPI-Schema è§„èŒƒæ¥æè¿° API å·¥å…·ä¼šæ˜¾å¾—ç‰¹åˆ«ç¹çï¼Œæ‰€ä»¥æˆ‘ä»¬å¯¹ OpenAPI-Schema è§„èŒƒè¿›è¡Œç›¸åº”çš„ç®€åŒ–+è°ƒæ•´ï¼Œåšå‡ºå¦‚ä¸‹çº¦å®šï¼š

1. æ‰€æœ‰çš„å¤–éƒ¨ API è¯·æ±‚ç±»å‹åªæœ‰ GET å’Œ POSTï¼Œå¹¶æ²¡æœ‰ DELETE/PUT ç­‰æ–¹æ³•ï¼Œä¸€ä¸ªè·¯å¾„ä¸‹å¯ä»¥æ‹¥æœ‰å¤šä¸ªæ–¹æ³•ï¼Œä¾‹å¦‚åŒæ—¶æ‹¥æœ‰ GET å’Œ POSTï¼Œåœ¨é¡¹ç›®ä¸­ä½¿ç”¨ OperationId è¿›è¡Œå”¯ä¸€æ ‡è¯†åˆ¤æ–­ï¼›
2. åŸºç¡€çš„ API åœ°å€æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼Œè¢«æ·»åŠ åˆ° server ä¸­ï¼Œè¯¥è§„èŒƒæ˜¯ LLMOps é¡¹ç›®è‡ªè¡Œçº¦å®šçš„ï¼Œå¹¶ä¸æ˜¯ OpenAPI è§„èŒƒï¼›
3. æ¥å£çš„æ•°æ®å¯ä»¥ä½œä¸ºå‚æ•°è¢«é™„åŠ åˆ° `Header/Query/Cookie/Path/RequestBody` è¿™ 4 ä¸ªä½ç½®ï¼›
4. æ‰€æœ‰çš„å‚æ•°éƒ½ä½¿ç”¨ `parameters` è¿›è¡Œè®°å½•ï¼Œ`in` å‚æ•°çš„ç±»å‹æ”¯æŒ `path/query/header/cookie/request_body` ä¸­ï¼Œåˆ†åˆ«ä»£è¡¨ `è¯·æ±‚è·¯å¾„`ã€`æŸ¥è¯¢query`ã€`headerè¯·æ±‚å¤´`ã€`cookie`ã€`RequestBody(åªæœ‰POSTæ‰æœ‰)` ã€‚
5. `type` ç±»å‹æ”¯æŒ `str(å­—ç¬¦ä¸²)`ã€`float(æµ®ç‚¹å‹)`ã€`int(æ•´å½¢)`ã€`bool(å¸ƒå°”å€¼)` å…±è®¡ 4 ç§åŸºç¡€ç±»å‹ï¼Œæ³¨æ„ä¸‹è¯¥è§„èŒƒå¹¶ä¸æ˜¯ OpenAPI å†…ç½®çš„å®šä¹‰ï¼Œè€Œæ˜¯æˆ‘ä»¬ä¸ºäº†ç®€åŒ–æè¿°æ–¹æ¡ˆè€Œçº¦å®šçš„ã€‚
6. `required` å­—æ®µå¯é€‰å¯ä¸é€‰ï¼Œé»˜è®¤æƒ…å†µä¸‹éƒ½æ˜¯ true ä»£è¡¨æ˜¯å¿…å¡«çš„ã€‚

æœ€åŸºç¡€çš„å®Œæ•´æ•°æ®ç»“æ„å¦‚ä¸‹ï¼š

```json
{
    "description": "æŸ¥è¯¢ipæ‰€åœ¨åœ°ã€å¤©æ°”é¢„æŠ¥ã€è·¯çº¿è§„åˆ’ç­‰é«˜å¾·å·¥å…·åŒ…",
    "server": "https://gaode.example.com",
    "paths": {
        "/weather": {
            "get": {
                "description": "æ ¹æ®ä¼ é€’çš„åŸå¸‚åè·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”é¢„æŠ¥ï¼Œä¾‹å¦‚ï¼šå¹¿å·",
                "operationId": "GetCurrentWeather",
				"parameters": [
                    {
                        "name": "location",
                        "in": "query",
                        "description": "éœ€è¦æŸ¥è¯¢å¤©æ°”é¢„æŠ¥çš„åŸå¸‚å",
                        "required": true,
                        "type": "str"
                    }
                ]
            }
        },
        "/ip": {
            "post": {
                "description": "æ ¹æ®ä¼ é€’çš„ipæŸ¥è¯¢ipå½’å±åœ°",
                "operationId": "GetCurrentIp",
                "parameters": [
                    {
                        "name": "ip",
                        "in": "request_body",
                        "description": "éœ€è¦æŸ¥è¯¢æ‰€åœ¨åœ°çš„æ ‡å‡†ipåœ°å€ï¼Œä¾‹å¦‚:201.52.14.23",
                        "required": true,
                        "type": "str"
                    }
                ]
            }
        }
    }
}
```

ä¾‹å¦‚å½“å‰æœ‰ä¸€ä¸ªæ ¹æ®ä¼ é€’çš„è‹±æ–‡å•è¯æŸ¥è¯¢å­—å…¸ä¿¡æ¯çš„ APIï¼Œåœ°å€ä¸ºï¼šhttps://dict.youdao.com/suggest?q=love&doctype=jsonï¼Œå…¶å‚æ•°å¦‚ä¸‹ï¼š

1. `q -> str`ï¼šéœ€è¦æ£€ç´¢å­—å…¸ä¿¡æ¯çš„è‹±æ–‡å•è¯ï¼Œä¾‹å¦‚ `love`ã€`computer`ã€‚
2. `doctype -> str`ï¼šå¯é€‰å‚æ•°ï¼Œè¿”å›æ•°æ®çš„ç±»å‹ï¼Œæ”¯æŒ json å’Œ xml ä¸¤ç§æ ¼å¼ï¼Œé»˜è®¤è¿”å› xml æ ¼å¼çš„æ•°æ®ã€‚

è¿”å›çš„æ•°æ®å¦‚ä¸‹ï¼š

```json
{
	"result": {
		"msg": "success",
		"code": 200
	},
	"data": {
		"entries": [{
				"explain": "n. ï¼ˆå¯¹å®¶åº­æˆå‘˜æˆ–æŒšå‹çš„ï¼‰å–œçˆ±ï¼Œå…³çˆ±ï¼›çˆ±æƒ…ï¼Œæ‹çˆ±ï¼›å–œå¥½ï¼Œå–œçˆ±ï¼›<è‹±ï¼Œéæ­£å¼>ï¼ˆæ˜µç§°ï¼‰äº²çˆ±çš„ï¼›ï¼ˆç”¨äº...",
				"entry": "love"
			},
			{
				"explain": "adj. å¯çˆ±çš„ï¼Œè¿·äººçš„ï¼›ä»¤äººæ„‰å¿«çš„ï¼Œç¾å¥½çš„ï¼›äº²åˆ‡å’Œå–„çš„ï¼›<è‹±ï¼Œéæ­£å¼>ï¼ˆç”¨äºè¡¨ç¤ºå¯¹æŸäº‹ç‰©æ„Ÿåˆ°æ¼ç«ï¼‰...",
				"entry": "lovely"
			},
			{
				"explain": "n. ï¼ˆéå©šçš„ï¼‰æƒ…äººï¼›çˆ±å¥½è€…; ã€åã€‘ ï¼ˆLoverï¼‰ï¼ˆè‹±ï¼‰æ´›å¼—ï¼ˆäººåï¼‰",
				"entry": "lover"
			},
			{
				"explain": "v. çƒ­çˆ±ï¼ˆlove çš„è¿‡å»åˆ†è¯ï¼‰; adj. æ‹çˆ±çš„ï¼›å—ççˆ±çš„",
				"entry": "loved"
			},
			{
				"explain": "çˆ±æƒ…",
				"entry": "loves"
			}
		],
		"query": "love",
		"language": "en",
		"type": "dict"
	}
}
```

å°†å…¶è½¬æ¢æˆ OpenAPI-Schema è§„èŒƒçš„æè¿°åï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```json
{
    "description": "è¿™æ˜¯ä¸€ä¸ªæŸ¥è¯¢å¯¹åº”è‹±æ–‡å•è¯å­—å…¸çš„å·¥å…·",
    "server": "https://dict.youdao.com",
    "paths": {
        "/suggest": {
            "get": {
                "description": "æ ¹æ®ä¼ é€’çš„å•è¯æŸ¥è¯¢å…¶å­—å…¸ä¿¡æ¯",
                "operationId": "YoudaoSuggest",
                "parameters": [
                    {
                        "name": "q",
                        "in": "query",
                        "description": "è¦æ£€ç´¢æŸ¥è¯¢çš„å•è¯ï¼Œä¾‹å¦‚love/computer",
                        "required": true,
                        "type": "str"
                    },
                    {
                        "name": "doctype",
                        "in": "query",
                        "description": "è¿”å›çš„æ•°æ®ç±»å‹ï¼Œæ”¯æŒjsonå’Œxmlä¸¤ç§æ ¼å¼ï¼Œé»˜è®¤æƒ…å†µä¸‹jsonæ•°æ®",
                        "required": false,
                        "type": "str"
                    }
                ]
            }
        }
    }
}
```

